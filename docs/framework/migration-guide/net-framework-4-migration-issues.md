---
title: Problèmes de migration du .NET Framework 4
ms.date: 05/02/2017
helpviewer_keywords:
- .NET Framework 4, migration
- application compatibility
ms.assetid: df478548-8c05-4de2-8ba7-adcdbe1c2a60
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 23612e6729314d988eed9401539547b133d4a9fa
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/28/2018
ms.locfileid: "50201635"
---
# <a name="net-framework-4-migration-issues"></a><span data-ttu-id="389a0-102">Problèmes de migration du .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="389a0-102">.NET Framework 4 migration issues</span></span>

<span data-ttu-id="389a0-103">Cette rubrique décrit les problèmes de migration entre le .NET Framework version 3.5 Service Pack 1 et le .NET Framework version 4, notamment les correctifs, les mises en conformité avec les normes et la sécurité, et les changements basés sur les commentaires des clients.</span><span class="sxs-lookup"><span data-stu-id="389a0-103">This topic describes migration issues between the .NET Framework version 3.5 Service Pack 1 and the .NET Framework version 4, including fixes, changes for standards compliance and security, and changes based on customer feedback.</span></span> <span data-ttu-id="389a0-104">La plupart de ces modifications ne requièrent aucun changement dans la programmation de vos applications.</span><span class="sxs-lookup"><span data-stu-id="389a0-104">Most of these changes do not require any programming modifications in your applications.</span></span> <span data-ttu-id="389a0-105">Si des changements s’avèrent nécessaires, consultez la colonne Changements recommandés du tableau.</span><span class="sxs-lookup"><span data-stu-id="389a0-105">For those that may involve modifications, see the Recommended changes column of the table.</span></span>

<span data-ttu-id="389a0-106">Cette rubrique décrit des modifications importantes dans les domaines suivants :</span><span class="sxs-lookup"><span data-stu-id="389a0-106">This topic describes notable changes in the following areas:</span></span>

* [<span data-ttu-id="389a0-107">ASP.NET et web</span><span class="sxs-lookup"><span data-stu-id="389a0-107">ASP.NET and Web</span></span>](#aspnet-and-web)

* [<span data-ttu-id="389a0-108">Fonctionnalités de base</span><span class="sxs-lookup"><span data-stu-id="389a0-108">Core</span></span>](#core)

* [<span data-ttu-id="389a0-109">Données</span><span class="sxs-lookup"><span data-stu-id="389a0-109">Data</span></span>](#data)

* [<span data-ttu-id="389a0-110">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="389a0-110">Windows Communication Foundation (WCF)</span></span>](#windows-communication-foundation-wcf)

* [<span data-ttu-id="389a0-111">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="389a0-111">Windows Presentation Foundation (WPF)</span></span>](#windows-presentation-foundation-wpf)

* [<span data-ttu-id="389a0-112">XML</span><span class="sxs-lookup"><span data-stu-id="389a0-112">XML</span></span>](#xml)

<span data-ttu-id="389a0-113">Pour obtenir une vue d’ensemble globale des problèmes dans cette rubrique, consultez [Guide de migration vers le .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-113">For an higher-level overview of the issues in this topic, see the [Migration Guide to the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29).</span></span>

<span data-ttu-id="389a0-114">Pour plus d’informations sur les nouvelles fonctionnalités, consultez [Nouveautés du .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-114">For information about new features, see [What's New in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29).</span></span>

## <a name="aspnet-and-web"></a><span data-ttu-id="389a0-115">ASP.NET et web</span><span class="sxs-lookup"><span data-stu-id="389a0-115">ASP.NET and Web</span></span>

<span data-ttu-id="389a0-116">Espaces de noms : <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls> ; assembly : System.Web (dans System.Web.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-116">Namespaces: <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls>; assembly: System.Web (in System.Web.dll)</span></span>

| <span data-ttu-id="389a0-117">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-117">Feature</span></span> | <span data-ttu-id="389a0-118">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-118">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-119">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-119">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-120">**Fichiers de définition de navigateur**</span><span class="sxs-lookup"><span data-stu-id="389a0-120">**Browser definition files**</span></span> | <span data-ttu-id="389a0-121">Les fichiers de définition de navigateur ont été mis à jour pour inclure des informations sur les navigateurs et les appareils récemment sortis et mis à jour.</span><span class="sxs-lookup"><span data-stu-id="389a0-121">The browser definition files have been updated to include information about new and updated browsers and devices.</span></span> <span data-ttu-id="389a0-122">Des navigateurs et appareils anciens (comme Netscape Navigator) ont été supprimés tandis que de nouveaux navigateurs et appareils (comme Google Chrome et Apple iPhone) ont été ajoutés.</span><span class="sxs-lookup"><span data-stu-id="389a0-122">Older browsers and devices such as Netscape Navigator have been removed, and newer browsers and devices such as Google Chrome and Apple iPhone have been added.</span></span><br><br><span data-ttu-id="389a0-123">Si votre application contient des définitions de navigateur personnalisées qui héritent de l’une des définitions de navigateur supprimées, une erreur s’affiche.</span><span class="sxs-lookup"><span data-stu-id="389a0-123">If your application contains custom browser definitions that inherit from one of the browser definitions that have been removed, you will see an error.</span></span><br><br><span data-ttu-id="389a0-124">L’objet <xref:System.Web.HttpBrowserCapabilities> (qui est exposé par la propriété `Request.Browse` de la page) est régi par les fichiers de définition de navigateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-124">The <xref:System.Web.HttpBrowserCapabilities> object (which is exposed by the page's `Request.Browse` property) is driven by the browser definition files.</span></span> <span data-ttu-id="389a0-125">Les informations retournées durant l’accès à une propriété de cet objet dans ASP.NET 4 peuvent donc être différentes de celles retournées dans une version antérieure d’ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-125">Therefore, the information that is returned by accessing a property of this object in ASP.NET 4 might be different than the information that was returned in an earlier version of ASP.NET.</span></span> | <span data-ttu-id="389a0-126">Si votre application repose sur les anciens fichiers de définitions de navigateur, vous pouvez les copier à partir du dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-126">If your application relies on the old browser definition files, you can copy them from the following folder:</span></span><br><br><span data-ttu-id="389a0-127">*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\Browsers*</span><span class="sxs-lookup"><span data-stu-id="389a0-127">*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\Browsers*</span></span><br><br><span data-ttu-id="389a0-128">Copiez les fichiers dans le dossier *\\CONFIG\\Browsers* correspondant pour ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="389a0-128">Copy the files into the corresponding *\\CONFIG\\Browsers* folder for ASP.NET 4.</span></span> <span data-ttu-id="389a0-129">Après avoir copié les fichiers, exécutez l’outil en ligne de commande [Aspnet_regbrowsers.exe](https://msdn.microsoft.com/library/ms229858.aspx).</span><span class="sxs-lookup"><span data-stu-id="389a0-129">After you copy the files, run the [Aspnet_regbrowsers.exe](https://msdn.microsoft.com/library/ms229858.aspx) command-line tool.</span></span> <span data-ttu-id="389a0-130">Pour plus d’informations, consultez le site web [https://www.asp.net/mobile](/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="389a0-130">For more information, see the [https://www.asp.net/mobile](/aspnet/mobile/overview) Web site.</span></span> |
| <span data-ttu-id="389a0-131">**Applications enfants exécutées sous des versions mixtes d’ASP.NET**</span><span class="sxs-lookup"><span data-stu-id="389a0-131">**Child applications running under mixed versions of ASP.NET**</span></span> | <span data-ttu-id="389a0-132">Les applications ASP.NET 4 configurées comme enfants d’applications qui exécutent des versions antérieures d’ASP.NET risquent de ne pas démarrer en raison d’erreurs de configuration ou de compilation.</span><span class="sxs-lookup"><span data-stu-id="389a0-132">ASP.NET 4 applications that are configured as children of applications that run earlier versions of ASP.NET might fail to start because of configuration or compilation errors.</span></span> <span data-ttu-id="389a0-133">L’erreur spécifique qui se produit varie selon que l’application s’exécute sous IIS 6.0, IIS 7 ou IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="389a0-133">The specific error that occurs depends on whether the application runs under IIS 6.0, or under IIS 7 or IIS 7.5.</span></span> | <span data-ttu-id="389a0-134">Vous pouvez apporter des changements aux fichiers de configuration des applications affectées pour que le système de configuration reconnaisse l’application ASP.NET 4 correctement.</span><span class="sxs-lookup"><span data-stu-id="389a0-134">You can make changes to the configuration files of the affected applications so that the configuration system correctly recognizes the ASP.NET 4 application.</span></span> <span data-ttu-id="389a0-135">Pour plus d’informations sur les changements que vous devez effectuer, consultez la section « Échec du démarrage des applications enfants ASP.NET 4 sous des applications ASP.NET 2.0 ou ASP.NET 3.5 » dans le document [Changements avec rupture dans ASP.NET 4](/aspnet/whitepapers/aspnet4/breaking-changes) sur le site web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-135">For information about the changes you must make, see the section "ASP.NET 4 Child Applications Fail to Start When Under ASP.NET 2.0 or ASP.NET 3.5 Applications" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="389a0-136">**Changements de ClientID**</span><span class="sxs-lookup"><span data-stu-id="389a0-136">**ClientID changes**</span></span> | <span data-ttu-id="389a0-137">Le nouveau paramètre `clientIDMode` dans ASP.NET 4 vous permet de spécifier la façon dont ASP.NET génère l’attribut `id` pour les éléments HTML.</span><span class="sxs-lookup"><span data-stu-id="389a0-137">The new `clientIDMode` setting in ASP.NET 4 lets you specify how ASP.NET generates the `id` attribute for HTML elements.</span></span> <span data-ttu-id="389a0-138">Dans les versions antérieures d’ASP.NET, le comportement par défaut était équivalent au paramètre `AutoID` de `clientIDMode`.</span><span class="sxs-lookup"><span data-stu-id="389a0-138">In previous versions of ASP.NET, the default behavior was equivalent to the `AutoID` setting of `clientIDMode`.</span></span> <span data-ttu-id="389a0-139">Le paramètre par défaut est désormais `Predictable`.</span><span class="sxs-lookup"><span data-stu-id="389a0-139">The default setting is now `Predictable`.</span></span> <span data-ttu-id="389a0-140">Pour plus d’informations, consultez [Identification du contrôle serveur web ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/1d04y8ss%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-140">For more information, see [ASP.NET Web Server Control Identification](https://docs.microsoft.com/previous-versions/aspnet/1d04y8ss%28v=vs.100%29).</span></span> | <span data-ttu-id="389a0-141">Si vous utilisez Visual Studio pour mettre à niveau votre application à partir d’ASP.NET 2.0 ou d’ASP.NET 3.5, l’outil ajoute automatiquement un paramètre au fichier Web.config pour conserver le comportement des versions antérieures du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="389a0-141">If you use Visual Studio to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the Web.config file that preserves the behavior of earlier versions of the .NET Framework.</span></span> <span data-ttu-id="389a0-142">Toutefois, si vous mettez à niveau une application en changeant le pool d’applications dans IIS pour cibler le .NET Framework 4, ASP.NET utilise le nouveau mode par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-142">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new mode by default.</span></span> <span data-ttu-id="389a0-143">Pour désactiver le nouveau mode ID client, ajoutez le paramètre suivant au fichier Web.config :</span><span class="sxs-lookup"><span data-stu-id="389a0-143">To disable the new client ID mode, add the following setting to the Web.config file:</span></span><br><br>`<pages clientIDMode="AutoID" />` |
| <span data-ttu-id="389a0-144">**Sécurité d’accès du code (CAS)**</span><span class="sxs-lookup"><span data-stu-id="389a0-144">**Code access security (CAS)**</span></span> | <span data-ttu-id="389a0-145">Les fonctionnalités ASP.NET 2.0 ajoutées dans ASP.NET 3.5 utilisent le modèle de sécurité d’accès du code (CAS) du .NET Framework 1.1 et du .NET Framework 2.0.</span><span class="sxs-lookup"><span data-stu-id="389a0-145">ASP.NET 2.0 NET features that were added in ASP.NET 3.5 use the .NET Framework 1.1 and .NET Framework 2.0 code access security (CAS) model.</span></span> <span data-ttu-id="389a0-146">Toutefois, l’implémentation de CAS dans ASP.NET 4 a été considérablement revue.</span><span class="sxs-lookup"><span data-stu-id="389a0-146">However, the implementation of CAS in ASP.NET 4 has been substantially overhauled.</span></span> <span data-ttu-id="389a0-147">Ainsi, les applications ASP.NET de confiance partielle qui s’appuient sur du code de confiance exécuté dans le Global Assembly Cache peuvent échouer avec différentes exceptions de sécurité.</span><span class="sxs-lookup"><span data-stu-id="389a0-147">As a result, partial-trust ASP.NET applications that rely on trusted code running in the global assembly cache might fail with various security exceptions.</span></span> <span data-ttu-id="389a0-148">Les applications de confiance partielle qui s’appuient sur d’importantes modifications apportées à la stratégie CAS de l’ordinateur peuvent également échouer et lever des exceptions de sécurité.</span><span class="sxs-lookup"><span data-stu-id="389a0-148">Partial-trust applications that rely on extensive modifications to machine CAS policy might also fail and throw security exceptions.</span></span> | <span data-ttu-id="389a0-149">Vous pouvez rétablir le comportement ASP.NET 1.1 et 2.0 pour des applications ASP.NET 4 de confiance partielle en utilisant le nouvel attribut `legacyCasModel` dans l’élément de configuration `trust`, comme indiqué dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-149">You can revert partial-trust ASP.NET 4 applications to the behavior of ASP.NET 1.1 and 2.0 by using the new `legacyCasModel` attribute in the `trust` configuration element, as shown in the following example:</span></span><br><br>`<trust level= "Medium" legacyCasModel="true" />`<br><br><span data-ttu-id="389a0-150">Important : Le rétablissement du modèle CAS antérieur peut entraîner des problèmes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="389a0-150">Important: Reverting to the older CAS model might represent reduced security.</span></span><br><br><span data-ttu-id="389a0-151">Pour plus d’informations sur le nouveau modèle ASP.NET 4 de sécurité d’accès du code, consultez [Sécurité d’accès du code dans les applications ASP.NET 4](https://msdn.microsoft.com/library/dd984947.aspx).</span><span class="sxs-lookup"><span data-stu-id="389a0-151">For more information about the new ASP.NET 4 code access security model, see [Code Access Security in ASP.NET 4 Applications](https://msdn.microsoft.com/library/dd984947.aspx).</span></span> |
| <span data-ttu-id="389a0-152">**Fichiers de configuration**</span><span class="sxs-lookup"><span data-stu-id="389a0-152">**Configuration files**</span></span> | <span data-ttu-id="389a0-153">Les fichiers de configuration racine (le fichier machine.config et le fichier Web.config racine) pour le .NET Framework et ASP.NET 4 ont été mis à jour pour inclure la plupart des informations de configuration réutilisables qui se trouvaient dans les fichiers d’application Web.config dans ASP.NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="389a0-153">The root configuration files (the machine.config file and the root Web.config file) for the .NET Framework and ASP.NET 4 have been updated to include most of the boilerplate configuration information that was found in the application Web.config files in ASP.NET 3.5.</span></span> <span data-ttu-id="389a0-154">En raison de la complexité des systèmes de configuration IIS 7 et IIS 7.5 managés, l’exécution d’applications ASP.NET 3.5 sous ASP.NET 4 et sous IIS 7 et IIS 7.5 peut provoquer des erreurs ASP.NET ou des erreurs IIS.</span><span class="sxs-lookup"><span data-stu-id="389a0-154">Because of the complexity of the managed IIS 7 and IIS 7.5 configuration systems, running ASP.NET 3.5 applications under ASP.NET 4 and under IIS 7 and IIS 7.5 can result in either ASP.NET errors or IIS errors.</span></span> | <span data-ttu-id="389a0-155">Mettez à niveau vos applications ASP.NET 3.5 vers ASP.NET 4 à l’aide des outils de mise à niveau de projet dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="389a0-155">Upgrade ASP.NET 3.5 applications to ASP.NET 4 by using the project upgrade tools in Visual Studio.</span></span> <span data-ttu-id="389a0-156">Visual Studio 2010 modifie automatiquement le fichier Web.config des applications ASP.NET 3.5 pour qu’il contienne les paramètres appropriés pour ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="389a0-156">Visual Studio 2010 automatically modifies the ASP.NET 3.5 application's Web.config file to contain the appropriate settings for ASP.NET 4.</span></span><br><br><span data-ttu-id="389a0-157">Toutefois, vous pouvez exécuter des applications ASP.NET 3.5 à l’aide du .NET Framework 4 sans effectuer de recompilation.</span><span class="sxs-lookup"><span data-stu-id="389a0-157">However, you can run ASP.NET 3.5 applications using the .NET Framework 4 without recompilation.</span></span> <span data-ttu-id="389a0-158">Dans ce cas, vous devrez peut-être modifier manuellement le fichier Web.config de l’application avant d’exécuter l’application sous le .NET Framework 4 et sous IIS 7 ou IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="389a0-158">In that case, you might have to manually modify the application's Web.config file before you run the application under the .NET Framework 4 and under IIS 7 or IIS 7.5.</span></span> <span data-ttu-id="389a0-159">Le changement spécifique à effectuer dépend de la combinaison de logiciels que vous utilisez, notamment les mises en production des Service Pack (SP).</span><span class="sxs-lookup"><span data-stu-id="389a0-159">The specific change you must make depends on the combination of software you are working with, including Service Pack (SP) releases.</span></span> <span data-ttu-id="389a0-160">Pour plus d’informations sur les éventuelles combinaisons de logiciels affectées par ce changement et sur la résolution de problèmes à l’aide de combinaisons spécifiques, consultez la section « Erreurs de configuration liées à la nouvelle configuration racine d’ASP.NET 4 » dans le document [Changements avec rupture dans ASP.NET 4](/aspnet/whitepapers/aspnet4/breaking-changes) sur le site web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-160">For information about the possible software combinations that are affected by this change and how to resolve problems with specific combinations, see the section "Configuration Errors Related to New ASP.NET 4 Root Configuration" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="389a0-161">**Rendu des contrôles**</span><span class="sxs-lookup"><span data-stu-id="389a0-161">**Control rendering**</span></span> | <span data-ttu-id="389a0-162">Dans les versions antérieures d’ASP.NET, certains contrôles émettaient un balisage que vous ne pouviez pas désactiver.</span><span class="sxs-lookup"><span data-stu-id="389a0-162">In previous versions of ASP.NET, some controls emitted markup that you could not disable.</span></span> <span data-ttu-id="389a0-163">Par défaut, ce type de balisage n’est plus généré dans ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="389a0-163">By default, this type of markup is no longer generated in ASP.NET 4.</span></span> <span data-ttu-id="389a0-164">Les changements de rendu affectent les contrôles suivants :</span><span class="sxs-lookup"><span data-stu-id="389a0-164">The rendering changes affect the following controls:</span></span><br><br><span data-ttu-id="389a0-165">\* Les contrôles `Image` et `ImageButton` n’affichent plus d’attribut `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="389a0-165">\* The `Image` and `ImageButton` controls no longer render a `border="0"` attribute.</span></span><br><span data-ttu-id="389a0-166">\* La classe `BaseValidator` et les contrôles de validation dérivés n’affichent plus de texte rouge par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-166">\* The `BaseValidator` class and validation controls that derive from it no longer render red text by default.</span></span><br><span data-ttu-id="389a0-167">\* Le contrôle `HtmlForm` n’affiche pas d’attribut `name`.</span><span class="sxs-lookup"><span data-stu-id="389a0-167">\* The `HtmlForm` control does not render a `name` attribute.</span></span><br><span data-ttu-id="389a0-168">\* Le contrôle `Table` n’affiche plus d’attribut `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="389a0-168">\* The `Table` control no longer renders a `border="0"` attribute.</span></span><br><br><span data-ttu-id="389a0-169">Les contrôles qui ne sont pas conçus pour l’entrée d’utilisateur (par exemple, le contrôle `Label`) n’affichent plus d’attribut `disabled="disabled"` si leur propriété `Enabled` a la valeur `false` (ou s’ils héritent de ce paramètre d’un contrôle conteneur).</span><span class="sxs-lookup"><span data-stu-id="389a0-169">Controls that are not designed for user input (for example, the `Label` control) no longer render the `disabled="disabled"` attribute if their `Enabled` property is set to `false` (or if they inherit this setting from a container control).</span></span> | <span data-ttu-id="389a0-170">Si vous utilisez Visual Studio pour mettre à niveau votre application à partir d’ASP.NET 2.0 ou d’ASP.NET 3.5, l’outil ajoute automatiquement un paramètre au fichier Web.config pour conserver le rendu hérité.</span><span class="sxs-lookup"><span data-stu-id="389a0-170">If you use Visual Studio to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the Web.config file that preserves legacy rendering.</span></span> <span data-ttu-id="389a0-171">Toutefois, si vous mettez à niveau une application en changeant le pool d’applications dans IIS pour cibler le .NET Framework 4, ASP.NET utilise le nouveau mode de rendu par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-171">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new rendering mode by default.</span></span> <span data-ttu-id="389a0-172">Pour désactiver le nouveau mode de rendu, ajoutez le paramètre suivant au fichier Web.config :</span><span class="sxs-lookup"><span data-stu-id="389a0-172">To disable the new rendering mode, add the following setting to the Web.config file:</span></span><br><br>`<pages controlRenderingCompatibilityVersion="3.5" />` |
| <span data-ttu-id="389a0-173">**Gestionnaires d’événements dans les documents par défaut**</span><span class="sxs-lookup"><span data-stu-id="389a0-173">**Event handlers in default documents**</span></span> | <span data-ttu-id="389a0-174">ASP.NET 4 affiche la valeur d’attribut `action` de l’élément HTML `form` sous la forme d’une chaîne vide quand une demande est effectuée à une URL sans extension à laquelle est mappé un document par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-174">ASP.NET  4 renders the HTML `form` element's `action` attribute value as an empty string when a request is made to an extensionless URL that has a default document mapped to it.</span></span> <span data-ttu-id="389a0-175">Dans les premières mises en production d’ASP.NET, une demande à `http://contoso.com` entraînait une demande à Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="389a0-175">In earlier releases of ASP.NET, a request to `http://contoso.com` would result in a request to Default.aspx.</span></span> <span data-ttu-id="389a0-176">Dans ce document, la balise `form` ouvrante était affichée comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-176">In that document, the opening `form` tag would be rendered as in the following example:</span></span><br><br>`<form action="Default.aspx" />`<br><br><span data-ttu-id="389a0-177">Dans ASP.NET 4, une demande à `http://contoso.com` entraîne également une demande à Default.aspx, mais ASP.NET affiche maintenant la balise HTML `form` ouvrante comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-177">In ASP.NET 4, a request to `http://contoso.com` also results in a request to Default.aspx, but ASP.NET now renders the HTML opening `form` tag as in the following example:</span></span><br><br>`<form action="" />`<br><br><span data-ttu-id="389a0-178">Quand l’attribut `action` est une chaîne vide, l’objet IIS `DefaultDocumentModule` crée une demande enfant à Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="389a0-178">When the `action` attribute is an empty string, the IIS `DefaultDocumentModule` object creates a child request to Default.aspx.</span></span> <span data-ttu-id="389a0-179">Dans la plupart des conditions, cette demande enfant est transparente pour le code d’application, et la page Default.aspx s’exécute normalement.</span><span class="sxs-lookup"><span data-stu-id="389a0-179">Under most conditions, this child request is transparent to application code, and the Default.aspx page runs normally.</span></span> <span data-ttu-id="389a0-180">Toutefois, en raison d’une interaction potentielle entre le code managé et le mode intégré IIS 7 ou IIS 7.5, les pages .aspx managées peuvent cesser de fonctionner correctement pendant la demande enfant.</span><span class="sxs-lookup"><span data-stu-id="389a0-180">However, a potential interaction between managed code and IIS 7 or IIS 7.5 Integrated mode can cause managed .aspx pages to stop working properly during the child request.</span></span> <span data-ttu-id="389a0-181">Si les conditions suivantes se produisent, la demande enfant à un document .aspx par défaut provoque une erreur ou un comportement inattendu :</span><span class="sxs-lookup"><span data-stu-id="389a0-181">If the following conditions occur, the child request to a default .aspx document will result in an error or in unexpected behavior:</span></span><br><br><span data-ttu-id="389a0-182">\* Une page .aspx est envoyée au navigateur dont l’attribut `action` de l’élément `form` a la valeur "".</span><span class="sxs-lookup"><span data-stu-id="389a0-182">\* An .aspx page is sent to the browser with the `form` element's `action` attribute set to "".</span></span><br><span data-ttu-id="389a0-183">\* Le formulaire est publié sur ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-183">\* The form is posted back to ASP.NET.</span></span><br><span data-ttu-id="389a0-184">\* Un module HTTP managé lit une partie du corps d’entité, tel que `Request.Form` ou `Request.Params`.</span><span class="sxs-lookup"><span data-stu-id="389a0-184">\* A managed HTTP module reads some part of the entity body, such as `Request.Form` or `Request.Params`.</span></span> <span data-ttu-id="389a0-185">Le corps d’entité de la demande POST est ainsi lu dans la mémoire managée.</span><span class="sxs-lookup"><span data-stu-id="389a0-185">This causes the entity body of the POST request to be read into managed memory.</span></span> <span data-ttu-id="389a0-186">Le corps d’entité n’est donc plus disponible pour les modules de code natif qui s’exécutent en mode intégré IIS 7 ou IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="389a0-186">As a result, the entity body is no longer available to any native code modules that are running in IIS 7 or IIS 7.5 Integrated mode.</span></span><br><span data-ttu-id="389a0-187">\* L’objet IIS `DefaultDocumentModule` finit par s’exécuter et crée une demande enfant au document Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="389a0-187">\* The IIS `DefaultDocumentModule` object eventually runs and creates a child request to the Default.aspx document.</span></span> <span data-ttu-id="389a0-188">Toutefois, étant donné que le corps d’entité a déjà été lu par une partie du code managé, aucun corps d’entité n’est disponible pour un envoi à la demande enfant.</span><span class="sxs-lookup"><span data-stu-id="389a0-188">However, because the entity body has already been read by a piece of managed code, there is no entity body available to send to the child request.</span></span><br><span data-ttu-id="389a0-189">\* Quand le pipeline HTTP s’exécute pour la demande enfant, le gestionnaire pour les fichiers .aspx s’exécute pendant la phase d’exécution des gestionnaires.</span><span class="sxs-lookup"><span data-stu-id="389a0-189">\* When the HTTP pipeline runs for the child request, the handler for .aspx files runs during the handler-execute phase.</span></span><br><br><span data-ttu-id="389a0-190">Étant donné qu’il n’y a pas de corps d’entité, il n’existe aucune variable de formulaire et aucun état d’affichage.</span><span class="sxs-lookup"><span data-stu-id="389a0-190">Because there is no entity body, there are no form variables and no view state.</span></span> <span data-ttu-id="389a0-191">Le gestionnaire de page .aspx ne dispose donc d’aucune information pour déterminer l’événement à déclencher (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="389a0-191">Therefore there is no information available for the .aspx page handler to determine what event (if any) should be raised.</span></span> <span data-ttu-id="389a0-192">Par conséquent, aucun des gestionnaires d’événements de publication pour la page .aspx concernée ne s’exécute.</span><span class="sxs-lookup"><span data-stu-id="389a0-192">As a result, none of the postback event handlers for the affected .aspx page run.</span></span> | <span data-ttu-id="389a0-193">Pour plus d’informations sur les façons de contourner les problèmes liés à ce changement, consultez la section « Les gestionnaires d’événements peuvent ne pas être déclenchés dans un document par défaut en mode intégré IIS 7 ou IIS 7.5 » dans le document [Changements avec rupture dans ASP.NET 4](/aspnet/whitepapers/aspnet4/breaking-changes) sur le site web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-193">For information about ways to work around problems that might arise as a result of this change, see "Event Handlers Might Not Be Not Raised in a Default Document in IIS 7 or IIS 7.5 Integrated Mode" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="389a0-194">**Algorithme de hachage**</span><span class="sxs-lookup"><span data-stu-id="389a0-194">**Hashing algorithm**</span></span> | <span data-ttu-id="389a0-195">ASP.NET utilise des algorithmes de chiffrement et de hachage pour sécuriser des données telles que les cookies d’authentification par formulaire et l’état d’affichage.</span><span class="sxs-lookup"><span data-stu-id="389a0-195">ASP.NET uses both encryption and hashing algorithms to help secure data such as forms authentication cookies and view state.</span></span> <span data-ttu-id="389a0-196">Par défaut, ASP.NET 4 utilise l’algorithme <xref:System.Security.Cryptography.HMACSHA256> pour les opérations de hachage sur les cookies et l’état d’affichage.</span><span class="sxs-lookup"><span data-stu-id="389a0-196">By default, ASP.NET 4 uses the <xref:System.Security.Cryptography.HMACSHA256> algorithm for hash operations on cookies and view state.</span></span> <span data-ttu-id="389a0-197">Les versions antérieures d’ASP.NET utilisaient l’ancien algorithme <xref:System.Security.Cryptography.HMACSHA1>.</span><span class="sxs-lookup"><span data-stu-id="389a0-197">Earlier versions of ASP.NET used the older <xref:System.Security.Cryptography.HMACSHA1> algorithm.</span></span> | <span data-ttu-id="389a0-198">Si vous exécutez des applications qui combinent ASP.NET 2.0 et ASP.NET 4 (dans lesquelles des données telles que les cookies d’authentification par formulaire doivent fonctionner sous différentes versions du .NET Framework), configurez une application web ASP.NET 4 pour qu’elle utilise l’ancien algorithme <xref:System.Security.Cryptography.HMACSHA1> en ajoutant le paramètre suivant dans le fichier Web.config :</span><span class="sxs-lookup"><span data-stu-id="389a0-198">If you run applications that mix ASP.NET 2.0 and ASP.NET 4, where data such as forms authentication cookies must work across .NET Framework versions, configure an ASP.NET 4 Web application to use the older <xref:System.Security.Cryptography.HMACSHA1> algorithm by adding the following setting in the Web.config file:</span></span><br><br>`<machineKey validation="SHA1" />` |
| <span data-ttu-id="389a0-199">**Hébergement de contrôles dans Internet Explorer**</span><span class="sxs-lookup"><span data-stu-id="389a0-199">**Hosting controls in Internet Explorer**</span></span> | <span data-ttu-id="389a0-200">Vous ne pouvez plus héberger de contrôles Windows Forms dans Internet Explorer, car il existe de meilleures solutions pour l’hébergement de contrôles sur le web.</span><span class="sxs-lookup"><span data-stu-id="389a0-200">You can no longer host Windows Forms controls in the Internet Explorer, because there are better solutions for hosting controls on the Web.</span></span> <span data-ttu-id="389a0-201">Les assemblys IEHost.dll et IEExec.exe ont donc été supprimés du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="389a0-201">Therefore, the IEHost.dll and IEExec.exe assemblies have been removed from the .NET Framework.</span></span> | <span data-ttu-id="389a0-202">Vous pouvez utiliser les technologies suivantes pour le développement de contrôles personnalisés dans les applications web :</span><span class="sxs-lookup"><span data-stu-id="389a0-202">You can use the following technologies for custom control development in Web applications:</span></span><br><br><span data-ttu-id="389a0-203">\* Vous pouvez créer une application Silverlight et la configurer pour s’exécuter hors du navigateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-203">\* You can create a Silverlight application and configure it to run outside the browser.</span></span> <span data-ttu-id="389a0-204">Pour plus d’informations, consultez [Prise en charge hors navigateur](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/dd550721%28v=vs.95%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-204">For more information, see [Out-of-Browser Support](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/dd550721%28v=vs.95%29).</span></span><br><span data-ttu-id="389a0-205">\* Vous pouvez générer une application du navigateur XAML (XBAP) pour tirer parti des fonctionnalités WPF (nécessite le .NET Framework sur les ordinateurs clients).</span><span class="sxs-lookup"><span data-stu-id="389a0-205">\* You can build a XAML browser application (XBAP) to take advantage of WPF capabilities (requires the .NET Framework on client machines).</span></span> <span data-ttu-id="389a0-206">Pour plus d’informations, consultez [Vue d’ensemble des applications de navigateur XAML](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md).</span><span class="sxs-lookup"><span data-stu-id="389a0-206">For more information, see [WPF XAML Browser Applications Overview](../../../docs/framework/wpf/app-development/wpf-xaml-browser-applications-overview.md).</span></span> |
| <span data-ttu-id="389a0-207">**Méthodes HtmlEncode et UrlEncode**</span><span class="sxs-lookup"><span data-stu-id="389a0-207">**HtmlEncode and UrlEncode methods**</span></span> | <span data-ttu-id="389a0-208">Les méthodes `HtmlEncode` et `UrlEncode` des classes <xref:System.Web.HttpUtility> et <xref:System.Web.HttpServerUtility> ont été mises à jour pour encoder le guillemet simple (') comme suit :</span><span class="sxs-lookup"><span data-stu-id="389a0-208">The `HtmlEncode` and `UrlEncode` methods of the <xref:System.Web.HttpUtility> and <xref:System.Web.HttpServerUtility> classes have been updated to encode the single quotation mark character (') as follows:</span></span><br><br><span data-ttu-id="389a0-209">\* La méthode `HtmlEncode` encode les instances du guillemet simple sous la forme `&#39;`</span><span class="sxs-lookup"><span data-stu-id="389a0-209">\* The `HtmlEncode` method encodes instances of the single quotation mark as `&#39;`</span></span><br><span data-ttu-id="389a0-210">\* La méthode `UrlEncode` encode les instances du guillemet simple sous la forme `%27`</span><span class="sxs-lookup"><span data-stu-id="389a0-210">\* The `UrlEncode` method encodes instances of the single quotation mark as `%27`</span></span> | <span data-ttu-id="389a0-211">Dans votre code, recherchez les emplacements où vous utilisez les méthodes `HtmlEncode` et `UrlEncode`, et vérifiez que le changement d’encodage ne provoque pas un changement susceptible d’affecter le comportement de votre application.</span><span class="sxs-lookup"><span data-stu-id="389a0-211">Examine your code for places where you use the `HtmlEncode` and `UrlEncode` methods, and make sure that the change in encoding does not result in a change that would affect your application.</span></span> |
| <span data-ttu-id="389a0-212">**Erreurs HttpException dans les applications ASP.NET 2.0**</span><span class="sxs-lookup"><span data-stu-id="389a0-212">**HttpException errors in ASP.NET 2.0 applications**</span></span> | <span data-ttu-id="389a0-213">Une fois ASP.NET 4 activé sur IIS 6, les applications ASP.NET 2.0 qui s’exécutent sur IIS 6 (dans Windows Server 2003 ou Windows Server 2003 R2) peuvent générer des erreurs, comme celle-ci : `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.`</span><span class="sxs-lookup"><span data-stu-id="389a0-213">After ASP.NET 4 has been enabled on IIS 6, ASP.NET 2.0 applications that run on IIS 6 (in either Windows Server 2003 or Windows Server 2003 R2) might generate errors such as the following: `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.`</span></span> | <span data-ttu-id="389a0-214">\* Si ASP.NET 4 n’est pas obligatoire pour exécuter le site web, remappez-le pour utiliser ASP.NET 2.0 à la place.</span><span class="sxs-lookup"><span data-stu-id="389a0-214">\* If ASP.NET 4 is not required in order to run the Web site, remap the site to use ASP.NET 2.0 instead.</span></span><br><br><span data-ttu-id="389a0-215">- ou -</span><span class="sxs-lookup"><span data-stu-id="389a0-215">-or-</span></span><br><br><span data-ttu-id="389a0-216">\* Si ASP.NET 4 est obligatoire pour exécuter le site web, déplacez tous les répertoires virtuels ASP.NET 2.0 enfants vers un autre site web mappé à ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="389a0-216">\* If ASP.NET 4 is required in order to run the Web site, move any child ASP.NET 2.0 virtual directories to a different Web site that is mapped to ASP.NET 2.0.</span></span><br><br><span data-ttu-id="389a0-217">- ou -</span><span class="sxs-lookup"><span data-stu-id="389a0-217">-or-</span></span><br><br><span data-ttu-id="389a0-218">\* Désactivez les URL sans extension.</span><span class="sxs-lookup"><span data-stu-id="389a0-218">\* Disable extensionless URLs.</span></span> <span data-ttu-id="389a0-219">Pour plus d’informations, consultez « Les applications ASP.NET 2.0 peuvent générer des erreurs HttpException qui référencent eurl.axd » dans le document [Changements avec rupture dans ASP.NET 4](/aspnet/whitepapers/aspnet4/breaking-changes) sur le site web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-219">For more information, see "ASP.NET 2.0 Applications Might Generate HttpException Errors That Reference eurl.axd" in the document [ASP.NET 4 Breaking Changes](/aspnet/whitepapers/aspnet4/breaking-changes) on the ASP.NET Web site.</span></span> |
| <span data-ttu-id="389a0-220">**Types d’appartenance**</span><span class="sxs-lookup"><span data-stu-id="389a0-220">**Membership types**</span></span> | <span data-ttu-id="389a0-221">Certains types (par exemple, <xref:System.Web.Security.MembershipProvider>) utilisés dans l’appartenance ASP.NET ont été déplacés de System.Web.dll vers l’assembly System.Web.ApplicationServices.dll.</span><span class="sxs-lookup"><span data-stu-id="389a0-221">Some types (for example, <xref:System.Web.Security.MembershipProvider>) that are used in ASP.NET membership have been moved from System.Web.dll to the System.Web.ApplicationServices.dll assembly.</span></span> <span data-ttu-id="389a0-222">Les types ont été déplacés pour résoudre des dépendances de couches architecturales entre des types dans le client et dans des références SKU .NET Framework étendues.</span><span class="sxs-lookup"><span data-stu-id="389a0-222">The types were moved in order to resolve architectural layering dependencies between types in the client and in extended .NET Framework SKUs.</span></span> | <span data-ttu-id="389a0-223">Les bibliothèques de classes mises à niveau à partir de versions antérieures d’ASP.NET et qui utilisent des types d’appartenance déplacés risquent de ne pas être compilées correctement quand elles sont utilisées dans un projet ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="389a0-223">Class libraries that have been upgraded from earlier versions of ASP.NET and that use membership types that have been moved might fail to compile when used in an ASP.NET 4 project.</span></span> <span data-ttu-id="389a0-224">Si c’est le cas, ajoutez une référence dans le projet de bibliothèque de classes à System.Web.ApplicationServices.dll.</span><span class="sxs-lookup"><span data-stu-id="389a0-224">If so, add a reference in the class library project to System.Web.ApplicationServices.dll.</span></span> |
| <span data-ttu-id="389a0-225">**Changements apportés au contrôle Menu**</span><span class="sxs-lookup"><span data-stu-id="389a0-225">**Menu control changes**</span></span> | <span data-ttu-id="389a0-226">Les changements apportés au contrôle <xref:System.Web.UI.WebControls.Menu> entraînent le comportement suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-226">Changes to the <xref:System.Web.UI.WebControls.Menu> control result in the following behavior:</span></span><br><br><span data-ttu-id="389a0-227">\* Si <xref:System.Web.UI.WebControls.MenuRenderingMode> a la valeur `List` ou si <xref:System.Web.UI.WebControls.MenuRenderingMode> a la valeur `Default` et <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> la valeur `4.0` ou supérieure, la propriété <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> n’a aucun effet.</span><span class="sxs-lookup"><span data-stu-id="389a0-227">\* If <xref:System.Web.UI.WebControls.MenuRenderingMode> is set to `List`, or if <xref:System.Web.UI.WebControls.MenuRenderingMode> is set to `Default` and <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> is set to `4.0` or later, the <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> property has no effect.</span></span><br><span data-ttu-id="389a0-228">\* Si le chemin défini dans les propriétés <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> et <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> contient une barre oblique inverse (\\), les images ne sont pas affichées.</span><span class="sxs-lookup"><span data-stu-id="389a0-228">\* If the path that is set in the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> and <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> properties contains a backslash (\\), the images do not render.</span></span> <span data-ttu-id="389a0-229">(Dans les versions antérieures d’ASP.NET, le chemin pouvait inclure une barre oblique inverse.)</span><span class="sxs-lookup"><span data-stu-id="389a0-229">(In earlier versions of ASP.NET, the path could include a backslash.)</span></span> | <span data-ttu-id="389a0-230">\* Au lieu de définir la propriété <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> pour les éléments de menu individuels, définissez le <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> ou <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> du contrôle <xref:System.Web.UI.WebControls.Menu> parent.</span><span class="sxs-lookup"><span data-stu-id="389a0-230">\* Instead of setting the <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> property for individual menu items, set the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> or <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> of the parent <xref:System.Web.UI.WebControls.Menu> control.</span></span><br><br><span data-ttu-id="389a0-231">- ou -</span><span class="sxs-lookup"><span data-stu-id="389a0-231">-or-</span></span><br><br><span data-ttu-id="389a0-232">Affectez à <xref:System.Web.UI.WebControls.MenuRenderingMode> la valeur `Table` ou affectez à <xref:System.Web.UI.WebControls.MenuRenderingMode> la valeur `Default` et affectez à <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> la valeur `3.5`.</span><span class="sxs-lookup"><span data-stu-id="389a0-232">Set <xref:System.Web.UI.WebControls.MenuRenderingMode> to `Table`, or set <xref:System.Web.UI.WebControls.MenuRenderingMode> to `Default` and set <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> to `3.5`.</span></span> <span data-ttu-id="389a0-233">Ces paramètres entraînent l’utilisation par le contrôle <xref:System.Web.UI.WebControls.Menu> de la disposition basée sur un tableau HTML qu’il a utilisée dans les versions antérieures d’ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-233">These settings cause the <xref:System.Web.UI.WebControls.Menu> control to use the HTML table-based layout that it used in earlier versions of ASP.NET.</span></span><br><span data-ttu-id="389a0-234">\* Si le chemin dans la propriété <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> ou <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> contient une barre oblique inverse (\\), remplacez-la par une barre oblique (/).</span><span class="sxs-lookup"><span data-stu-id="389a0-234">\* If the path in the <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> or <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> property contains a backslash (\\), substitute a slash character (/).</span></span> |
| <span data-ttu-id="389a0-235">**Assembly mobile dans le fichier Web.config**</span><span class="sxs-lookup"><span data-stu-id="389a0-235">**Mobile assembly in Web.config file**</span></span> | <span data-ttu-id="389a0-236">Dans les versions antérieures d’ASP.NET, une référence à l’assembly System.Web.Mobile.dll était incluse dans le fichier Web.config racine dans la section `assemblies` sous `system.web`/`compilation`.</span><span class="sxs-lookup"><span data-stu-id="389a0-236">In previous versions of ASP.NET, a reference to the System.Web.Mobile.dll assembly was included in the root Web.config file in the `assemblies` section under `system.web`/`compilation`.</span></span> <span data-ttu-id="389a0-237">Pour améliorer les performances, la référence à cet assembly a été supprimée.</span><span class="sxs-lookup"><span data-stu-id="389a0-237">To improve performance, the reference to this assembly has been removed.</span></span><br><br><span data-ttu-id="389a0-238">Remarque : L’assembly System.Web.Mobile.dll et les contrôles mobiles ASP.NET sont inclus dans ASP.NET 4, mais ils sont dépréciés.</span><span class="sxs-lookup"><span data-stu-id="389a0-238">Note: The System.Web.Mobile.dll assembly and the ASP.NET mobile controls are included in ASP.NET 4, but they are deprecated.</span></span> | <span data-ttu-id="389a0-239">Si vous souhaitez utiliser des types de cet assembly, ajoutez une référence à l’assembly dans le fichier Web.config racine ou dans un fichier Web.config d’application.</span><span class="sxs-lookup"><span data-stu-id="389a0-239">If you want to use types from this assembly, add a reference to the assembly in either the root Web.config file or in an application Web.config file.</span></span> |
| <span data-ttu-id="389a0-240">**Mise en cache de sortie**</span><span class="sxs-lookup"><span data-stu-id="389a0-240">**Output caching**</span></span> | <span data-ttu-id="389a0-241">Dans ASP.NET 1.0, en raison d’un bogue, les pages mises en cache qui spécifiaient `Location="ServerAndClient"` en tant que paramètre de cache de sortie émettaient un en-tête HTTP `Vary:*` dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="389a0-241">In ASP.NET 1.0, a bug caused cached pages that specified `Location="ServerAndClient"` as an output€“cache setting to emit a `Vary:*` HTTP header in the response.</span></span> <span data-ttu-id="389a0-242">Les navigateurs clients ne mettaient donc jamais en cache la page localement.</span><span class="sxs-lookup"><span data-stu-id="389a0-242">This had the effect of telling client browsers to never cache the page locally.</span></span> <span data-ttu-id="389a0-243">La méthode <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> ajoutée dans ASP.NET 1.1 pouvait être appelée pour supprimer l’en-tête `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="389a0-243">In ASP.NET 1.1, the <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> method was added, which could be called in order to suppress the `Vary:*` header.</span></span> <span data-ttu-id="389a0-244">Toutefois, les rapports de bogues indiquent que les développeurs ignorent le comportement `SetOmitVaryStar` existant.</span><span class="sxs-lookup"><span data-stu-id="389a0-244">However, bug reports suggest that developers are unaware of the existing `SetOmitVaryStar` behavior.</span></span><br><br><span data-ttu-id="389a0-245">Dans ASP.NET 4, l’en-tête HTTP `Vary:*` n’est plus émis à partir des réponses qui spécifient la directive suivante :</span><span class="sxs-lookup"><span data-stu-id="389a0-245">In ASP.NET 4, the `Vary:*` HTTP header is no longer emitted from responses that specify the following directive:</span></span><br><br>`<%@ OutputCache Location="ServerAndClient" %>`<br><br><span data-ttu-id="389a0-246">La méthode <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> n’est donc plus exigée pour supprimer l’en-tête `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="389a0-246">As a result, the <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> method is no longer needed in order to suppress the `Vary:*` header.</span></span> <span data-ttu-id="389a0-247">Dans les applications qui spécifient « ServerAndClient » pour l’attribut `Location`, les pages peuvent être mises en cache dans le navigateur sans que vous ayez besoin d’appeler <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>.</span><span class="sxs-lookup"><span data-stu-id="389a0-247">In applications that specify "ServerAndClient" for the `Location` attribute, pages will be cacheable in the browser without requiring that you call <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>.</span></span> | <span data-ttu-id="389a0-248">Si des pages de l’application doivent émettre `Vary:*`, appelez la méthode <xref:System.Web.HttpResponse.AppendHeader%2A> comme indiqué dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-248">If pages in the application must emit `Vary:*`, call the <xref:System.Web.HttpResponse.AppendHeader%2A> method as shown in the following example:</span></span><br><br>`System.Web.HttpResponse.AppendHeader("Vary","*");`<br><br><span data-ttu-id="389a0-249">Vous pouvez également affecter à l’attribut `Location` de mise en cache de sortie la valeur « Server ».</span><span class="sxs-lookup"><span data-stu-id="389a0-249">Alternatively, you can change the value of the output caching `Location` attribute to "Server".</span></span> |
| <span data-ttu-id="389a0-250">**Analyse de page**</span><span class="sxs-lookup"><span data-stu-id="389a0-250">**Page parsing**</span></span> | <span data-ttu-id="389a0-251">L’analyseur de page pour les pages web ASP.NET (fichiers .aspx) et les contrôles utilisateur (fichiers .ascx) est plus strict dans ASP.NET 4 que dans les versions antérieures d’ASP.NET et il signale plus de balisages comme non valides que dans les versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="389a0-251">The page parser for ASP.NET Web pages (.aspx files) and user controls (.ascx files) is stricter in ASP.NET 4 than in earlier versions of ASP.NET, and it flags more markup as invalid than in earlier versions.</span></span> | <span data-ttu-id="389a0-252">Examinez les messages d’erreur produits quand une page s’exécute et corrigez les erreurs qui résultent d’un balisage non valide.</span><span class="sxs-lookup"><span data-stu-id="389a0-252">Examine error messages that are produced when a page runs and fix errors that result from invalid markup.</span></span> |
| <span data-ttu-id="389a0-253">**Types Passport**</span><span class="sxs-lookup"><span data-stu-id="389a0-253">**Passport types**</span></span> | <span data-ttu-id="389a0-254">La prise en charge de Passport intégrée à ASP.NET 2.0 est obsolète et n’est plus gérée en raison des changements effectués dans Passport (à présent SDK Live ID).</span><span class="sxs-lookup"><span data-stu-id="389a0-254">The Passport support built into ASP.NET 2.0 is obsolete and is unsupported due to changes in Passport (now Live ID SDK).</span></span> <span data-ttu-id="389a0-255">Les types liés à Passport dans <xref:System.Web.Security> sont donc désormais marqués avec l’attribut `ObsoleteAttribute`.</span><span class="sxs-lookup"><span data-stu-id="389a0-255">As a result, the types related to Passport in <xref:System.Web.Security> are now marked with the `ObsoleteAttribute` attribute.</span></span> | <span data-ttu-id="389a0-256">Changez votre code pour qu’il utilise le [SDK](https://go.microsoft.com/fwlink/?LinkId=106346) au lieu des types Passport dans l’espace de noms <xref:System.Web.Security> (par exemple, <xref:System.Web.Security.PassportIdentity>).</span><span class="sxs-lookup"><span data-stu-id="389a0-256">Change any code you have that uses Passport types in the <xref:System.Web.Security> namespace (for example, <xref:System.Web.Security.PassportIdentity>) to use the [SDK](https://go.microsoft.com/fwlink/?LinkId=106346).</span></span> |
| <span data-ttu-id="389a0-257">**Informations PathInfo dans la propriété FilePath**</span><span class="sxs-lookup"><span data-stu-id="389a0-257">**PathInfo information in the FilePath property**</span></span> | <span data-ttu-id="389a0-258">ASP.NET 4 n’inclut plus la valeur `PathInfo` dans les valeurs de retour des propriétés comme <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath> et <xref:System.Web.HttpRequest.CurrentExecutionFilePath>.</span><span class="sxs-lookup"><span data-stu-id="389a0-258">ASP.NET 4 no longer includes the `PathInfo` value in the return values from properties such as <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath>, and <xref:System.Web.HttpRequest.CurrentExecutionFilePath>.</span></span> <span data-ttu-id="389a0-259">À la place, les informations `PathInfo` sont disponibles dans <xref:System.Web.HttpRequest.PathInfo>.</span><span class="sxs-lookup"><span data-stu-id="389a0-259">Instead, the `PathInfo` information is available in <xref:System.Web.HttpRequest.PathInfo>.</span></span> <span data-ttu-id="389a0-260">Par exemple, imaginez le fragment d’URL suivant :</span><span class="sxs-lookup"><span data-stu-id="389a0-260">For example, imagine the following URL fragment:</span></span><br><br>`/testapp/Action.mvc/SomeAction`<br><br><span data-ttu-id="389a0-261">Dans les versions antérieures d’ASP.NET, les propriétés <xref:System.Web.HttpRequest> ont les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-261">In earlier versions of ASP.NET, <xref:System.Web.HttpRequest> properties have the following values:</span></span><br><br><span data-ttu-id="389a0-262">\* <xref:System.Web.HttpRequest.FilePath> : `/testapp/Action.mvc/SomeAction`</span><span class="sxs-lookup"><span data-stu-id="389a0-262">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc/SomeAction`</span></span><br><span data-ttu-id="389a0-263">\* <xref:System.Web.HttpRequest.PathInfo> : (vide)</span><span class="sxs-lookup"><span data-stu-id="389a0-263">\* <xref:System.Web.HttpRequest.PathInfo>: (empty)</span></span><br><br><span data-ttu-id="389a0-264">Dans ASP.NET 4, les propriétés <xref:System.Web.HttpRequest> ont plutôt les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-264">In ASP.NET 4, <xref:System.Web.HttpRequest> properties instead have the following values:</span></span><br><br><span data-ttu-id="389a0-265">\* <xref:System.Web.HttpRequest.FilePath> : `/testapp/Action.mvc`</span><span class="sxs-lookup"><span data-stu-id="389a0-265">\* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc`</span></span><br><span data-ttu-id="389a0-266">\* <xref:System.Web.HttpRequest.PathInfo> : `SomeAction`</span><span class="sxs-lookup"><span data-stu-id="389a0-266">\* <xref:System.Web.HttpRequest.PathInfo>: `SomeAction`</span></span> | <span data-ttu-id="389a0-267">Dans votre code, recherchez les cas où vous utilisez les propriétés de la classe <xref:System.Web.HttpRequest> pour retourner des informations sur les chemins ; changez le code pour qu’il soit conforme aux changements concernant le retour des informations sur les chemins.</span><span class="sxs-lookup"><span data-stu-id="389a0-267">Examine your code for places where you rely on properties of the <xref:System.Web.HttpRequest> class to return path information; change the code to reflect the changes in how path information is returned.</span></span> |
| <span data-ttu-id="389a0-268">**Validation de la demande**</span><span class="sxs-lookup"><span data-stu-id="389a0-268">**Request validation**</span></span> | <span data-ttu-id="389a0-269">Pour améliorer la validation de la demande, la validation de la demande ASP.NET est appelée plus tôt dans le cycle de vie des demandes.</span><span class="sxs-lookup"><span data-stu-id="389a0-269">To improve request validation, the ASP.NET request validation is invoked earlier in the request life cycle.</span></span> <span data-ttu-id="389a0-270">La validation de la demande s’exécute donc pour les demandes qui ne concernent pas les fichiers .aspx (par exemple, pour les appels de service web et les gestionnaires personnalisés).</span><span class="sxs-lookup"><span data-stu-id="389a0-270">As a result, request validation runs for requests that are not for .aspx files, such as for Web service calls and for custom handlers.</span></span> <span data-ttu-id="389a0-271">Elle est également active quand des modules HTTP personnalisés sont exécutés dans le pipeline de traitement des demandes.</span><span class="sxs-lookup"><span data-stu-id="389a0-271">Request validation will also be active when custom HTTP modules are running in the request processing pipeline.</span></span><br><br><span data-ttu-id="389a0-272">En raison de ce changement, les demandes de ressources qui ne concernent pas les fichiers .aspx peuvent générer des erreurs de validation de la demande.</span><span class="sxs-lookup"><span data-stu-id="389a0-272">As a result of this change, requests for resources other than .aspx files might throw request validation errors.</span></span> <span data-ttu-id="389a0-273">Le code personnalisé qui s’exécute dans le pipeline de demande (par exemple, des modules HTTP personnalisés) peut également générer des erreurs similaires.</span><span class="sxs-lookup"><span data-stu-id="389a0-273">Custom code that runs in the request pipeline (for example, custom HTTP modules) might also throw request validation errors.</span></span> | <span data-ttu-id="389a0-274">Si nécessaire, vous pouvez revenir à l’ancien comportement qui consiste à déclencher une validation des demandes uniquement pour les pages .aspx. Pour ce faire, utilisez le paramètre suivant dans le fichier de configuration web :</span><span class="sxs-lookup"><span data-stu-id="389a0-274">If necessary, you can revert to the old behavior of having only .aspx pages triggering request validation by using the following setting in the Web configuration file:</span></span><br><br>`<httpRuntime requestValidationMode="2.0" />`<br><br><span data-ttu-id="389a0-275">Avertissement : Si vous rétablissez l’ancien comportement, vérifiez que tout le code dans les gestionnaires existants, modules et les autres codes personnalisés effectuent des vérifications visant à détecter les entrées HTTP potentiellement dangereuses susceptibles d’être des vecteurs d’attaques XSS.</span><span class="sxs-lookup"><span data-stu-id="389a0-275">Warning: If you revert to the old behavior, make sure that all code in existing handlers, modules, and other custom code performs checks for potentially unsafe HTTP inputs that could be XSS attack vectors.\`</span></span> |
| <span data-ttu-id="389a0-276">**Routage**</span><span class="sxs-lookup"><span data-stu-id="389a0-276">**Routing**</span></span> | <span data-ttu-id="389a0-277">Si vous créez un site web de système de fichiers dans Visual Studio 2010 et que le site web est situé dans un dossier dont le nom comporte un point (.), les routages d’URL ne fonctionnent pas de manière fiable.</span><span class="sxs-lookup"><span data-stu-id="389a0-277">If you create a file system Web site in Visual Studio 2010 and the Web site is in a folder that contains a dot (.) in the folder name, URL routing will not work reliably.</span></span> <span data-ttu-id="389a0-278">Une erreur HTTP 404 est retournée à partir de certains chemins virtuels.</span><span class="sxs-lookup"><span data-stu-id="389a0-278">An HTTP 404 error is returned from some virtual paths.</span></span> <span data-ttu-id="389a0-279">Cela se produit parce que Visual Studio 2010 lance le serveur Visual Studio Development à l’aide d’un chemin incorrect pour le répertoire virtuel racine.</span><span class="sxs-lookup"><span data-stu-id="389a0-279">This occurs because Visual Studio 2010 launches the Visual Studio Development Server using an incorrect path for the root virtual directory.</span></span> | <span data-ttu-id="389a0-280">\* Dans la page **Propriétés** pour le site web basé sur des fichiers, remplacez l’attribut **Chemin virtuel** par « / ».</span><span class="sxs-lookup"><span data-stu-id="389a0-280">\* In the **Properties** page for the file-based Web site, change the **Virtual Path** attribute to "/".</span></span><br><br><span data-ttu-id="389a0-281">- ou -</span><span class="sxs-lookup"><span data-stu-id="389a0-281">-or-</span></span><br><br><span data-ttu-id="389a0-282">\* Créez un projet d’application web et non de site web.</span><span class="sxs-lookup"><span data-stu-id="389a0-282">\* Create a Web application project instead of a Web site project.</span></span> <span data-ttu-id="389a0-283">Les projets d’application web n’ont pas ce problème, et le routage d’URL fonctionne même si le nom du dossier du projet contient un point.</span><span class="sxs-lookup"><span data-stu-id="389a0-283">Web application projects do not have this issue, and URL routing works even if the project folder has a dot in its name.</span></span><br><br><span data-ttu-id="389a0-284">- ou -</span><span class="sxs-lookup"><span data-stu-id="389a0-284">-or-</span></span><br><br><span data-ttu-id="389a0-285">\* Créez un site web basé sur HTTP hébergé dans IIS.</span><span class="sxs-lookup"><span data-stu-id="389a0-285">\* Create an HTTP-based Web site that is hosted in IIS.</span></span> <span data-ttu-id="389a0-286">Le chemin virtuel et le dossier de fichier de projet des sites web hébergés par IIS peuvent contenir un point.</span><span class="sxs-lookup"><span data-stu-id="389a0-286">IIS-hosted Web sites can have dots in the virtual path as well as in the project file folder.</span></span> |
| <span data-ttu-id="389a0-287">**Sites SharePoint**</span><span class="sxs-lookup"><span data-stu-id="389a0-287">**SharePoint sites**</span></span> | <span data-ttu-id="389a0-288">Si vous essayez d’exécuter un site web ASP.NET 4 déployé comme un enfant d’un site web SharePoint qui contient un niveau de confiance partielle personnalisé nommé `WSS_Minimal`, vous obtenez l’erreur suivante :</span><span class="sxs-lookup"><span data-stu-id="389a0-288">If you try to run an ASP.NET 4 Web site that is deployed as a child of a SharePoint Web site that contains a custom partial-trust level named `WSS_Minimal`, you will see the following error:</span></span><br><br>`Could not find permission set named 'ASP.Net'.` | <span data-ttu-id="389a0-289">À l’heure actuelle, aucune version de SharePoint n’est compatible avec ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="389a0-289">Currently, no versions of SharePoint are compatible with ASP.NET.</span></span> <span data-ttu-id="389a0-290">Vous ne devez donc pas essayer d’exécuter un site web ASP.NET 4 comme enfant d’un site web SharePoint.</span><span class="sxs-lookup"><span data-stu-id="389a0-290">As a result, you should not attempt to run an ASP.NET 4 Web site as a child of a SharePoint Web site.</span></span> |
| <span data-ttu-id="389a0-291">**Normes XHTML 1.1**</span><span class="sxs-lookup"><span data-stu-id="389a0-291">**XHTML 1.1 standards**</span></span> | <span data-ttu-id="389a0-292">Pour que les nouveaux sites web soient conformes à XHTML 1.1, les contrôles ASP.NET dans le .NET Framework 4 génèrent un code HTML conforme à XHTML 1.1.</span><span class="sxs-lookup"><span data-stu-id="389a0-292">To enable XHTML 1.1 compliance for new Web sites, the ASP.NET controls in the .NET Framework 4 will generate XHTML 1.1 compliant HTML.</span></span> <span data-ttu-id="389a0-293">Ce rendu est activé à l’aide de l’option suivante dans le fichier Web.config dans l’élément `<system.Web>` :</span><span class="sxs-lookup"><span data-stu-id="389a0-293">This rendering is enabled using the following option in the Web.config file inside the `<system.Web>` element:</span></span><br><br>`<pages controlRenderingCompatibilityVersion="4.0"/>`<br><br><span data-ttu-id="389a0-294">Cette option a la valeur 4.0 par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-294">This option is set by default to 4.0.</span></span> <span data-ttu-id="389a0-295">À des fins de compatibilité, le paramètre 3.5 sera activé pour les projets web mis à niveau à partir de Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="389a0-295">Web projects that are upgraded from Visual Studio 2008 have the 3.5 setting enabled for compatibility.</span></span> | <span data-ttu-id="389a0-296">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-296">None.</span></span> |

## <a name="core"></a><span data-ttu-id="389a0-297">Principal</span><span class="sxs-lookup"><span data-stu-id="389a0-297">Core</span></span>

### <a name="general-features"></a><span data-ttu-id="389a0-298">Fonctionnalités générales</span><span class="sxs-lookup"><span data-stu-id="389a0-298">General features</span></span>

| <span data-ttu-id="389a0-299">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-299">Feature</span></span> | <span data-ttu-id="389a0-300">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-300">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-301">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-301">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-302">**CardSpace**</span><span class="sxs-lookup"><span data-stu-id="389a0-302">**CardSpace**</span></span> | <span data-ttu-id="389a0-303">Windows CardSpace n’est plus inclus dans le .NET Framework ; il est fourni séparément.</span><span class="sxs-lookup"><span data-stu-id="389a0-303">Windows CardSpace is no longer included in the .NET Framework; it is provided separately.</span></span> | <span data-ttu-id="389a0-304">Téléchargez Windows CardSpace à partir du [Centre de téléchargement Microsoft](https://go.microsoft.com/fwlink/?LinkId=199868).</span><span class="sxs-lookup"><span data-stu-id="389a0-304">Download Windows CardSpace from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?LinkId=199868).</span></span> |
| <span data-ttu-id="389a0-305">**Fichiers de configuration**</span><span class="sxs-lookup"><span data-stu-id="389a0-305">**Configuration files**</span></span> | <span data-ttu-id="389a0-306">Des corrections ont été apportées à la façon dont le .NET Framework accède aux fichiers de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="389a0-306">Corrections have been made in how the .NET Framework accesses application configuration files.</span></span> | <span data-ttu-id="389a0-307">Si votre fichier de configuration d’application se nomme *application-name.config*, renommez-le *application-name.exe.config*. Par exemple, si votre fichier se nomme *MyApp.config*, renommez-le *MyApp.exe.config*.</span><span class="sxs-lookup"><span data-stu-id="389a0-307">If your application configuration file is named *application-name.config*, rename it to *application-name.exe.config*. For example, rename *MyApp.config* to *MyApp.exe.config*.</span></span> |
| <span data-ttu-id="389a0-308">**Compilateur de code C#**</span><span class="sxs-lookup"><span data-stu-id="389a0-308">**C# code compiler**</span></span> | <span data-ttu-id="389a0-309">Les classes `Compiler`, `CompilerError` et `ErrorLevel` qui étaient dans l’espace de noms <xref:Microsoft.CSharp> ne sont plus disponibles et leur assembly (cscompmgd.dll) n’est plus inclus dans le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="389a0-309">The `Compiler`, `CompilerError`, and `ErrorLevel` classes that were in the <xref:Microsoft.CSharp> namespace are no longer available, and their assembly (cscompmgd.dll) is no longer included in the .NET Framework.</span></span> | <span data-ttu-id="389a0-310">Utilisez la classe <xref:System.CodeDom.Compiler.CodeDomProvider> et d’autres classes dans l’espace de noms <xref:System.CodeDom.Compiler>.</span><span class="sxs-lookup"><span data-stu-id="389a0-310">Use the <xref:System.CodeDom.Compiler.CodeDomProvider> class and other classes in the <xref:System.CodeDom.Compiler> namespace.</span></span> <span data-ttu-id="389a0-311">Pour plus d’informations, consultez [Utilisation du CodeDOM](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/y2k85ax6%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-311">For more information, see [Using the CodeDOM](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/y2k85ax6%28v=vs.100%29).</span></span> |
| <span data-ttu-id="389a0-312">**Hébergement** (API non managée)</span><span class="sxs-lookup"><span data-stu-id="389a0-312">**Hosting** (unmanaged API)</span></span> | <span data-ttu-id="389a0-313">Pour améliorer les fonctions d’hébergement, certaines API d’activation d’hébergement ont été dépréciées.</span><span class="sxs-lookup"><span data-stu-id="389a0-313">To improve hosting capabilities, some of the hosting activation APIs have been deprecated.</span></span> <span data-ttu-id="389a0-314">Des fonctionnalités d’exécution côte à côte in-process permettent à une application de charger et de démarrer plusieurs versions du .NET Framework dans le même processus.</span><span class="sxs-lookup"><span data-stu-id="389a0-314">In-process side-by-side execution features enable an application to load and start multiple versions of the .NET Framework in the same process.</span></span> <span data-ttu-id="389a0-315">Par exemple, vous pouvez exécuter des applications qui chargent des compléments (ou des composants) basés sur le .NET Framework 2.0 SP1 et des compléments basés sur le .NET Framework 4 dans le même processus.</span><span class="sxs-lookup"><span data-stu-id="389a0-315">For example, you can run applications that load add-ins (or components) that are based on the .NET Framework 2.0 SP1 and add-ins that are based on the .NET Framework 4 in the same process.</span></span> <span data-ttu-id="389a0-316">Les composants plus anciens continuent à utiliser la version du .NET Framework plus ancienne, et les nouveaux composants utilisent la nouvelle version de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="389a0-316">Older components continue to use the older .NET Framework version, and new components use the new .NET Framework version.</span></span> | <span data-ttu-id="389a0-317">Utilisez les configurations décrites dans [Exécution côte à côte in-process](../../../docs/framework/deployment/in-process-side-by-side-execution.md).</span><span class="sxs-lookup"><span data-stu-id="389a0-317">Use the configurations described in [In-Process Side-by-Side Execution](../../../docs/framework/deployment/in-process-side-by-side-execution.md).</span></span> |
| <span data-ttu-id="389a0-318">**Nouveau modèle de sécurité**</span><span class="sxs-lookup"><span data-stu-id="389a0-318">**New security model**</span></span> | <span data-ttu-id="389a0-319">La stratégie de sécurité d’accès du code (CAS) a été désactivée et remplacée par un modèle simplifié, comme décrit dans [Modifications de sécurité dans le .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd233103%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-319">The code access security (CAS) policy has been turned off and replaced with a simplified model, as described in [Security Changes in the .NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd233103%28v=vs.100%29).</span></span> | <span data-ttu-id="389a0-320">Des modifications peuvent être nécessaires si vos applications dépendent de la sécurité d’accès du code.</span><span class="sxs-lookup"><span data-stu-id="389a0-320">Modifications may be required if you depend on CAS in your applications.</span></span> <span data-ttu-id="389a0-321">Pour plus d’informations, consultez [Compatibilité de la stratégie de sécurité d’accès du code et migration](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md).</span><span class="sxs-lookup"><span data-stu-id="389a0-321">For more information, see [Code Access Security Policy Compatibility and Migration](../../../docs/framework/misc/code-access-security-policy-compatibility-and-migration.md).</span></span> |

### <a name="date-and-time"></a><span data-ttu-id="389a0-322">Date et heure</span><span class="sxs-lookup"><span data-stu-id="389a0-322">Date and time</span></span>

<span data-ttu-id="389a0-323">Espace de noms : <xref:System> ; assembly : mscorlib (dans mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-323">Namespace: <xref:System>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="389a0-324">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-324">Feature</span></span> | <span data-ttu-id="389a0-325">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-325">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-326">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-326">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-327">**Heure d’été**</span><span class="sxs-lookup"><span data-stu-id="389a0-327">**Daylight savings**</span></span> | <span data-ttu-id="389a0-328">Pour garantir une cohérence avec l’horloge système, les propriétés d’heure (telles que <xref:System.TimeZoneInfo.Local> et <xref:System.DateTime.Now>) utilisent maintenant les règles du système d’exploitation au lieu des autres données .NET Framework pour le passage aux heures d’été et d’hiver.</span><span class="sxs-lookup"><span data-stu-id="389a0-328">To be consistent with the system clock, time properties (such as <xref:System.TimeZoneInfo.Local> and <xref:System.DateTime.Now>) now use operating system rules instead of other .NET Framework data for daylight saving time operations.</span></span> | <span data-ttu-id="389a0-329">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-329">None.</span></span> |
| <span data-ttu-id="389a0-330">**Chaînes de mise en forme**</span><span class="sxs-lookup"><span data-stu-id="389a0-330">**Formatting strings**</span></span> | <span data-ttu-id="389a0-331">Pour prendre en charge la mise en forme dépendante de la culture, la structure <xref:System.TimeSpan> inclut de nouvelles surcharges des méthodes `ToString`, `Parse` et `TryParse`, en plus des nouvelles méthodes `ParseExact` et `TryParseExact`.</span><span class="sxs-lookup"><span data-stu-id="389a0-331">To support culture-sensitive formatting, the <xref:System.TimeSpan> structure includes new overloads of the `ToString`, `Parse`, and `TryParse` methods in addition to new `ParseExact` and `TryParseExact` methods.</span></span> | <span data-ttu-id="389a0-332">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-332">None.</span></span> |


### <a name="globalization"></a><span data-ttu-id="389a0-333">Globalisation</span><span class="sxs-lookup"><span data-stu-id="389a0-333">Globalization</span></span>

<span data-ttu-id="389a0-334">Pour une liste des nouvelles cultures neutres et spécifiques, consultez [Nouveautés en matière de globalisation et de localisation](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd997383%28v=vs.100%29).</span><span class="sxs-lookup"><span data-stu-id="389a0-334">For a list of new neutral and specific cultures, see [What's New in Globalization and Localization](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd997383%28v=vs.100%29).</span></span>

<span data-ttu-id="389a0-335">Espace de noms : <xref:System.Globalization> ; assembly : mscorlib (dans mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-335">Namespace: <xref:System.Globalization>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="389a0-336">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-336">Feature</span></span> | <span data-ttu-id="389a0-337">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-337">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-338">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-338">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-339">**Noms de cultures**</span><span class="sxs-lookup"><span data-stu-id="389a0-339">**Culture names**</span></span> | <span data-ttu-id="389a0-340">Les changements de noms suivants affectent les cultures allemande, maldivienne et africaine :</span><span class="sxs-lookup"><span data-stu-id="389a0-340">The following name changes affect the German, Divehi, and African cultures:</span></span><br><br><span data-ttu-id="389a0-341">\* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName> : Le nom de la devise pour la culture Allemand (Suisse) (de-CH) est passé de « sFr. »</span><span class="sxs-lookup"><span data-stu-id="389a0-341">\* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName>: The currency name for the German (Switizerland) (de-CH) culture has changed from "sFr."</span></span> <span data-ttu-id="389a0-342">à « Fr. ».</span><span class="sxs-lookup"><span data-stu-id="389a0-342">to "Fr.".</span></span><br><span data-ttu-id="389a0-343">\* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern> : Le modèle de date longue pour la culture Maldivien (Maldives) (dv-MV) est passé de « jj/MMMM/aaaa » à « jj/MM/aaaa ».</span><span class="sxs-lookup"><span data-stu-id="389a0-343">\* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern>: The long date pattern for the Divehi (Maldives) (dv-MV) culture has changed from "dd/MMMM/yyyy" to "dd/MM/yyyy".</span></span><br><span data-ttu-id="389a0-344">\* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator> : L’indicateur PM (après-midi)</span><span class="sxs-lookup"><span data-stu-id="389a0-344">\* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator>: The P.M.</span></span> <span data-ttu-id="389a0-345">de la culture Afrikaans (Afrique du Sud) (af-ZA) est passé de « nm » à « PM ».</span><span class="sxs-lookup"><span data-stu-id="389a0-345">designator of the Afrikaans (South Africa) (af-ZA) culture has changed from "nm" to "PM".</span></span> | <span data-ttu-id="389a0-346">Notez les changements dans les noms de cultures.</span><span class="sxs-lookup"><span data-stu-id="389a0-346">Note culture name changes.</span></span> |
| <span data-ttu-id="389a0-347">**Paramètre LCID**</span><span class="sxs-lookup"><span data-stu-id="389a0-347">**LCID parameter**</span></span> | <span data-ttu-id="389a0-348">Pour garantir une cohérence avec le comportement attendu dans les paramètres de serveur Automation, le CLR ne passe plus la culture actuelle pour le paramètre `LCID` aux applications COM non managées.</span><span class="sxs-lookup"><span data-stu-id="389a0-348">To be consistent with expected behavior in automation server settings, the CLR no longer passes the current culture for the `LCID` parameter to unmanaged COM-based applications.</span></span> <span data-ttu-id="389a0-349">À la place, il passe 1033 (en-us) pour la culture.</span><span class="sxs-lookup"><span data-stu-id="389a0-349">Instead, it passes 1033 (en-us) for the culture.</span></span> | <span data-ttu-id="389a0-350">Aucune modification n’est nécessaire, sauf pour les applications natives qui nécessitent une culture spécifiée.</span><span class="sxs-lookup"><span data-stu-id="389a0-350">No modifications necessary except for native applications that require a specified culture.</span></span> |
| <span data-ttu-id="389a0-351">**Types de cultures obsolètes**</span><span class="sxs-lookup"><span data-stu-id="389a0-351">**Obsolete culture types**</span></span> | <span data-ttu-id="389a0-352">Les types de cultures <xref:System.Globalization.CultureTypes> et <xref:System.Globalization.CultureTypes> sont désormais obsolètes.</span><span class="sxs-lookup"><span data-stu-id="389a0-352">The <xref:System.Globalization.CultureTypes> and <xref:System.Globalization.CultureTypes> culture types are now obsolete.</span></span><br><br><span data-ttu-id="389a0-353">Pour des raisons de compatibilité descendante, <xref:System.Globalization.CultureTypes> retourne maintenant les cultures neutres et spécifiques qui étaient incluses dans le .NET Framework précédent, et <xref:System.Globalization.CultureTypes> retourne désormais une liste vide.</span><span class="sxs-lookup"><span data-stu-id="389a0-353">For backward compatibility, <xref:System.Globalization.CultureTypes> now returns neutral and specific cultures that were included with the previous .NET Framework, and <xref:System.Globalization.CultureTypes> now returns an empty list.</span></span> | <span data-ttu-id="389a0-354">Utilisez d’autres valeurs de l’énumération <xref:System.Globalization.CultureTypes>.</span><span class="sxs-lookup"><span data-stu-id="389a0-354">Use other values of the <xref:System.Globalization.CultureTypes> enumeration.</span></span> |
| <span data-ttu-id="389a0-355">**Récupération de la culture**</span><span class="sxs-lookup"><span data-stu-id="389a0-355">**Retrieving culture**</span></span> | <span data-ttu-id="389a0-356">À compter de Windows 7, le .NET Framework 4 récupère les informations de culture à partir du système d’exploitation au lieu de stocker les données lui-même.</span><span class="sxs-lookup"><span data-stu-id="389a0-356">Beginning with Windows 7, the .NET Framework 4 retrieves culture information from the operating system instead of storing the data itself.</span></span> <span data-ttu-id="389a0-357">De plus, le .NET Framework se synchronise avec Windows pour le tri et la casse des données.</span><span class="sxs-lookup"><span data-stu-id="389a0-357">In addition, the .NET Framework synchronizes with Windows for sorting and casing data.</span></span> | <span data-ttu-id="389a0-358">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-358">None.</span></span> |
| <span data-ttu-id="389a0-359">**Normes Unicode 5.1**</span><span class="sxs-lookup"><span data-stu-id="389a0-359">**Unicode 5.1 standards**</span></span> | <span data-ttu-id="389a0-360">Le .NET Framework prend désormais en charge tous les caractères Unicode 5.1 (et environ 1 400 caractères supplémentaires).</span><span class="sxs-lookup"><span data-stu-id="389a0-360">The .NET Framework now supports all Unicode 5.1 characters -- an addition of approximately 1400 characters.</span></span> <span data-ttu-id="389a0-361">Ces nouveaux caractères incluent des symboles, des flèches, des signes diacritiques, des signes de ponctuation, des symboles mathématiques, des idéogrammes et des traits CJC, des chiffres supplémentaires pour le Malayâlam et le Télougou et différents caractères birmans, latins, arabes, grecs, mongols et cyrilliques.</span><span class="sxs-lookup"><span data-stu-id="389a0-361">The additional characters include new symbols, arrows, diacritics, punctuation, mathematical symbols, CJK strokes and ideographs, additional Malayalam and Telugu numeric characters, and various Myanmar, Latin, Arabic, Greek, Mongolian, and Cyrillic characters.</span></span> <span data-ttu-id="389a0-362">Les nouveaux scripts suivants sont pris en charge avec Unicode 5.1 : sundanais, lepcha, ol tchiki, vaï, saurachtra, kayah li, redjang, gurmukhi, odia, tamoul, télougou, malayalam et cham.</span><span class="sxs-lookup"><span data-stu-id="389a0-362">The following new scripts are supported with Unicode 5.1: Sundanese, Lepcha, Ol Chiki, Vai, Saurashtra, Kayah Li, Rejang, Gurmukhi, Odia, Tamil, Telugu, and Malayalam characters and Cham.</span></span> | <span data-ttu-id="389a0-363">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-363">None.</span></span> |

### <a name="exceptions"></a><span data-ttu-id="389a0-364">Exceptions</span><span class="sxs-lookup"><span data-stu-id="389a0-364">Exceptions</span></span>

<span data-ttu-id="389a0-365">Espace de noms : <xref:System>, <xref:System.Runtime.ExceptionServices> ; assembly : mscorlib (dans mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-365">Namespaces: <xref:System>, <xref:System.Runtime.ExceptionServices>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="389a0-366">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-366">Feature</span></span> | <span data-ttu-id="389a0-367">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-367">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-368">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-368">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-369">**Exceptions pour un état de processus endommagé**</span><span class="sxs-lookup"><span data-stu-id="389a0-369">**Exceptions for corrupted process state**</span></span> | <span data-ttu-id="389a0-370">Le CLR n’envoie plus d’exception pour un état de processus endommagé aux gestionnaires d’exceptions en code managé.</span><span class="sxs-lookup"><span data-stu-id="389a0-370">The CLR no longer delivers exceptions for corrupted process state to exception handlers in managed code.</span></span> | <span data-ttu-id="389a0-371">Ces exceptions indiquent que l’état d’un processus a été endommagé.</span><span class="sxs-lookup"><span data-stu-id="389a0-371">These exceptions indicate that the state of a process has been corrupted.</span></span> <span data-ttu-id="389a0-372">Nous vous déconseillons d’exécuter votre application dans cet état.</span><span class="sxs-lookup"><span data-stu-id="389a0-372">We do not recommend that you run your application in this state.</span></span><br><br><span data-ttu-id="389a0-373">Pour plus d’informations, consultez <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> et l’entrée [Gestion des exceptions d’état endommagé](https://go.microsoft.com/fwlink/?LinkID=179681) dans le blog Les coulisses du CLR.</span><span class="sxs-lookup"><span data-stu-id="389a0-373">For more information, see the <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> and the entry [Handling Corrupted State Exceptions](https://go.microsoft.com/fwlink/?LinkID=179681) in the CLR Inside Out blog.</span></span> |
| <span data-ttu-id="389a0-374">**Exceptions du moteur d’exécution**</span><span class="sxs-lookup"><span data-stu-id="389a0-374">**Execution engine exceptions**</span></span> | <span data-ttu-id="389a0-375"><xref:System.ExecutionEngineException> est désormais obsolète, car une exception saisissable permettra à un processus instable de continuer à fonctionner.</span><span class="sxs-lookup"><span data-stu-id="389a0-375"><xref:System.ExecutionEngineException> is now obsolete, because a catchable exception will allow an unstable process to continue to run.</span></span> <span data-ttu-id="389a0-376">Ce changement améliore la prévisibilité et la fiabilité dans le runtime.</span><span class="sxs-lookup"><span data-stu-id="389a0-376">This change improves predictability and reliability in the runtime.</span></span> | <span data-ttu-id="389a0-377">Utilisez un <xref:System.InvalidOperationException> pour signaler la condition.</span><span class="sxs-lookup"><span data-stu-id="389a0-377">Use an <xref:System.InvalidOperationException> to signal the condition.</span></span> |

### <a name="reflection"></a><span data-ttu-id="389a0-378">Réflexion</span><span class="sxs-lookup"><span data-stu-id="389a0-378">Reflection</span></span>

<span data-ttu-id="389a0-379">Espace de noms : <xref:System.Reflection> ; assembly : mscorlib (dans mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-379">Namespace: <xref:System.Reflection>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="389a0-380">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-380">Feature</span></span> | <span data-ttu-id="389a0-381">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-381">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-382">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-382">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-383">**Algorithmes de hachage d’assembly**</span><span class="sxs-lookup"><span data-stu-id="389a0-383">**Assembly hash algorithms**</span></span> | <span data-ttu-id="389a0-384">La propriété <xref:System.Reflection.AssemblyName.HashAlgorithm> retourne désormais <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, car le runtime ne reconnaît pas l’algorithme de hachage de l’assembly référencé quand l’assembly n’est pas chargé.</span><span class="sxs-lookup"><span data-stu-id="389a0-384">The <xref:System.Reflection.AssemblyName.HashAlgorithm> property now returns <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, because the runtime does not know the hash algorithm of the referenced assembly when the assembly is not loaded.</span></span> <span data-ttu-id="389a0-385">(Cela fait référence à l’utilisation de la propriété sur un assembly référencé tel que celui retourné par la méthode <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A>.)</span><span class="sxs-lookup"><span data-stu-id="389a0-385">(This refers to using the property on a referenced assembly such as that returned by the <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A> method.)</span></span> | <span data-ttu-id="389a0-386">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-386">None.</span></span> |
| <span data-ttu-id="389a0-387">**Chargement des assemblys**</span><span class="sxs-lookup"><span data-stu-id="389a0-387">**Assembly loading**</span></span> | <span data-ttu-id="389a0-388">Pour empêcher le chargement redondant des assemblys et enregistrer l’espace d’adressage virtuel, le CLR charge désormais les assemblys à l’aide de la fonction Win32 `MapViewOfFile` uniquement.</span><span class="sxs-lookup"><span data-stu-id="389a0-388">To prevent redundant loading of assemblies and to save virtual address space, the CLR now loads assemblies by using only the Win32 `MapViewOfFile` function.</span></span> <span data-ttu-id="389a0-389">De même, il n’appelle plus la fonction `LoadLibrary`.</span><span class="sxs-lookup"><span data-stu-id="389a0-389">It no longer also calls the `LoadLibrary` function.</span></span><br><br><span data-ttu-id="389a0-390">Ce changement affecte les applications de diagnostic des façons suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-390">This change affects diagnostic applications in the following ways:</span></span><br><br><span data-ttu-id="389a0-391">\* Un <xref:System.Diagnostics.ProcessModuleCollection> ne contient plus les modules d’une bibliothèque de classes (fichier .dll), obtenus grâce à un appel à `Process.GetCurrentProcess().Modules`.</span><span class="sxs-lookup"><span data-stu-id="389a0-391">\* A <xref:System.Diagnostics.ProcessModuleCollection> will no longer contain any modules from a class library (.dll file), as obtained from a call to `Process.GetCurrentProcess().Modules`.</span></span><br><span data-ttu-id="389a0-392">\* Les applications Win32 qui utilisent la fonction `EnumProcessModules` ne voient pas tous les modules managés répertoriés.</span><span class="sxs-lookup"><span data-stu-id="389a0-392">\* Win32 applications that use the `EnumProcessModules` function will not see all managed modules listed.</span></span> | <span data-ttu-id="389a0-393">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-393">None.</span></span> |
| <span data-ttu-id="389a0-394">**Type déclarant**</span><span class="sxs-lookup"><span data-stu-id="389a0-394">**Declaring type**</span></span> | <span data-ttu-id="389a0-395">La propriété <xref:System.Type.DeclaringType> retourne désormais la valeur Null correctement quand le type n’a pas de type déclarant.</span><span class="sxs-lookup"><span data-stu-id="389a0-395">The <xref:System.Type.DeclaringType> property now correctly returns null when the type does not have a declaring type.</span></span> | <span data-ttu-id="389a0-396">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-396">None.</span></span> |
| <span data-ttu-id="389a0-397">**Délégués**</span><span class="sxs-lookup"><span data-stu-id="389a0-397">**Delegates**</span></span> | <span data-ttu-id="389a0-398">Un délégué lève maintenant un <xref:System.ArgumentNullException> au lieu d’un <xref:System.NullReferenceException> quand une valeur Null est passée au constructeur du délégué.</span><span class="sxs-lookup"><span data-stu-id="389a0-398">A delegate now throws an <xref:System.ArgumentNullException> instead of a <xref:System.NullReferenceException> when a null value is passed to the delegate's constructor.</span></span> | <span data-ttu-id="389a0-399">Vérifiez que toutes les gestions d’exceptions interceptent <xref:System.ArgumentNullException>.</span><span class="sxs-lookup"><span data-stu-id="389a0-399">Ensure that any exception handling catches <xref:System.ArgumentNullException>.</span></span> |
| <span data-ttu-id="389a0-400">**Changement de l’emplacement du Global Assembly Cache**</span><span class="sxs-lookup"><span data-stu-id="389a0-400">**Global assembly cache location change**</span></span> | <span data-ttu-id="389a0-401">Pour les assemblys .NET Framework 4, le Global Assembly Cache a été déplacé du répertoire Windows (%WINDIR%) dans le sous-répertoire Microsoft.Net (*%WINDIR%\\Microsoft.Net*).</span><span class="sxs-lookup"><span data-stu-id="389a0-401">For .NET Framework 4 assemblies, the global assembly cache has been moved from the Windows directory (%WINDIR%) to the Microsoft.Net subdirectory (*%WINDIR%\\Microsoft.Net*).</span></span> <span data-ttu-id="389a0-402">Les assemblys des versions antérieures restent dans l’ancien répertoire.</span><span class="sxs-lookup"><span data-stu-id="389a0-402">Assemblies from earlier versions remain in the older directory.</span></span><br><br><span data-ttu-id="389a0-403">L’énumération [ASM_CACHE_FLAGS](../unmanaged-api/fusion/asm-cache-flags-enumeration.md) non managée contient le nouvel indicateur `ASM_CACHE_ROOT_EX`.</span><span class="sxs-lookup"><span data-stu-id="389a0-403">The unmanaged [ASM_CACHE_FLAGS](../unmanaged-api/fusion/asm-cache-flags-enumeration.md) enumeration contains the new `ASM_CACHE_ROOT_EX` flag.</span></span> <span data-ttu-id="389a0-404">Cet indicateur obtient l’emplacement du cache pour les assemblys .NET Framework 4, qui peut être obtenu par la fonction [GetCachePath](../unmanaged-api/fusion/getcachepath-function.md).</span><span class="sxs-lookup"><span data-stu-id="389a0-404">This flag gets the cache location for .NET Framework 4 assemblies, which can be obtained by the [GetCachePath](../unmanaged-api/fusion/getcachepath-function.md) function.</span></span> | <span data-ttu-id="389a0-405">Aucune, à condition que les applications n’utilisent pas de chemins explicites vers les assemblys, ce qui n’est pas recommandé.</span><span class="sxs-lookup"><span data-stu-id="389a0-405">None, assuming that applications do not use explicit paths to assemblies, which is not a recommended practice.</span></span> |
| <span data-ttu-id="389a0-406">**Outil Global Assembly Cache**</span><span class="sxs-lookup"><span data-stu-id="389a0-406">**Global assembly cache tool**</span></span> | <span data-ttu-id="389a0-407">[Gacutil.exe (outil Global Assembly Cache)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ex0ss12c%28v=vs.100%29) ne prend plus en charge la visionneuse du plug-in du shell.</span><span class="sxs-lookup"><span data-stu-id="389a0-407">The [Gacutil.exe (Global Assembly Cache Tool)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ex0ss12c%28v=vs.100%29) no longer supports the shell plugin viewer.</span></span> | <span data-ttu-id="389a0-408">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-408">None.</span></span> |

### <a name="interoperability"></a><span data-ttu-id="389a0-409">Interopérabilité</span><span class="sxs-lookup"><span data-stu-id="389a0-409">Interoperability</span></span>

<span data-ttu-id="389a0-410">Espace de noms : <xref:System.Runtime.InteropServices> ; assembly : mscorlib (dans mscorlib.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-410">Namespace: <xref:System.Runtime.InteropServices>; assembly: mscorlib (in mscorlib.dll)</span></span>

| <span data-ttu-id="389a0-411">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-411">Feature</span></span> | <span data-ttu-id="389a0-412">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-412">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-413">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-413">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-414">**Longueur du tampon** (API non managée)</span><span class="sxs-lookup"><span data-stu-id="389a0-414">**Buffer length** (unmanaged API)</span></span> | <span data-ttu-id="389a0-415">Pour économiser de la mémoire, la fonctionnalité pour le paramètre `pBufferLengthOffset` de la méthode [ICorProfilerInfo2::GetStringLayout](../unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method.md) a été changée pour correspondre au paramètre `pStringLengthOffset`.</span><span class="sxs-lookup"><span data-stu-id="389a0-415">To save memory, the functionality for the `pBufferLengthOffset` parameter for the [ICorProfilerInfo2::GetStringLayout](../unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method.md) method has been changed to match the `pStringLengthOffset` parameter.</span></span> <span data-ttu-id="389a0-416">Les deux paramètres pointent désormais vers l’emplacement de décalage de la longueur de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="389a0-416">Both parameters now point to the offset location of the string's length.</span></span> <span data-ttu-id="389a0-417">La longueur du tampon a été supprimée de la représentation de la classe de chaîne.</span><span class="sxs-lookup"><span data-stu-id="389a0-417">Buffer length has been removed from the representation of the string class.</span></span> | <span data-ttu-id="389a0-418">Supprimez toute dépendance sur la longueur du tampon.</span><span class="sxs-lookup"><span data-stu-id="389a0-418">Remove any dependency on the buffer length.</span></span> |
| <span data-ttu-id="389a0-419">**Débogage juste-à-temps**</span><span class="sxs-lookup"><span data-stu-id="389a0-419">**JIT debugging**</span></span> | <span data-ttu-id="389a0-420">Pour simplifier l’inscription pour le débogage juste-à-temps (JIT), le débogueur .NET Framework utilise désormais uniquement la clé de Registre AeDebug, qui contrôle le comportement du débogage JIT pour le code natif.</span><span class="sxs-lookup"><span data-stu-id="389a0-420">To simplify registration for just-in-time (JIT) debugging, the .NET Framework debugger now uses only the AeDebug registry key, which controls the JIT debugging behavior for native code.</span></span> <span data-ttu-id="389a0-421">Ce changement a les conséquences suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-421">This change results in the following:</span></span><br><br><span data-ttu-id="389a0-422">\* Vous ne pouvez plus inscrire deux débogueurs différents pour du code managé et natif.</span><span class="sxs-lookup"><span data-stu-id="389a0-422">\* You can no longer register two different debuggers for managed and native code.</span></span><br><span data-ttu-id="389a0-423">\* Vous ne pouvez plus démarrer automatiquement le débogueur pour un processus non interactif, mais vous pouvez inviter l’utilisateur à suivre un processus interactif.</span><span class="sxs-lookup"><span data-stu-id="389a0-423">\* You can no longer start the debugger automatically for a non-interactive process, but you can prompt the user for an interactive process.</span></span><br><span data-ttu-id="389a0-424">\* Vous n’êtes plus averti quand le débogueur ne peut pas démarrer ou quand il n’existe aucun débogueur inscrit à démarrer.</span><span class="sxs-lookup"><span data-stu-id="389a0-424">\* You are no longer notified when the debugger fails to start, or when there is no registered debugger that should be started.</span></span><br><span data-ttu-id="389a0-425">\* Les stratégies de lancement automatique qui dépendent de l’interactivité de l’application ne sont plus prises en charge.</span><span class="sxs-lookup"><span data-stu-id="389a0-425">\* Auto-launch policies that depend on the interactivity of the application are no longer supported.</span></span> | <span data-ttu-id="389a0-426">Ajustez les opérations de débogage selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="389a0-426">Adjust debugging operations as required.</span></span> |
| <span data-ttu-id="389a0-427">**Appel de plateforme**</span><span class="sxs-lookup"><span data-stu-id="389a0-427">**Platform invoke**</span></span> | <span data-ttu-id="389a0-428">Pour améliorer les performances dans l’interopérabilité avec du code non managé, les conventions d’appel incorrectes dans un appel de code non managé provoquent désormais l’échec de l’application.</span><span class="sxs-lookup"><span data-stu-id="389a0-428">To improve performance in interoperability with unmanaged code, incorrect calling conventions in a platform invoke now cause the application to fail.</span></span> <span data-ttu-id="389a0-429">Dans les versions antérieures, la couche de marshaling résolvait ces erreurs en haut de la pile.</span><span class="sxs-lookup"><span data-stu-id="389a0-429">In previous versions, the marshaling layer resolved these errors up the stack.</span></span> | <span data-ttu-id="389a0-430">Le débogage de vos applications dans Microsoft Visual Studio vous signale ces erreurs pour que vous puissiez les corriger.</span><span class="sxs-lookup"><span data-stu-id="389a0-430">Debugging your applications in Microsoft Visual Studio alerts you to these errors so you can correct them.</span></span><br><br><span data-ttu-id="389a0-431">Si vous avez des binaires qui ne peuvent pas être mis à jour, vous pouvez inclure l’élément [\<NetFx40_PInvokeStackResilience>](../configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element.md) dans le fichier de configuration de votre application pour permettre la résolution des erreurs d’appel en haut de la pile, comme dans les versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="389a0-431">If you have binaries that cannot be updated, you can include the [\<NetFx40_PInvokeStackResilience>](../configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element.md) element in your application's configuration file to enable calling errors to be resolved up the stack as in earlier versions.</span></span> <span data-ttu-id="389a0-432">Toutefois, cette opération peut affecter les performances de votre application.</span><span class="sxs-lookup"><span data-stu-id="389a0-432">However, this may affect the performance of your application.</span></span> |
| <span data-ttu-id="389a0-433">**Interfaces supprimées** (API non managée)</span><span class="sxs-lookup"><span data-stu-id="389a0-433">**Removed interfaces** (unmanaged API)</span></span> | <span data-ttu-id="389a0-434">Pour simplifier la tâche des développeurs, les interfaces suivantes ont été supprimées, car elles ne fournissaient aucun scénario d’exécution utile et le CLR ne fournissait ou n’acceptait aucune implémentation :</span><span class="sxs-lookup"><span data-stu-id="389a0-434">To avoid developer confusion, the following interfaces were removed, because they did not provide any useful run-time scenarios, and the CLR did not provide or accept any implementations:</span></span><br><br><span data-ttu-id="389a0-435">\* **INativeImageINativeImageDependency**</span><span class="sxs-lookup"><span data-stu-id="389a0-435">\* **INativeImageINativeImageDependency**</span></span><br><span data-ttu-id="389a0-436">\* **INativeImageInstallInfo**</span><span class="sxs-lookup"><span data-stu-id="389a0-436">\* **INativeImageInstallInfo**</span></span><br><span data-ttu-id="389a0-437">\* **INativeImageEvaluate**</span><span class="sxs-lookup"><span data-stu-id="389a0-437">\* **INativeImageEvaluate**</span></span><br><span data-ttu-id="389a0-438">\* **INativeImageConverter**</span><span class="sxs-lookup"><span data-stu-id="389a0-438">\* **INativeImageConverter**</span></span><br><span data-ttu-id="389a0-439">\* **ICorModule**</span><span class="sxs-lookup"><span data-stu-id="389a0-439">\* **ICorModule**</span></span><br><span data-ttu-id="389a0-440">\* **IMetaDataConverter**</span><span class="sxs-lookup"><span data-stu-id="389a0-440">\* **IMetaDataConverter**</span></span> | <span data-ttu-id="389a0-441">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-441">None.</span></span> |

## <a name="data"></a><span data-ttu-id="389a0-442">Données</span><span class="sxs-lookup"><span data-stu-id="389a0-442">Data</span></span>

<span data-ttu-id="389a0-443">Cette section décrit des problèmes de migration pour l’utilisation des groupes de données et des clients SQL, Entity Framework, LINQ to SQL et WCF Data Servers (anciennement appelé ADO.NET Data Services).</span><span class="sxs-lookup"><span data-stu-id="389a0-443">This section describes migration issues for using data sets and SQL clients, the Entity Framework, LINQ to SQL, and WCF Data Servers (formerly known as ADO.NET Data Services).</span></span>

### <a name="dataset-and-sql-client"></a><span data-ttu-id="389a0-444">DataSet et client SQL</span><span class="sxs-lookup"><span data-stu-id="389a0-444">DataSet and SQL Client</span></span>

<span data-ttu-id="389a0-445">Le tableau suivant décrit les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-445">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="389a0-446">Espaces de noms : <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient> ; assemblys : System.Data (dans System.Data.dll), System.Data.Entity (dans System.Data.Entity.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-446">Namespaces: <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient>; assemblies: System.Data (in System.Data.dll), System.Data.Entity (in System.Data.Entity.dll)</span></span>

| <span data-ttu-id="389a0-447">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-447">Feature</span></span> | <span data-ttu-id="389a0-448">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-448">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-449">**Scénarios de gestion des droits numériques (POCO)**</span><span class="sxs-lookup"><span data-stu-id="389a0-449">**POCO Scenarios**</span></span> | <span data-ttu-id="389a0-450">L’interface <xref:System.Data.Objects.DataClasses.IRelatedEnd> a de nouvelles méthodes qui facilitent son utilisation dans des scénarios POCO (Plain Old CLR Object).</span><span class="sxs-lookup"><span data-stu-id="389a0-450">The <xref:System.Data.Objects.DataClasses.IRelatedEnd> interface has new methods to improve its usability in Plain Old CLR Object (POCO) scenarios.</span></span> <span data-ttu-id="389a0-451">Ces nouvelles méthodes utilisent <xref:System.Object> au lieu d’une entité <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> comme paramètre.</span><span class="sxs-lookup"><span data-stu-id="389a0-451">These new methods take an <xref:System.Object> instead of an <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> entity as a parameter.</span></span> |
| <span data-ttu-id="389a0-452">**Modification de lignes**</span><span class="sxs-lookup"><span data-stu-id="389a0-452">**Editing Rows**</span></span> | <span data-ttu-id="389a0-453">La méthode <xref:System.Collections.IList.IndexOf%2A>, telle qu’elle est implémentée par la classe <xref:System.Data.DataView>, retourne désormais correctement la valeur d’une ligne modifiée, au lieu de retourner -1.</span><span class="sxs-lookup"><span data-stu-id="389a0-453">The <xref:System.Collections.IList.IndexOf%2A> method, as implemented by the <xref:System.Data.DataView> class, now correctly returns the value of a row that is being edited, instead of returning -1.</span></span> |
| <span data-ttu-id="389a0-454">**Événements**</span><span class="sxs-lookup"><span data-stu-id="389a0-454">**Events**</span></span> | <span data-ttu-id="389a0-455">L’événement <xref:System.Data.DataRowView.PropertyChanged> est maintenant déclenché quand une ligne est dans un état modifié et que la méthode <xref:System.Data.DataRow.RejectChanges%2A> est appelée.</span><span class="sxs-lookup"><span data-stu-id="389a0-455">The <xref:System.Data.DataRowView.PropertyChanged> event is now raised when a row is in a modified state and the <xref:System.Data.DataRow.RejectChanges%2A> method is called.</span></span> <span data-ttu-id="389a0-456">Ce changement facilite la création de contrôles d’interface utilisateur qui exposent le contenu d’un objet <xref:System.Data.DataSet>.</span><span class="sxs-lookup"><span data-stu-id="389a0-456">This change makes it easier to create UI controls that expose the contents of a <xref:System.Data.DataSet> object.</span></span> |
| <span data-ttu-id="389a0-457">**Exceptions**</span><span class="sxs-lookup"><span data-stu-id="389a0-457">**Exceptions**</span></span> | <span data-ttu-id="389a0-458">La méthode <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> lève maintenant <xref:System.InvalidOperationException> quand une connexion n’est pas définie ni ouverte, au lieu de <xref:System.NullReferenceException>.</span><span class="sxs-lookup"><span data-stu-id="389a0-458">The <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> method now throws an <xref:System.InvalidOperationException> when a connection is not set or open instead of a <xref:System.NullReferenceException>.</span></span> |
| <span data-ttu-id="389a0-459">**Mappage des vues**</span><span class="sxs-lookup"><span data-stu-id="389a0-459">**Mapping Views**</span></span> | <span data-ttu-id="389a0-460">Les erreurs de mappage de l’affichage des requêtes sont désormais interceptées au moment du design au lieu de lever un <xref:System.NullReferenceException> au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="389a0-460">Query view mapping errors are now caught at design time instead of throwing a <xref:System.NullReferenceException> at run time.</span></span><br><br><span data-ttu-id="389a0-461">La validation de mappage intercepte désormais l’erreur où deux ensembles d’associations dans Conceptual Schema (CSDL) sont mappés à la même colonne.</span><span class="sxs-lookup"><span data-stu-id="389a0-461">Mapping validation now catches the error in which two association sets in Conceptual Schema (CSDL) are mapped to the same column.</span></span> |
| <span data-ttu-id="389a0-462">**Transactions**</span><span class="sxs-lookup"><span data-stu-id="389a0-462">**Transactions**</span></span> | <span data-ttu-id="389a0-463">Si une application essaie d’exécuter une instruction sur une connexion une fois qu’une transaction a été effectuée (voire interrompue ou restaurée), un <xref:System.InvalidOperationException> est désormais levé.</span><span class="sxs-lookup"><span data-stu-id="389a0-463">If an application tries to execute a statement on a connection after a transaction has been completed (including aborted or rolled back), an <xref:System.InvalidOperationException> is now thrown.</span></span> <span data-ttu-id="389a0-464">Les versions antérieures ne levaient pas d’exceptions et vous permettaient d’exécuter d’autres commandes même si une transaction était annulée.</span><span class="sxs-lookup"><span data-stu-id="389a0-464">Previous versions did not throw an exception and let you execute additional commands even if a transaction was aborted.</span></span> |

### <a name="entity-framework"></a><span data-ttu-id="389a0-465">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="389a0-465">Entity Framework</span></span>

<span data-ttu-id="389a0-466">Le tableau suivant décrit les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-466">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="389a0-467">Espaces de noms : <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses> ; assembly : System.Data.Entity (dans System.Data.Entity.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-467">Namespaces: <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses>; assembly: System.Data.Entity (in System.Data.Entity.dll)</span></span>

| <span data-ttu-id="389a0-468">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-468">Feature</span></span> | <span data-ttu-id="389a0-469">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-469">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-470">**Objets d’entité**</span><span class="sxs-lookup"><span data-stu-id="389a0-470">**Entity objects**</span></span> | <span data-ttu-id="389a0-471">Il existe désormais une parité entre la méthode <xref:System.Data.Objects.ObjectContext.Detach%2A> et l’état de l’objet d’entité quand la méthode <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> est appelée.</span><span class="sxs-lookup"><span data-stu-id="389a0-471">There is now parity between the <xref:System.Data.Objects.ObjectContext.Detach%2A> method and the state of the entity object when the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="389a0-472">Cette cohérence améliorée empêche la levée d’exceptions inattendues.</span><span class="sxs-lookup"><span data-stu-id="389a0-472">This improved consistency prevents unexpected exceptions from being thrown.</span></span> |
| <span data-ttu-id="389a0-473">**Entity SQL**</span><span class="sxs-lookup"><span data-stu-id="389a0-473">**Entity SQL**</span></span> | <span data-ttu-id="389a0-474">Les règles ont été améliorées pour les résolutions d’identificateurs dans Entity SQL.</span><span class="sxs-lookup"><span data-stu-id="389a0-474">Rules have been improved for identifier resolutions in Entity SQL.</span></span><br><br><span data-ttu-id="389a0-475">L’analyseur Entity SQL a amélioré la logique de résolution des identificateurs multiparties.</span><span class="sxs-lookup"><span data-stu-id="389a0-475">The Entity SQL parser has improved logic for resolving multipart identifiers.</span></span> |
| <span data-ttu-id="389a0-476">**Annotations structurelles**</span><span class="sxs-lookup"><span data-stu-id="389a0-476">**Structural annotations**</span></span> | <span data-ttu-id="389a0-477">L’Entity Framework reconnaît désormais les annotations structurelles.</span><span class="sxs-lookup"><span data-stu-id="389a0-477">The Entity Framework now recognizes structural annotations.</span></span> |
| <span data-ttu-id="389a0-478">**Requêtes**</span><span class="sxs-lookup"><span data-stu-id="389a0-478">**Queries**</span></span> | <span data-ttu-id="389a0-479">Les améliorations suivantes ont été effectuées dans les requêtes :</span><span class="sxs-lookup"><span data-stu-id="389a0-479">The following improvements were made in queries:</span></span><br><br><span data-ttu-id="389a0-480">\* Une requête `GroupBy` utilisant une clé Null sur une collection vide ne retournera aucune ligne, qu’il y ait ou non des sélections supplémentaires dans la requête.</span><span class="sxs-lookup"><span data-stu-id="389a0-480">\* A `GroupBy` query using a null key over an empty collection will not return any rows, regardless if there are any additional selects in the query.</span></span><br><span data-ttu-id="389a0-481">\* Le code SQL généré dans les requêtes LINQ et Entity SQL traite désormais les paramètres de chaîne comme des valeurs non Unicode par défaut.</span><span class="sxs-lookup"><span data-stu-id="389a0-481">\* Generated SQL in LINQ and Entity-SQL queries now treat string parameters as non-Unicode values by default.</span></span> |

### <a name="linq-to-sql"></a><span data-ttu-id="389a0-482">LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="389a0-482">LINQ to SQL</span></span>

<span data-ttu-id="389a0-483">Le tableau suivant décrit les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-483">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="389a0-484">Espace de noms : <xref:System.Data.Linq> ; assembly : System.Data.Linq (dans System.Data.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-484">Namespace: <xref:System.Data.Linq>; assembly: System.Data.Linq (in System.Data.Linq.dll)</span></span>

| <span data-ttu-id="389a0-485">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-485">Feature</span></span> | <span data-ttu-id="389a0-486">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-486">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-487">**Événements**</span><span class="sxs-lookup"><span data-stu-id="389a0-487">**Events**</span></span> | <span data-ttu-id="389a0-488">Une collection <xref:System.Data.Linq.EntitySet%601> déclenche désormais l’événement <xref:System.Data.Linq.EntitySet%601.ListChanged> pour des opérations d’ajout et de suppression si <xref:System.Data.Linq.EntitySet%601> est déchargé, en plus de déclencher l’événement quand la collection est chargée.</span><span class="sxs-lookup"><span data-stu-id="389a0-488">A <xref:System.Data.Linq.EntitySet%601> collection now raises the <xref:System.Data.Linq.EntitySet%601.ListChanged> event for add and remove operations if the <xref:System.Data.Linq.EntitySet%601> is unloaded, in addition to raising the event when the collection is loaded.</span></span> |
| <span data-ttu-id="389a0-489">**Requêtes**</span><span class="sxs-lookup"><span data-stu-id="389a0-489">**Queries**</span></span> | <span data-ttu-id="389a0-490">`Skip(0)` n’est plus ignoré dans les requêtes LINQ to SQL.</span><span class="sxs-lookup"><span data-stu-id="389a0-490">`Skip(0)` is no longer ignored in LINQ to SQL queries.</span></span> <span data-ttu-id="389a0-491">Les requêtes qui ont cette méthode peuvent donc se comporter différemment.</span><span class="sxs-lookup"><span data-stu-id="389a0-491">As a result, queries that have this method might behave differently.</span></span> <span data-ttu-id="389a0-492">Par exemple, dans certains cas, une clause `OrderBy` est obligatoire avec `Skip(0)` et la requête lève désormais une exception <xref:System.NotSupportedException> si la clause `OrderBy` n’a pas été incluse.</span><span class="sxs-lookup"><span data-stu-id="389a0-492">For example in some cases, an `OrderBy` clause is required with `Skip(0)`, and the query will now throw a <xref:System.NotSupportedException> exception if the `OrderBy` clause was not included.</span></span> |

### <a name="wcf-data-services"></a><span data-ttu-id="389a0-493">Services de données WCF</span><span class="sxs-lookup"><span data-stu-id="389a0-493">WCF Data Services</span></span>

<span data-ttu-id="389a0-494">Le tableau suivant décrit les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-494">The following table describes improvements to features that previously had limitations or other issues.</span></span>

<span data-ttu-id="389a0-495">Espaces de noms : <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers> ; assemblys : System.Data.Services (dans System.Data.Services.dll), System.Data.Services.Client (dans System.Data.Services.Client.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-495">Namespaces: <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers>; assemblies: System.Data.Services (in System.Data.Services.dll), System.Data.Services.Client (in System.Data.Services.Client.dll)</span></span>

| <span data-ttu-id="389a0-496">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-496">Feature</span></span> | <span data-ttu-id="389a0-497">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-497">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-498">**Contenu binaire par lot**</span><span class="sxs-lookup"><span data-stu-id="389a0-498">**Batched Binary Content**</span></span> | <span data-ttu-id="389a0-499">Les services de données WCF prennent désormais en charge le contenu binaire par lot dans les demandes et les réponses.</span><span class="sxs-lookup"><span data-stu-id="389a0-499">WCF Data Services now supports batched binary content in requests and responses.</span></span> |
| <span data-ttu-id="389a0-500">**Intercepteurs de changement**</span><span class="sxs-lookup"><span data-stu-id="389a0-500">**Change interceptors**</span></span> | <span data-ttu-id="389a0-501">Les intercepteurs de changement sont désormais exécutés pour une demande de suppression.</span><span class="sxs-lookup"><span data-stu-id="389a0-501">Change interceptors are now executed for a delete request.</span></span><br><br><span data-ttu-id="389a0-502">Un intercepteur de changement est une méthode qui s’exécute chaque fois que le serveur reçoit une demande de changement pour une entité dans le jeu d’entités.</span><span class="sxs-lookup"><span data-stu-id="389a0-502">A change interceptor is a method that runs every time a request is received by the server to modify an entity in the entity set.</span></span> <span data-ttu-id="389a0-503">Il s’exécute avant l’exécution de la requête entrante.</span><span class="sxs-lookup"><span data-stu-id="389a0-503">It runs before the incoming request is executed.</span></span> <span data-ttu-id="389a0-504">L’intercepteur de changement fournit un accès à l’entité changée et à l’opération exécutée.</span><span class="sxs-lookup"><span data-stu-id="389a0-504">The change interceptor provides access to the entity that is being changed and the operation that is being performed on it.</span></span> |
| <span data-ttu-id="389a0-505">**Exceptions**</span><span class="sxs-lookup"><span data-stu-id="389a0-505">**Exceptions**</span></span> | <span data-ttu-id="389a0-506">Les conditions suivantes lèvent désormais des exceptions plus utiles au lieu de <xref:System.NullReferenceException> :</span><span class="sxs-lookup"><span data-stu-id="389a0-506">The following conditions now throw more useful exceptions instead of a <xref:System.NullReferenceException>:</span></span><br><br><span data-ttu-id="389a0-507">\* <xref:System.ServiceProcess.TimeoutException> quand un appel à un service de données arrive à expiration.</span><span class="sxs-lookup"><span data-stu-id="389a0-507">\* A <xref:System.ServiceProcess.TimeoutException> when a call to a data service times out.</span></span><br><span data-ttu-id="389a0-508">\* <xref:System.Data.Services.Client.DataServiceRequestException> quand une demande incorrecte est effectuée à un service de données.</span><span class="sxs-lookup"><span data-stu-id="389a0-508">\* A <xref:System.Data.Services.Client.DataServiceRequestException> when a bad request is made to a data service.</span></span><br><br><span data-ttu-id="389a0-509">Dans vos applications, vous devez changer la gestion des exceptions pour intercepter les nouvelles exceptions.</span><span class="sxs-lookup"><span data-stu-id="389a0-509">In your applications, you should change exception handling to catch the new exceptions.</span></span> |
| <span data-ttu-id="389a0-510">**En-têtes**</span><span class="sxs-lookup"><span data-stu-id="389a0-510">**Headers**</span></span> | <span data-ttu-id="389a0-511">Les améliorations suivantes ont été effectuées dans les en-têtes :</span><span class="sxs-lookup"><span data-stu-id="389a0-511">The following improvements were made to headers:</span></span><br><br><span data-ttu-id="389a0-512">\* Les services de données WCF rejettent désormais correctement un en-tête `eTag` qui a une valeur non spécifiée.</span><span class="sxs-lookup"><span data-stu-id="389a0-512">\* WCF Data Services now correctly rejects an `eTag` header that has an unspecified value.</span></span><br><span data-ttu-id="389a0-513">\* Les services de données WCF retournent désormais une erreur et n’exécutent pas les requêtes de suppression à un lien quand un en-tête `if-*` se trouve dans la requête.</span><span class="sxs-lookup"><span data-stu-id="389a0-513">\* WCF Data Services now returns an error and does not execute the request for a delete request to a link when an `if-*` header is in the request.</span></span><br><span data-ttu-id="389a0-514">\* Les services de données WCF retournent désormais une erreur au client dans le format (Atom, JSON) spécifié par le client dans l’en-tête Accept.</span><span class="sxs-lookup"><span data-stu-id="389a0-514">\* WCF Data Services now returns an error to the client in the format (Atom, JSON) that the client specified in the Accept header.</span></span> |
| <span data-ttu-id="389a0-515">**Lecteur JSON**</span><span class="sxs-lookup"><span data-stu-id="389a0-515">**JSON Reader**</span></span> | <span data-ttu-id="389a0-516">Le lecteur JSON (JavaScript Object Notation) retourne désormais une erreur correctement quand il lit une seule barre oblique inverse (« \\ ») comme caractère d’échappement, quand il traite des charges JSON envoyées à un service de données WCF.</span><span class="sxs-lookup"><span data-stu-id="389a0-516">The JavaScript Object Notation (JSON) reader now correctly returns an error when it reads the single backslash ("\\") escape character, when it processes JSON payloads sent to a WCF Data Service.</span></span> |
| <span data-ttu-id="389a0-517">**Fusions**</span><span class="sxs-lookup"><span data-stu-id="389a0-517">**Merges**</span></span> | <span data-ttu-id="389a0-518">Les améliorations suivantes ont été effectuées dans l’énumération <xref:System.Data.Services.Client.MergeOption> :</span><span class="sxs-lookup"><span data-stu-id="389a0-518">The following improvements were made to the <xref:System.Data.Services.Client.MergeOption> enumeration:</span></span><br><br><span data-ttu-id="389a0-519">\* L’option de fusion <xref:System.Data.Services.Client.MergeOption> ne modifie plus l’entité sur le client à la suite des réponses ultérieures d’un service de données.</span><span class="sxs-lookup"><span data-stu-id="389a0-519">\* The <xref:System.Data.Services.Client.MergeOption> merge option no longer modifies the entity on the client as a result of any subsequent response from a data service.</span></span><br><span data-ttu-id="389a0-520">\* L’option <xref:System.Data.Services.Client.MergeOption> est désormais cohérente entre les mises à jour SQL dynamiques et les mises à jour basées sur des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="389a0-520">\* The <xref:System.Data.Services.Client.MergeOption> option is now consistent between dynamic SQL and stored procedure-based updates.</span></span> |
| <span data-ttu-id="389a0-521">**Requêtes**</span><span class="sxs-lookup"><span data-stu-id="389a0-521">**Requests**</span></span> | <span data-ttu-id="389a0-522">La méthode <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> est maintenant appelée avant qu’une requête aux services de données ne soit traitée.</span><span class="sxs-lookup"><span data-stu-id="389a0-522">The <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> method is now called before a request to data services is processed.</span></span> <span data-ttu-id="389a0-523">La requête peut ainsi fonctionner correctement pour les services <xref:System.Data.Services.Providers.ServiceOperation>.</span><span class="sxs-lookup"><span data-stu-id="389a0-523">This enables the request to work correctly for <xref:System.Data.Services.Providers.ServiceOperation> services.</span></span> |
| <span data-ttu-id="389a0-524">**Flux**</span><span class="sxs-lookup"><span data-stu-id="389a0-524">**Streams**</span></span> | <span data-ttu-id="389a0-525">Les services de données WCF ne ferment plus le flux sous-jacent pour les opérations en lecture et en écriture.</span><span class="sxs-lookup"><span data-stu-id="389a0-525">WCF Data Services no longer closes the underlying stream for read and write operations.</span></span> |
| <span data-ttu-id="389a0-526">**URI**</span><span class="sxs-lookup"><span data-stu-id="389a0-526">**URIs**</span></span> | <span data-ttu-id="389a0-527">L’échappement des URI par le client des services de données WCF a été corrigé.</span><span class="sxs-lookup"><span data-stu-id="389a0-527">The escaping of URIs by WCF Data Services client has been corrected.</span></span> |

## <a name="windows-communication-foundation-wcf"></a><span data-ttu-id="389a0-528">Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="389a0-528">Windows Communication Foundation (WCF)</span></span>

<span data-ttu-id="389a0-529">Le tableau suivant décrit les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-529">The following table describes improvements to features that previously had limitations or other issues.</span></span>

| <span data-ttu-id="389a0-530">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-530">Feature</span></span> | <span data-ttu-id="389a0-531">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-531">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-532">**Fichiers de configuration**</span><span class="sxs-lookup"><span data-stu-id="389a0-532">**Configuration files**</span></span> | <span data-ttu-id="389a0-533">Pour permettre l’héritage des comportements par le biais de la hiérarchie de fichiers de configuration, WCF prend désormais en charge la fusion dans les fichiers de configuration.</span><span class="sxs-lookup"><span data-stu-id="389a0-533">To enable inheritance of behaviors through the configuration file hierarchy, WCF now supports merging across configuration files.</span></span><br><br><span data-ttu-id="389a0-534">Le modèle d’héritage de configuration est maintenant développé pour permettre aux utilisateurs de définir des comportements qui s’appliquent à tous les services exécutés sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-534">The configuration inheritance model is now expanded to let users define behaviors that will be applied to all the services that are running on the computer.</span></span><br><br><span data-ttu-id="389a0-535">Vous pouvez rencontrer des changements de comportement si des comportements ont le même nom à différents niveaux de la hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="389a0-535">You may encounter behavioral changes if there are behaviors with the same name at different levels of the hierarchy.</span></span> |
| <span data-ttu-id="389a0-536">**Hébergement de services**</span><span class="sxs-lookup"><span data-stu-id="389a0-536">**Service hosting**</span></span> | <span data-ttu-id="389a0-537">Vous ne pouvez plus spécifier l’élément de configuration `<serviceHostingEnvironment>` au niveau du service en ajoutant l’attribut `allowDefinition="MachineToApplication"` à la définition de l’élément.</span><span class="sxs-lookup"><span data-stu-id="389a0-537">You can no longer specify the `<serviceHostingEnvironment>` configuration element at the service level by adding the attribute `allowDefinition="MachineToApplication"` to the element definition.</span></span><br><br><span data-ttu-id="389a0-538">La spécification de l’élément `<serviceHostingEnvironment>` au niveau du service n’est pas correcte d’un point de vue technique et engendre un comportement incohérent.</span><span class="sxs-lookup"><span data-stu-id="389a0-538">Specifying the `<serviceHostingEnvironment>` element at the service level is technically incorrect and causes inconsistent behavior.</span></span> |

## <a name="windows-presentation-foundation-wpf"></a><span data-ttu-id="389a0-539">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="389a0-539">Windows Presentation Foundation (WPF)</span></span>

### <a name="applications"></a><span data-ttu-id="389a0-540">Applications</span><span class="sxs-lookup"><span data-stu-id="389a0-540">Applications</span></span>

<span data-ttu-id="389a0-541">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Controls> ; assembly : PresentationFramework (dans PresentationFramework.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-541">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>; assembly: PresentationFramework (in PresentationFramework.dll)</span></span>

| <span data-ttu-id="389a0-542">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-542">Feature</span></span> | <span data-ttu-id="389a0-543">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-543">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-544">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-544">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-545">**Gestion des exceptions**</span><span class="sxs-lookup"><span data-stu-id="389a0-545">**Exception handling**</span></span> | <span data-ttu-id="389a0-546">Pour détecter les erreurs plus tôt, WPF lève <xref:System.Reflection.TargetInvocationException> et définit la propriété <xref:System.Exception.InnerException> sur des exceptions critiques, telles que <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException> et <xref:System.Security.SecurityException>, au lieu d’intercepter l’exception d’origine.</span><span class="sxs-lookup"><span data-stu-id="389a0-546">To enable errors to be detected earlier, WPF throws a <xref:System.Reflection.TargetInvocationException> and sets the <xref:System.Exception.InnerException> property to critical exceptions, such as <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException>, and <xref:System.Security.SecurityException>, instead of catching the original exception.</span></span> | <span data-ttu-id="389a0-547">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-547">None.</span></span> |
| <span data-ttu-id="389a0-548">**Ressources liées**</span><span class="sxs-lookup"><span data-stu-id="389a0-548">**Linked resources**</span></span> | <span data-ttu-id="389a0-549">Pour faciliter les liaisons, les fichiers de ressources (tels que des images), non situés dans la structure de dossiers du projet utilisent le chemin complet du fichier de ressources comme ID quand l’application est générée, au lieu d’utiliser simplement le nom de fichier de la ressource.</span><span class="sxs-lookup"><span data-stu-id="389a0-549">To make linking easier, resource files (such as images) that are located in a location other than the project's folder structure use the resource file's full path instead of just its file name as the resource ID when the application is built.</span></span> <span data-ttu-id="389a0-550">L’application peut localiser les fichiers au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="389a0-550">The application will be able to locate the files at run time.</span></span> | <span data-ttu-id="389a0-551">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-551">None.</span></span> |
| <span data-ttu-id="389a0-552">**Applications de confiance partielle**</span><span class="sxs-lookup"><span data-stu-id="389a0-552">**Partial-trust applications**</span></span> | <span data-ttu-id="389a0-553">Pour des raisons de sécurité, les applications Windows qui fonctionnent en mode de confiance partielle et qui contiennent un contrôle <xref:System.Windows.Controls.WebBrowser> ou un contrôle <xref:System.Windows.Controls.Frame> contenant HTML lèvent <xref:System.Security.SecurityException> quand le contrôle est créé.</span><span class="sxs-lookup"><span data-stu-id="389a0-553">For security considerations, Windows-based applications that run in partial trust and contain a <xref:System.Windows.Controls.WebBrowser> control or a <xref:System.Windows.Controls.Frame> control that contains HTML will throw a <xref:System.Security.SecurityException> when the control is created.</span></span><br><br><span data-ttu-id="389a0-554">Les applications de navigateur lèvent une exception et affichent un message si toutes les conditions suivantes sont respectées :</span><span class="sxs-lookup"><span data-stu-id="389a0-554">Browser applications will throw an exception and display a message if all of the following conditions are met:</span></span><br><br><span data-ttu-id="389a0-555">\* l’application s’exécute dans Firefox ;</span><span class="sxs-lookup"><span data-stu-id="389a0-555">\* The application is running in Firefox.</span></span><br><span data-ttu-id="389a0-556">\* l’application s’exécute en mode de confiance partielle dans la zone Internet à partir de sites non approuvés ;</span><span class="sxs-lookup"><span data-stu-id="389a0-556">\* The application is running in partial trust in the Internet zone from non-trusted sites.</span></span><br><span data-ttu-id="389a0-557">\* l’application contient un contrôle <xref:System.Windows.Controls.WebBrowser> ou un contrôle <xref:System.Windows.Controls.Frame> contenant du code HTML.</span><span class="sxs-lookup"><span data-stu-id="389a0-557">\* The application contains a <xref:System.Windows.Controls.WebBrowser> control or a <xref:System.Windows.Controls.Frame> control that contains HTML.</span></span><br><br><span data-ttu-id="389a0-558">Notez que les applications qui s’exécutent à partir de sites approuvés ou de la zone intranet ne sont pas affectées.</span><span class="sxs-lookup"><span data-stu-id="389a0-558">Note that applications that run from trusted sites or from the intranet zone will not be affected.</span></span> | <span data-ttu-id="389a0-559">Dans vos applications de navigateur, vous pouvez atténuer ce changement en effectuant l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-559">In your browser applications, you can ease this change by doing one of the following:</span></span><br><br><span data-ttu-id="389a0-560">\* Exécutez l’application de navigateur en mode de confiance totale.</span><span class="sxs-lookup"><span data-stu-id="389a0-560">\* Run the browser application in full trust.</span></span><br><span data-ttu-id="389a0-561">\* Invitez les clients à ajouter le site de l’application à la zone de sites approuvée.</span><span class="sxs-lookup"><span data-stu-id="389a0-561">\* Have customers add the application's site to the trusted sites zone.</span></span><br><span data-ttu-id="389a0-562">\* Invitez les clients à exécuter l’application dans Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="389a0-562">\* Have customers run the application in Internet Explorer.</span></span> |
| <span data-ttu-id="389a0-563">**Dictionnaires de ressources**</span><span class="sxs-lookup"><span data-stu-id="389a0-563">**Resource dictionaries**</span></span> | <span data-ttu-id="389a0-564">Pour améliorer les dictionnaires de ressources au niveau du thème et les empêcher de changer, des ressources pouvant être figées définies dans un dictionnaire de ressources et fusionnées dans un dictionnaire au niveau du thème restent désormais marquées comme figées et sont immuables.</span><span class="sxs-lookup"><span data-stu-id="389a0-564">To improve theme-level resource dictionaries and prevent them from changing, freezable resources that are defined in a resource dictionary and merged into a theme-level dictionary are now always marked as frozen and are immutable.</span></span> <span data-ttu-id="389a0-565">Il s’agit du comportement attendu pour des ressources pouvant être figées.</span><span class="sxs-lookup"><span data-stu-id="389a0-565">This is the expected behavior for freezable resources.</span></span> | <span data-ttu-id="389a0-566">Les applications qui modifient une ressource définie dans un dictionnaire fusionné au niveau du thème doivent cloner la ressource et modifier la copie clonée.</span><span class="sxs-lookup"><span data-stu-id="389a0-566">Applications that modify a resource that is defined in a theme-level merged dictionary should clone the resource and modify the cloned copy.</span></span> <span data-ttu-id="389a0-567">La ressource peut aussi être marquée comme `x:Shared="false"` pour que <xref:System.Windows.ResourceDictionary> crée une copie chaque fois que la ressource est interrogée.</span><span class="sxs-lookup"><span data-stu-id="389a0-567">Alternatively, the resource can be marked `x:Shared="false"` so that the <xref:System.Windows.ResourceDictionary> creates a new copy every time the resource is queried.</span></span> |
| <span data-ttu-id="389a0-568">**Windows 7** </span><span class="sxs-lookup"><span data-stu-id="389a0-568">**Windows 7**</span></span> | <span data-ttu-id="389a0-569">Pour permettre un fonctionnement optimal des applications WPF sur Windows 7, les améliorations suivantes ont été apportées pour corriger le comportement d’une fenêtre :</span><span class="sxs-lookup"><span data-stu-id="389a0-569">To make WPF applications work better on Windows 7, the following improvements were made to correct the behavior of a window:</span></span><br><br><span data-ttu-id="389a0-570">\* Les états d’ancrage et de mouvement fonctionnent désormais comme prévu selon les interventions de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-570">\* Dock and gesture states now work as expected based on user interactions.</span></span><br><span data-ttu-id="389a0-571">\* Les commandes de la barre des tâches **Cascade, Afficher les fenêtres empilées** et **Afficher les fenêtres côte à côte** ont désormais un comportement correct et mettent à jour les propriétés appropriées.</span><span class="sxs-lookup"><span data-stu-id="389a0-571">\* The taskbar commands **Cascade windows, Show windows stacked**, and **Show windows side-by-side** now have the correct behavior and update the appropriate properties.</span></span><br><span data-ttu-id="389a0-572">\* Les propriétés `Top`, `Left`, `Width` et `Height` d’une fenêtre agrandie ou réduite contiennent désormais l’emplacement de restauration correct de la fenêtre au lieu d’autres valeurs, en fonction du moniteur.</span><span class="sxs-lookup"><span data-stu-id="389a0-572">\* The `Top`, `Left`, `Width`, and `Height` properties for a maximized or minimized window now contain the correct restore location of the window instead of other values, depending on the monitor.</span></span> | <span data-ttu-id="389a0-573">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-573">None.</span></span> |
| <span data-ttu-id="389a0-574">**Style et transparence des fenêtres**</span><span class="sxs-lookup"><span data-stu-id="389a0-574">**Windows style and transparency**</span></span> | <span data-ttu-id="389a0-575"><xref:System.InvalidOperationException> est levé si vous essayez d’affecter à <xref:System.Windows.Window.WindowStyle> une valeur différente de <xref:System.Windows.WindowStyle> quand <xref:System.Windows.Window.AllowsTransparency> a la valeur `true` et que <xref:System.Windows.WindowState> a la valeur <xref:System.Windows.WindowState>.</span><span class="sxs-lookup"><span data-stu-id="389a0-575">An <xref:System.InvalidOperationException> is thrown if you try to set <xref:System.Windows.Window.WindowStyle> to a value other than <xref:System.Windows.WindowStyle> when <xref:System.Windows.Window.AllowsTransparency> is `true` and <xref:System.Windows.WindowState> is <xref:System.Windows.WindowState>.</span></span> | <span data-ttu-id="389a0-576">Si vous devez changer <xref:System.Windows.Window.WindowStyle> quand <xref:System.Windows.Window.AllowsTransparency> a la valeur `true`, vous pouvez appeler la fonction Win32 `SetWindowLongPtr`.</span><span class="sxs-lookup"><span data-stu-id="389a0-576">If you must change the <xref:System.Windows.Window.WindowStyle> when <xref:System.Windows.Window.AllowsTransparency> is `true`, you can call the Win32 `SetWindowLongPtr` function.</span></span> |
| <span data-ttu-id="389a0-577">**Visionneuse XPS**</span><span class="sxs-lookup"><span data-stu-id="389a0-577">**XPS Viewer**</span></span> | <span data-ttu-id="389a0-578">WPF n’inclut pas Microsoft XML Paper Specification Essentials Pack (XPSEP).</span><span class="sxs-lookup"><span data-stu-id="389a0-578">WPF does not include the Microsoft XML Paper Specification Essentials Pack (XPSEP).</span></span> <span data-ttu-id="389a0-579">XPSEP est inclus avec Windows 7 et Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="389a0-579">XPSEP is included with Windows 7 and Windows Vista.</span></span><br><br><span data-ttu-id="389a0-580">Sur un ordinateur qui exécute Windows XP sans que .NET Framework 3.5 SP1 ne soit installé, l’impression à l’aide d’une API WPF différente de celles dans <xref:System.Windows.Controls.PrintDialog> s’appuie sur WINSPOOL.</span><span class="sxs-lookup"><span data-stu-id="389a0-580">On a computer that is running Windows XP without the .NET Framework 3.5 SP1 installed, printing by using a WPF API other than those in <xref:System.Windows.Controls.PrintDialog> will rely on the WINSPOOL.</span></span> <span data-ttu-id="389a0-581">Certaines fonctions d’imprimante ne sont pas signalées et certains paramètres de l’imprimante ne sont pas appliqués pendant l’impression.</span><span class="sxs-lookup"><span data-stu-id="389a0-581">Some printer capabilities will not be reported and some printer settings will not be applied during printing.</span></span> | <span data-ttu-id="389a0-582">Si nécessaire, installez [Microsoft XML Paper Specification Essentials Pack](https://go.microsoft.com/fwlink/?LinkId=178895).</span><span class="sxs-lookup"><span data-stu-id="389a0-582">If needed, install the [Microsoft XML Paper Specification Essentials Pack](https://go.microsoft.com/fwlink/?LinkId=178895).</span></span> |

### <a name="controls"></a><span data-ttu-id="389a0-583">Contrôles</span><span class="sxs-lookup"><span data-stu-id="389a0-583">Controls</span></span>

<span data-ttu-id="389a0-584">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input> ; assemblys : PresentationFramework (dans PresentationFramework.dll), PresentationCore (dans PresentationCore.dll), WindowsBase (dans WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-584">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="389a0-585">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-585">Feature</span></span> | <span data-ttu-id="389a0-586">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-586">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-587">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-587">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-588">**Boîtes de dialogue**</span><span class="sxs-lookup"><span data-stu-id="389a0-588">**Dialog boxes**</span></span> | <span data-ttu-id="389a0-589">Pour améliorer la fiabilité, la méthode <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> est appelée sur le même thread qui a créé le contrôle <xref:Microsoft.Win32.FileDialog>.</span><span class="sxs-lookup"><span data-stu-id="389a0-589">To improve reliability, the <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> method is called on the same thread that created the <xref:Microsoft.Win32.FileDialog> control.</span></span> | <span data-ttu-id="389a0-590">Veillez à créer un contrôle <xref:Microsoft.Win32.FileDialog> et à appeler la méthode <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> sur le même thread.</span><span class="sxs-lookup"><span data-stu-id="389a0-590">Be sure to create a <xref:Microsoft.Win32.FileDialog> control and call the <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> method on the same thread.</span></span> |
| <span data-ttu-id="389a0-591">**Fenêtres flottantes**</span><span class="sxs-lookup"><span data-stu-id="389a0-591">**Floating windows**</span></span> | <span data-ttu-id="389a0-592">Pour corriger la logique de restauration du focus qui réactive sans cesse une fenêtre flottante (en l’affichant comme une boîte de dialogue modale), la restauration du focus est désormais bloquée si le candidat n’est pas un enfant de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="389a0-592">To fix focus restoration logic that incorrectly keeps reactivating a floating window (making it appear like a modal dialog box), focus restoration is now prevented if the candidate is not a child of the window.</span></span> | <span data-ttu-id="389a0-593">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-593">None.</span></span> |
| <span data-ttu-id="389a0-594">**Éléments dans les collections**</span><span class="sxs-lookup"><span data-stu-id="389a0-594">**Items in collections**</span></span> | <span data-ttu-id="389a0-595">Quand un élément est déplacé ou ajouté à une collection sous-jacente, il s’affiche dans <xref:System.Windows.Data.CollectionView> au même emplacement relatif si le <xref:System.Windows.Data.CollectionView> n’est pas trié.</span><span class="sxs-lookup"><span data-stu-id="389a0-595">When an item is moved or added to an underlying collection, it appears in the <xref:System.Windows.Data.CollectionView> in the same relative location if the <xref:System.Windows.Data.CollectionView> is not sorted.</span></span> <span data-ttu-id="389a0-596">Cela garantit une cohérence entre la position de l’élément dans la collection et le <xref:System.Windows.Data.CollectionView> associé.</span><span class="sxs-lookup"><span data-stu-id="389a0-596">This provides consistency between the item's position in the collection and in the associated <xref:System.Windows.Data.CollectionView>.</span></span> | <span data-ttu-id="389a0-597">Utilisez la méthode <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> ou <xref:System.Windows.Data.CollectionView.IndexOf%2A> pour trouver l’emplacement d’un élément dans un <xref:System.Windows.Data.CollectionView> au lieu de vous baser sur l’emplacement fixe d’un élément.</span><span class="sxs-lookup"><span data-stu-id="389a0-597">Use the <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> or <xref:System.Windows.Data.CollectionView.IndexOf%2A> method to find the location of an item in a <xref:System.Windows.Data.CollectionView> instead of relying on a fixed location of an item.</span></span> |
| <span data-ttu-id="389a0-598">**Dispositions**</span><span class="sxs-lookup"><span data-stu-id="389a0-598">**Layouts**</span></span> | <span data-ttu-id="389a0-599">Pour empêcher toute redisposition inutile, le changement de <xref:System.Windows.Controls.Page.ShowsNavigationUI> n’invalide plus la disposition et n’engendre plus une autre passe de disposition.</span><span class="sxs-lookup"><span data-stu-id="389a0-599">To eliminate unnecessary re-layouts, changing the <xref:System.Windows.Controls.Page.ShowsNavigationUI> no longer invalidates layout or causes another layout pass.</span></span> | <span data-ttu-id="389a0-600">Si vous pensez que <xref:System.Windows.Controls.Page.ShowsNavigationUI> provoquera une autre passe de disposition, appelez <xref:System.Windows.UIElement.InvalidateVisual%2A> après avoir défini la propriété.</span><span class="sxs-lookup"><span data-stu-id="389a0-600">If you expect that changing <xref:System.Windows.Controls.Page.ShowsNavigationUI> will cause another layout pass, call <xref:System.Windows.UIElement.InvalidateVisual%2A> after you set the property.</span></span> |
| <span data-ttu-id="389a0-601">**Menus**</span><span class="sxs-lookup"><span data-stu-id="389a0-601">**Menus**</span></span> | <span data-ttu-id="389a0-602">Pour activer du texte ClearType dans les menus contextuels, des modifications ont été apportées à la classe <xref:System.Windows.Controls.ControlTemplate>, au contrôle <xref:System.Windows.Controls.MenuItem> et à d’autres contrôles.</span><span class="sxs-lookup"><span data-stu-id="389a0-602">To enable ClearType text in menu pop-ups, modifications were made to the <xref:System.Windows.Controls.ControlTemplate> class and to the <xref:System.Windows.Controls.MenuItem> control and other controls.</span></span> | <span data-ttu-id="389a0-603">Les applications ne doivent pas s’appuyer sur la structure visuelle des modèles de contrôle.</span><span class="sxs-lookup"><span data-stu-id="389a0-603">Applications should not rely on the visual structure of control templates.</span></span> <span data-ttu-id="389a0-604">Seules les parties nommées d’un <xref:System.Windows.Controls.ControlTemplate> font partie du contrat public.</span><span class="sxs-lookup"><span data-stu-id="389a0-604">Only named parts of a <xref:System.Windows.Controls.ControlTemplate> are part of the public contract.</span></span> <span data-ttu-id="389a0-605">Si une application doit rechercher un certain objet dans un <xref:System.Windows.Controls.ControlTemplate>, recherchez un type spécifique dans l’arborescence d’éléments visuels au lieu de vous reposer sur un emplacement fixe d’un objet dans l’arborescence.</span><span class="sxs-lookup"><span data-stu-id="389a0-605">If an application must find a certain object in a <xref:System.Windows.Controls.ControlTemplate>, search the visual tree for a specific type instead of relying on a fixed location of an object in the tree.</span></span> |
| <span data-ttu-id="389a0-606">**Navigation**</span><span class="sxs-lookup"><span data-stu-id="389a0-606">**Navigating**</span></span> | <span data-ttu-id="389a0-607">Si <xref:System.Windows.Controls.Frame> navigue directement jusqu’à un emplacement, la propriété <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> a la valeur `true` après la navigation initiale.</span><span class="sxs-lookup"><span data-stu-id="389a0-607">If a <xref:System.Windows.Controls.Frame> directly navigates to a location, the <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> property is `true` after the initial navigation.</span></span> <span data-ttu-id="389a0-608">Ce changement empêche des événements supplémentaires d’être déclenchés au cours des scénarios au démarrage.</span><span class="sxs-lookup"><span data-stu-id="389a0-608">This change prevents additional events from being raised during startup scenarios.</span></span> | <span data-ttu-id="389a0-609">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-609">None.</span></span> |
| <span data-ttu-id="389a0-610">**Fenêtres contextuelles**</span><span class="sxs-lookup"><span data-stu-id="389a0-610">**Pop-ups**</span></span> | <span data-ttu-id="389a0-611">Le délégué <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> peut désormais être appelé plusieurs fois pendant une passe de disposition au lieu d’une seule fois.</span><span class="sxs-lookup"><span data-stu-id="389a0-611">The <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegate can now be called multiple times during a layout pass instead of only once.</span></span> | <span data-ttu-id="389a0-612">Si votre délégué <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> calcule la position de <xref:System.Windows.Controls.Primitives.Popup> en fonction de sa position précédente, recalculez la position uniquement si les valeurs des paramètres `popupSize`, `targetSize` ou `offset` sont changées.</span><span class="sxs-lookup"><span data-stu-id="389a0-612">If your <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegate calculates the position of a <xref:System.Windows.Controls.Primitives.Popup> based on its previous position, recalculate the position only if the values of the `popupSize`, `targetSize`, or `offset` parameters change.</span></span> |
| <span data-ttu-id="389a0-613">**Valeurs de la propriété**</span><span class="sxs-lookup"><span data-stu-id="389a0-613">**Property values**</span></span> | <span data-ttu-id="389a0-614">La méthode <xref:System.Windows.DependencyObject.SetCurrentValue%2A> vous permet désormais d’affecter à une propriété une valeur effective même si elle continue de respecter les liaisons, les styles ou les déclencheurs qui affectent la propriété.</span><span class="sxs-lookup"><span data-stu-id="389a0-614">The <xref:System.Windows.DependencyObject.SetCurrentValue%2A> method now lets you set a property to an effective value, although it continues to respects any binding, style, or trigger that affects the property.</span></span> | <span data-ttu-id="389a0-615">Les auteurs de contrôles doivent utiliser <xref:System.Windows.DependencyObject.SetCurrentValue%2A> chaque fois que la valeur de propriété se transforme sous l’effet d’une quelque autre action, notamment une manipulation d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-615">Control authors should use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> whenever the property value changes as a side-effect of some other action, including user manipulation.</span></span> |
| <span data-ttu-id="389a0-616">**Zones de texte**</span><span class="sxs-lookup"><span data-stu-id="389a0-616">**Text boxes**</span></span> | <span data-ttu-id="389a0-617">Pour des raisons de sécurité, les méthodes <xref:System.Windows.Forms.TextBoxBase.Copy%2A> et <xref:System.Windows.Forms.TextBoxBase.Cut%2A> échouent silencieusement quand elles sont appelées en mode de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="389a0-617">For security considerations, the <xref:System.Windows.Forms.TextBoxBase.Copy%2A> and <xref:System.Windows.Forms.TextBoxBase.Cut%2A> methods silently fail when they are called in partial trust.</span></span><br><br><span data-ttu-id="389a0-618">De plus, l’exécution par programmation de la propriété <xref:System.Windows.Input.ApplicationCommands.Copy> ou <xref:System.Windows.Input.ApplicationCommands.Cut> sur un contrôle qui hérite de <xref:System.Windows.Controls.Primitives.TextBoxBase> est bloquée en mode de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="389a0-618">In addition, programmatic execution of the <xref:System.Windows.Input.ApplicationCommands.Copy> or <xref:System.Windows.Input.ApplicationCommands.Cut> property on a control that inherits from <xref:System.Windows.Controls.Primitives.TextBoxBase> will be blocked in partial trust.</span></span> <span data-ttu-id="389a0-619">Toutefois, les commandes copier et couper lancées par l’utilisateur, notamment le clic sur un bouton dont la propriété <xref:System.Windows.Controls.Primitives.ButtonBase.Command> est liée à l’une de ces commandes, fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="389a0-619">However, user-initiated copy and cut commands, such as clicking a button whose <xref:System.Windows.Controls.Primitives.ButtonBase.Command> property is bound to one of these commands, will work.</span></span> <span data-ttu-id="389a0-620">Les actions copier et couper standard effectuées par le biais de raccourcis clavier et le menu contextuel continuent de fonctionner comme avant en mode de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="389a0-620">Standard copy and cut through keyboard shortcuts and the context menu will still work as before in partial trust.</span></span> | <span data-ttu-id="389a0-621">Liez la commande <xref:System.Windows.Input.ApplicationCommands.Copy> ou <xref:System.Windows.Input.ApplicationCommands.Cut> à une action lancée par l’utilisateur (par exemple, quand il clique sur un bouton).</span><span class="sxs-lookup"><span data-stu-id="389a0-621">Bind the <xref:System.Windows.Input.ApplicationCommands.Copy> or <xref:System.Windows.Input.ApplicationCommands.Cut> command to a user-initiated action, such as clicking a button.</span></span> |

### <a name="graphics"></a><span data-ttu-id="389a0-622">Graphiques</span><span class="sxs-lookup"><span data-stu-id="389a0-622">Graphics</span></span>

<span data-ttu-id="389a0-623">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects> ; assemblys : PresentationFramework (dans PresentationFramework.dll), PresentationCore (dans PresentationCore.dll), WindowsBase (dans WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-623">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="389a0-624">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-624">Feature</span></span> | <span data-ttu-id="389a0-625">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-625">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-626">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-626">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-627">**Effets bitmap**</span><span class="sxs-lookup"><span data-stu-id="389a0-627">**Bitmap effects**</span></span> | <span data-ttu-id="389a0-628">Pour améliorer les performances, la classe <xref:System.Windows.Media.Effects.BitmapEffect> et les classes qui héritent de la classe <xref:System.Windows.Media.Effects.BitmapEffect>, même si elles sont encore présentes, sont désactivées.</span><span class="sxs-lookup"><span data-stu-id="389a0-628">To improve performance, the <xref:System.Windows.Media.Effects.BitmapEffect> class and the classes that inherit from the <xref:System.Windows.Media.Effects.BitmapEffect> class, although still present, are disabled.</span></span> <span data-ttu-id="389a0-629">L’effet est affiché à l’aide du pipeline de rendu accéléré par le matériel si les conditions suivantes sont remplies :</span><span class="sxs-lookup"><span data-stu-id="389a0-629">The effect will render by using the hardware-accelerated rendering pipeline if the following conditions are true:</span></span><br><br><span data-ttu-id="389a0-630">\* L’application utilise un <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> ou un <xref:System.Windows.Media.Effects.BlurBitmapEffect> qui a un jeu de propriétés de rayon inférieur à 100 DIU.</span><span class="sxs-lookup"><span data-stu-id="389a0-630">\* The application uses a <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> or a <xref:System.Windows.Media.Effects.BlurBitmapEffect> that has a radius property set less than 100 DIU.</span></span><br><span data-ttu-id="389a0-631">\* La carte vidéo sur l’ordinateur qui exécute l’application prend en charge Pixel Shader 2.0.</span><span class="sxs-lookup"><span data-stu-id="389a0-631">\* The video card on the computer that runs the application supports pixel shader 2.0.</span></span><br><br><span data-ttu-id="389a0-632">Si ces conditions ne sont pas réunies, un objet <xref:System.Windows.Media.Effects.BitmapEffect> n’aura aucun effet.</span><span class="sxs-lookup"><span data-stu-id="389a0-632">If these conditions are not met, a <xref:System.Windows.Media.Effects.BitmapEffect> object will have no effect.</span></span><br><br><span data-ttu-id="389a0-633">De même, Visual Studio produit un avertissement du compilateur quand il rencontre l’objet <xref:System.Windows.Media.Effects.BitmapEffect> ou une sous-classe.</span><span class="sxs-lookup"><span data-stu-id="389a0-633">Also, Visual Studio produces a compiler warning when it encounters the <xref:System.Windows.Media.Effects.BitmapEffect> object or a subclass.</span></span><br><br><span data-ttu-id="389a0-634">La méthode <xref:System.Windows.Media.DrawingContext.PushEffect%2A> est marquée comme obsolète.</span><span class="sxs-lookup"><span data-stu-id="389a0-634">The <xref:System.Windows.Media.DrawingContext.PushEffect%2A> method is marked obsolete.</span></span> | <span data-ttu-id="389a0-635">Cessez d’utiliser le <xref:System.Windows.Media.Effects.BitmapEffect> hérité et les classes dérivées. Utilisez à la place les nouvelles classes dérivées de <xref:System.Windows.Media.Effects.Effect> : <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect> et <xref:System.Windows.Media.Effects.ShaderEffect>.</span><span class="sxs-lookup"><span data-stu-id="389a0-635">Discontinue using the legacy <xref:System.Windows.Media.Effects.BitmapEffect> and derived classes and instead use the new classes derived from <xref:System.Windows.Media.Effects.Effect>: <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect>, and <xref:System.Windows.Media.Effects.ShaderEffect>.</span></span><br><br><span data-ttu-id="389a0-636">Vous pouvez également créer vos propres effets en héritant de la classe <xref:System.Windows.Media.Effects.ShaderEffect>.</span><span class="sxs-lookup"><span data-stu-id="389a0-636">You can also create your own effects by inheriting from the <xref:System.Windows.Media.Effects.ShaderEffect> class.</span></span> |
| <span data-ttu-id="389a0-637">**Trames bitmap**</span><span class="sxs-lookup"><span data-stu-id="389a0-637">**Bitmap frames**</span></span> | <span data-ttu-id="389a0-638">Les objets clonés <xref:System.Windows.Media.Imaging.BitmapFrame> reçoivent désormais les événements <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted> et <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed>.</span><span class="sxs-lookup"><span data-stu-id="389a0-638">The cloned <xref:System.Windows.Media.Imaging.BitmapFrame> objects now receive the <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, and <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> events.</span></span> <span data-ttu-id="389a0-639">Les images téléchargées à partir d’Internet et appliquées au contrôle <xref:System.Windows.Controls.Image> par le biais d’un <xref:System.Windows.Style> peuvent ainsi fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="389a0-639">This enables images that are downloaded from the Web and applied to the <xref:System.Windows.Controls.Image> control through a <xref:System.Windows.Style> to work correctly.</span></span><br><br><span data-ttu-id="389a0-640">Vous ne constaterez un changement dans le comportement que si toutes les conditions suivantes sont remplies :</span><span class="sxs-lookup"><span data-stu-id="389a0-640">You will see a change in behavior only if all of the following statements are true:</span></span><br><br><span data-ttu-id="389a0-641">\* Vous vous abonnez à l’événement <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted> ou <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed>.</span><span class="sxs-lookup"><span data-stu-id="389a0-641">\* You subscribe to the <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, or <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> event.</span></span><br><span data-ttu-id="389a0-642">\* La source de <xref:System.Windows.Media.Imaging.BitmapFrame> vient du web.</span><span class="sxs-lookup"><span data-stu-id="389a0-642">\* The source of the <xref:System.Windows.Media.Imaging.BitmapFrame> is from the Web.</span></span><br><span data-ttu-id="389a0-643">\* Le <xref:System.Windows.Media.Imaging.BitmapFrame> est cloné pendant que le téléchargement est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="389a0-643">\* The <xref:System.Windows.Media.Imaging.BitmapFrame> is cloned while the download is still in progress.</span></span> | <span data-ttu-id="389a0-644">Vérifiez l’émetteur dans le gestionnaire d’événements et intervenez uniquement si l’émetteur est le <xref:System.Windows.Media.Imaging.BitmapFrame> d’origine.</span><span class="sxs-lookup"><span data-stu-id="389a0-644">Check the sender in the event handler and take action only if the sender is the original <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span> |
| <span data-ttu-id="389a0-645">**Décodage d’images**</span><span class="sxs-lookup"><span data-stu-id="389a0-645">**Decoding images**</span></span> | <span data-ttu-id="389a0-646">Pour empêcher un problème de gestion de <xref:System.IO.IOException> quand des images ne peuvent pas être décodées, la classe <xref:System.Windows.Media.Imaging.BitmapSource> déclenche l’événement <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> quand elle ne décode pas une image.</span><span class="sxs-lookup"><span data-stu-id="389a0-646">To prevent an <xref:System.IO.IOException> from not being handled when images may not decode, the <xref:System.Windows.Media.Imaging.BitmapSource> class will raise the <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> event when it does not decode an image.</span></span> | <span data-ttu-id="389a0-647">Supprimez les gestions d’exceptions pour <xref:System.IO.IOException> et utilisez l’événement <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> pour vérifier l’échec du décodage.</span><span class="sxs-lookup"><span data-stu-id="389a0-647">Remove any exception handling for <xref:System.IO.IOException>, and use the <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> event to check for decode failure.</span></span> |

### <a name="input"></a><span data-ttu-id="389a0-648">Entrée</span><span class="sxs-lookup"><span data-stu-id="389a0-648">Input</span></span>

<span data-ttu-id="389a0-649">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input> ; assemblys : PresentationFramework (dans PresentationFramework.dll), PresentationCore (dans PresentationCore.dll), WindowsBase (dans WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-649">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="389a0-650">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-650">Feature</span></span> | <span data-ttu-id="389a0-651">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-651">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-652">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-652">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-653">**Liaison d’instances de commande**</span><span class="sxs-lookup"><span data-stu-id="389a0-653">**Binding command instances**</span></span> | <span data-ttu-id="389a0-654">Pour fournir un mécanisme permettant de lier des instances de commande basées sur le modèle Vue à des mouvements d’entrée basés sur la Vue, la classe <xref:System.Windows.Input.InputBinding> hérite désormais de <xref:System.Windows.Freezable> au lieu de <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="389a0-654">To provide a mechanism to bind View-Model-based command instances to View-based input gestures, the <xref:System.Windows.Input.InputBinding> class now inherits from <xref:System.Windows.Freezable> instead of <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="389a0-655">Les propriétés suivantes sont maintenant des propriétés de dépendance :</span><span class="sxs-lookup"><span data-stu-id="389a0-655">The following properties are now dependency properties:</span></span><br><br>* <xref:System.Windows.Input.InputBinding.Command><br>* <xref:System.Windows.Input.InputBinding.CommandParameter><br>* <xref:System.Windows.Input.InputBinding.CommandTarget><br><br><span data-ttu-id="389a0-656">Ce changement a les conséquences suivantes :</span><span class="sxs-lookup"><span data-stu-id="389a0-656">This change results in the following:</span></span><br><br><span data-ttu-id="389a0-657">\* Un objet <xref:System.Windows.Input.InputBinding> est maintenant figé quand il est enregistré au lieu de rester mutable.</span><span class="sxs-lookup"><span data-stu-id="389a0-657">\* An <xref:System.Windows.Input.InputBinding> object is now frozen when it is registered instead of remaining mutable.</span></span><br><span data-ttu-id="389a0-658">\* Vous ne pouvez pas accéder aux objets <xref:System.Windows.Input.InputBinding> au niveau de l’instance à partir de plusieurs threads, en raison des restrictions de la classe <xref:System.Windows.DependencyObject>.</span><span class="sxs-lookup"><span data-stu-id="389a0-658">\* You cannot access instance-level <xref:System.Windows.Input.InputBinding> objects from multiple threads, due to the restrictions of the <xref:System.Windows.DependencyObject> class.</span></span><br><span data-ttu-id="389a0-659">\* Vous ne pouvez pas muter de liaisons d’entrée au niveau de la classe après leur inscription, en raison des restrictions de la classe <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="389a0-659">\* You cannot mutate class-level input bindings after their registration, due to the restrictions of the <xref:System.Windows.Freezable> class.</span></span><br><span data-ttu-id="389a0-660">\* Vous ne pouvez pas spécifier de liaisons d’entrée sur les instances de commande créées dans un modèle Vue.</span><span class="sxs-lookup"><span data-stu-id="389a0-660">\* You cannot specify input bindings on command instances that are created in a View-Model.</span></span> | <span data-ttu-id="389a0-661">Créez des instances distinctes d’une classe <xref:System.Windows.Input.InputBinding> sur les threads séparés si les liaisons doivent être mutables, sinon figez-les.</span><span class="sxs-lookup"><span data-stu-id="389a0-661">Create separate instances of an <xref:System.Windows.Input.InputBinding> class on separate threads if bindings are to be mutable, or freeze them otherwise.</span></span> <span data-ttu-id="389a0-662">Ne mutez pas un <xref:System.Windows.Input.InputBinding> statique de niveau classe après son inscription.</span><span class="sxs-lookup"><span data-stu-id="389a0-662">Do not mutate a class-level static <xref:System.Windows.Input.InputBinding> after it has been registered.</span></span> |
| <span data-ttu-id="389a0-663">**Applications du navigateur**</span><span class="sxs-lookup"><span data-stu-id="389a0-663">**Browser applications**</span></span> | <span data-ttu-id="389a0-664">Les applications de navigateur WPF (.XBAP) traitent maintenant de la même manière les événements de touche que les applications WPF autonomes pour que les objets reçoivent des événements routés de touche dans l’ordre correct.</span><span class="sxs-lookup"><span data-stu-id="389a0-664">WPF Browser applications (.XBAP) now process key events just like stand-alone WPF applications so that objects receive routed key events in the correct order.</span></span> | <span data-ttu-id="389a0-665">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-665">None.</span></span> |
| <span data-ttu-id="389a0-666">**Combinaisons de touches mortes**</span><span class="sxs-lookup"><span data-stu-id="389a0-666">**Dead key combinations**</span></span> | <span data-ttu-id="389a0-667">WPF obscurcit les touches mortes, qui ne produisent aucun caractère visible mais indiquent à la place que la touche sera combinée avec la touche suivante pour produire un caractère.</span><span class="sxs-lookup"><span data-stu-id="389a0-667">WPF obfuscates dead keys, which produce no visible character, but instead indicates that the key is to be combined with the next letter key to produce one character.</span></span> <span data-ttu-id="389a0-668">Les événements de saisie, tels que <xref:System.Windows.Input.Keyboard.KeyDownEvent>, indiquent à quel moment une touche est une touche morte en affectant à la propriété <xref:System.Windows.Input.KeyEventArgs.Key> la valeur <xref:System.Windows.Input.Key>.</span><span class="sxs-lookup"><span data-stu-id="389a0-668">The key input events, such as the <xref:System.Windows.Input.Keyboard.KeyDownEvent> event, report when a key is a dead key by setting the <xref:System.Windows.Input.KeyEventArgs.Key> property to the <xref:System.Windows.Input.Key> value.</span></span> <span data-ttu-id="389a0-669">Ce comportement est connu car les applications ne projettent généralement pas de répondre à l’entrée au clavier qui crée un caractère combiné.</span><span class="sxs-lookup"><span data-stu-id="389a0-669">This is usually expected behavior because applications usually do not intend to respond to keyboard input that creates a combined character.</span></span> | <span data-ttu-id="389a0-670">Les applications qui s’attendent à lire des touches faisant partie des caractères combinés peuvent obtenir la touche maintenant obscurcie à l’aide de la propriété <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey>.</span><span class="sxs-lookup"><span data-stu-id="389a0-670">Applications that expect to read keys that were part of combined characters can get the now obfuscated key by using the <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey> property.</span></span> |
| <span data-ttu-id="389a0-671">**Gestionnaire du focus**</span><span class="sxs-lookup"><span data-stu-id="389a0-671">**Focus manager**</span></span> | <span data-ttu-id="389a0-672">Quand la méthode <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> est passée à un élément dont la propriété jointe [IsFocusScope](xref:System.Windows.Input.FocusManager.IsFocusScope%2A) a la valeur `true`, la méthode retourne un élément qui constitue le dernier élément qui a le focus du clavier au sein de cette portée de focus, si et seulement si l’élément retourné appartient au même objet <xref:System.Windows.PresentationSource> que l’élément qui est passé à la méthode.</span><span class="sxs-lookup"><span data-stu-id="389a0-672">When the <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> method is passed an element that has the [IsFocusScope](xref:System.Windows.Input.FocusManager.IsFocusScope%2A) attached property set to `true`, the method returns an element that is the last keyboard-focused element within that focus scope if and only if the returned element belongs to the same <xref:System.Windows.PresentationSource> object as the element that is passed to the method.</span></span> | <span data-ttu-id="389a0-673">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-673">None.</span></span> |

### <a name="ui-automation"></a><span data-ttu-id="389a0-674">Automation de l'interface utilisateur</span><span class="sxs-lookup"><span data-stu-id="389a0-674">UI Automation</span></span>

<span data-ttu-id="389a0-675">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input> ; assemblys : PresentationFramework (dans PresentationFramework.dll), PresentationCore (dans PresentationCore.dll), UIAutomationProvider (dans UIAutomationProvider.dll), WindowsBase (dans WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-675">Namespace: <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), UIAutomationProvider (in UIAutomationProvider.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="389a0-676">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-676">Feature</span></span> | <span data-ttu-id="389a0-677">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-677">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-678">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-678">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-679">**Hiérarchie de classes de vues**</span><span class="sxs-lookup"><span data-stu-id="389a0-679">**Class hierarchy of views**</span></span> | <span data-ttu-id="389a0-680">Les classes <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> et <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> héritent de <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> au lieu de <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="389a0-680">The <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> and <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> classes inherit from <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> instead of <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>.</span></span> | <span data-ttu-id="389a0-681">Si vous héritez des classes <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> et substituez la méthode <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A>, envisagez de retourner un objet qui hérite de la nouvelle classe <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="389a0-681">If you inherit from the <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> classes and override the <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A> method, consider returning an object that inherits from the new <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer> class.</span></span> |
| <span data-ttu-id="389a0-682">**Conteneurs hors écran**</span><span class="sxs-lookup"><span data-stu-id="389a0-682">**Containers off screen**</span></span> | <span data-ttu-id="389a0-683">Pour corriger une valeur de retour incorrecte, la méthode <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> retourne désormais correctement `false` pour les conteneurs d’éléments qui sortent de l’affichage par défilement.</span><span class="sxs-lookup"><span data-stu-id="389a0-683">To fix an incorrect return value, the <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> method now correctly returns `false` for item containers that are scrolled out of view.</span></span> <span data-ttu-id="389a0-684">De même, la valeur de la méthode n’est pas affectée par l’occlusion par d’autres fenêtres, ou par le fait que l’élément est visible ou non, sur un écran spécifique.</span><span class="sxs-lookup"><span data-stu-id="389a0-684">Also, the value of the method is not affected by occlusion by other windows, or by whether the element is visible on a specific monitor.</span></span> | <span data-ttu-id="389a0-685">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-685">None.</span></span> |
| <span data-ttu-id="389a0-686">**Menus et objets enfants**</span><span class="sxs-lookup"><span data-stu-id="389a0-686">**Menus and child objects**</span></span> | <span data-ttu-id="389a0-687">Pour activer UI Automation pour les menus qui contiennent des enfants différents des objets <xref:System.Windows.Controls.MenuItem>, la méthode <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> retourne maintenant l’objet <xref:System.Windows.Automation.Peers.AutomationPeer> d’un objet <xref:System.Windows.UIElement> enfant, au lieu d’un objet <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="389a0-687">To enable UI automation of menus that contain children other than <xref:System.Windows.Controls.MenuItem> objects, the <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> method now returns the <xref:System.Windows.Automation.Peers.AutomationPeer> object of a child <xref:System.Windows.UIElement> object, instead of a <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer> object.</span></span> | <span data-ttu-id="389a0-688">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-688">None.</span></span> |
| <span data-ttu-id="389a0-689">**Nouvelles interfaces et nouvel assembly**</span><span class="sxs-lookup"><span data-stu-id="389a0-689">**New interfaces and assembly**</span></span> | <span data-ttu-id="389a0-690">Pour permettre aux nouvelles fonctions d’utiliser UI Automation, les interfaces suivantes ont été ajoutées :</span><span class="sxs-lookup"><span data-stu-id="389a0-690">To enable new features for UI automation, the following interfaces were added:</span></span><br><br>* <xref:System.Windows.Automation.Provider.IItemContainerProvider><br>* <xref:System.Windows.Automation.Provider.ISynchronizedInputProvider><br>* <xref:System.Windows.Automation.Provider.IVirtualizedItemProvider> | <span data-ttu-id="389a0-691">Tout projet qui génère des homologues Automation WPF doit ajouter une référence explicite à UIAutomationProvider.dll.</span><span class="sxs-lookup"><span data-stu-id="389a0-691">Any project that builds WPF automation peers must add an explicit reference to UIAutomationProvider.dll.</span></span> |
| <span data-ttu-id="389a0-692">**Types Thumb**</span><span class="sxs-lookup"><span data-stu-id="389a0-692">**Thumbs**</span></span> | <span data-ttu-id="389a0-693">La méthode <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> retourne une valeur au lieu de la valeur Null.</span><span class="sxs-lookup"><span data-stu-id="389a0-693">The <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> method returns a value instead of null.</span></span> <span data-ttu-id="389a0-694">Les contrôles comme <xref:System.Windows.Controls.GridSplitter> qui héritent de la classe <xref:System.Windows.Controls.Primitives.Thumb> signalent donc un nom à UI Automation.</span><span class="sxs-lookup"><span data-stu-id="389a0-694">Therefore, controls such as <xref:System.Windows.Controls.GridSplitter> that inherit from the <xref:System.Windows.Controls.Primitives.Thumb> class will report a name to UI Automation.</span></span> | <span data-ttu-id="389a0-695">Aucun.</span><span class="sxs-lookup"><span data-stu-id="389a0-695">None.</span></span> |
| <span data-ttu-id="389a0-696">**Éléments virtualisés**</span><span class="sxs-lookup"><span data-stu-id="389a0-696">**Virtualized elements**</span></span> | <span data-ttu-id="389a0-697">Pour améliorer les performances, la méthode <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> retourne uniquement les objets enfants qui sont réellement dans l’arborescence d’éléments visuels, au lieu de tous les objets enfants, qu’ils soient virtualisés ou non.</span><span class="sxs-lookup"><span data-stu-id="389a0-697">To improve performance, the <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> method returns only the child objects that are actually in the visual tree, instead of all child objects, regardless of whether they are virtualized.</span></span> | <span data-ttu-id="389a0-698">Utilisez <xref:System.Windows.Automation.ItemContainerPattern> pour itérer au sein de tous les éléments d’un <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>.</span><span class="sxs-lookup"><span data-stu-id="389a0-698">Use <xref:System.Windows.Automation.ItemContainerPattern> to iterate over all items of an <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>.</span></span> |

### <a name="xaml"></a><span data-ttu-id="389a0-699">XAML</span><span class="sxs-lookup"><span data-stu-id="389a0-699">XAML</span></span>

<span data-ttu-id="389a0-700">Espaces de noms : <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup> ; assemblys : PresentationFramework (dans PresentationFramework.dll), PresentationCore (dans PresentationCore.dll), WindowsBase (dans WindowsBase.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-700">Namespaces: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup>; assemblies: PresentationFramework (in PresentationFramework.dll), PresentationCore (in PresentationCore.dll), WindowsBase (in WindowsBase.dll)</span></span>

| <span data-ttu-id="389a0-701">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-701">Feature</span></span> | <span data-ttu-id="389a0-702">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-702">Differences from 3.5 SP1</span></span> | <span data-ttu-id="389a0-703">Changements recommandés</span><span class="sxs-lookup"><span data-stu-id="389a0-703">Recommended changes</span></span> |
| ------- | ------------------------ | ------------------- |
| <span data-ttu-id="389a0-704">**Extension de balisage**</span><span class="sxs-lookup"><span data-stu-id="389a0-704">**Markup extension**</span></span> | <span data-ttu-id="389a0-705">WPF utilise maintenant toujours correctement la valeur de la méthode <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> au lieu de retourner l’objet <xref:System.Windows.Markup.MarkupExtension> dans certains cas quand une extension de balisage est utilisée pour définir une propriété ou créer un élément dans une collection.</span><span class="sxs-lookup"><span data-stu-id="389a0-705">WPF now correctly always uses the value from the <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> method instead of returning the <xref:System.Windows.Markup.MarkupExtension> object in certain cases when a markup extension is used to set a property or to create an item in a collection.</span></span> <span data-ttu-id="389a0-706">Une extension de balisage peut se retourner elle-même dans certains cas.</span><span class="sxs-lookup"><span data-stu-id="389a0-706">A markup extension might return itself in some cases.</span></span> | <span data-ttu-id="389a0-707">Si votre application accède à une ressource qui a retourné un objet <xref:System.Windows.Markup.MarkupExtension> dans les versions antérieures, référencez l’objet retourné de <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, plutôt que de l’objet <xref:System.Windows.Markup.MarkupExtension>.</span><span class="sxs-lookup"><span data-stu-id="389a0-707">If your application accesses a resource that returned a <xref:System.Windows.Markup.MarkupExtension> object in earlier versions, reference the object that is returned from <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, instead of the <xref:System.Windows.Markup.MarkupExtension> object.</span></span> |
| <span data-ttu-id="389a0-708">**Attributs d’analyse**</span><span class="sxs-lookup"><span data-stu-id="389a0-708">**Parsing attributes**</span></span> | <span data-ttu-id="389a0-709">Les attributs dans XAML peuvent désormais avoir un seul point.</span><span class="sxs-lookup"><span data-stu-id="389a0-709">Attributes in XAML can now have only one period.</span></span> <span data-ttu-id="389a0-710">Les exemples suivants sont valides :</span><span class="sxs-lookup"><span data-stu-id="389a0-710">For example, the following are valid:</span></span><br><br><span data-ttu-id="389a0-711">`<Button Background="Red"/>` (aucun point)</span><span class="sxs-lookup"><span data-stu-id="389a0-711">`<Button Background="Red"/>` (no periods)</span></span><br><br><span data-ttu-id="389a0-712">`<Button Button.Background = "Red"/>` (un point)</span><span class="sxs-lookup"><span data-stu-id="389a0-712">`<Button Button.Background = "Red"/>` (one period)</span></span><br><br><span data-ttu-id="389a0-713">L’exemple suivant n’est plus valide :</span><span class="sxs-lookup"><span data-stu-id="389a0-713">The following is no longer valid:</span></span><br><br><span data-ttu-id="389a0-714">`<Button Control.Button.Background = "Red"/>` (plusieurs points)</span><span class="sxs-lookup"><span data-stu-id="389a0-714">`<Button Control.Button.Background = "Red"/>` (more than one period)</span></span> | <span data-ttu-id="389a0-715">Attributs XAML corrects qui ont plusieurs points.</span><span class="sxs-lookup"><span data-stu-id="389a0-715">Correct XAML attributes that have more than one period.</span></span> |

## <a name="xml"></a><span data-ttu-id="389a0-716">XML</span><span class="sxs-lookup"><span data-stu-id="389a0-716">XML</span></span>

<span data-ttu-id="389a0-717">Les lignes de cette table décrivent les améliorations apportées aux fonctionnalités qui présentaient précédemment des limitations ou d’autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="389a0-717">The rows in this table describe improvements to features that previously had limitations or other issues.</span></span>

### <a name="schema-and-transforms"></a><span data-ttu-id="389a0-718">Schéma et transformations</span><span class="sxs-lookup"><span data-stu-id="389a0-718">Schema and transforms</span></span>

<span data-ttu-id="389a0-719">Espaces de noms : <xref:System.Xml.Linq> ; <xref:System.Xml.Schema>, <xref:System.Xml.XPath> ; assemblys : System.Xml (dans System.Xml.dll), System.Xml.Linq (dans System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-719">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="389a0-720">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-720">Feature</span></span> | <span data-ttu-id="389a0-721">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-721">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-722">**Schémas caméléons**</span><span class="sxs-lookup"><span data-stu-id="389a0-722">**Chameleon schemas**</span></span> | <span data-ttu-id="389a0-723">Pour empêcher toute altération des données, les schémas caméléons sont désormais correctement clonés quand ils sont inclus avec plusieurs schémas.</span><span class="sxs-lookup"><span data-stu-id="389a0-723">To prevent data corruption, chameleon schemas are now cloned correctly when they are included with multiple schemas.</span></span><br><br><span data-ttu-id="389a0-724">Les schémas caméléons sont des schémas qui n’ont pas d’espace de noms cible, et quand ils sont inclus dans un autre XSD, ils utilisent l’espace de noms cible du schéma importateur.</span><span class="sxs-lookup"><span data-stu-id="389a0-724">Chameleon schemas are schemas that do not have a target namespace, and when they are included in another XSD, they take on the target namespace of the importing schema.</span></span> <span data-ttu-id="389a0-725">Ils sont souvent utilisés pour inclure des types communs dans un schéma.</span><span class="sxs-lookup"><span data-stu-id="389a0-725">They are often used to include common types into a schema.</span></span> |
| <span data-ttu-id="389a0-726">**Fonctions ID**</span><span class="sxs-lookup"><span data-stu-id="389a0-726">**ID functions**</span></span> | <span data-ttu-id="389a0-727">La [fonction id](/sql/xquery/functions-on-sequences-id) XSLT retourne désormais la valeur correcte au lieu de la valeur Null quand un objet <xref:System.Xml.XmlReader> est passé à un XLST.</span><span class="sxs-lookup"><span data-stu-id="389a0-727">The XSLT [id function](/sql/xquery/functions-on-sequences-id) now returns the correct value instead of null when an <xref:System.Xml.XmlReader> object is passed to an XLST.</span></span><br><br><span data-ttu-id="389a0-728">Si l’utilisateur créait un objet <xref:System.Xml.XmlReader> à partir d’une classe LINQ to XML à l’aide de la méthode <xref:System.Xml.Linq.XNode.CreateReader%2A> et que cet objet <xref:System.Xml.XmlReader> était passé à un XSLT, toutes les instances de la fonction `id` dans le XSLT retournaient précédemment la valeur Null.</span><span class="sxs-lookup"><span data-stu-id="389a0-728">If the user created an <xref:System.Xml.XmlReader> object from a LINQ to XML class by using the <xref:System.Xml.Linq.XNode.CreateReader%2A> method, and this <xref:System.Xml.XmlReader> object was passed to an XSLT, any instances of the `id` function in the XSLT previously returned null.</span></span> <span data-ttu-id="389a0-729">Cette valeur de retour n’est pas autorisée pour la fonction `id`.</span><span class="sxs-lookup"><span data-stu-id="389a0-729">This is not an allowed return value for the `id` function.</span></span> |
| <span data-ttu-id="389a0-730">**Attribut d’espace de noms**</span><span class="sxs-lookup"><span data-stu-id="389a0-730">**Namespace attribute**</span></span> | <span data-ttu-id="389a0-731">Pour empêcher toute altération des données, un objet <xref:System.Xml.XPath.XPathNavigator> retourne désormais correctement le nom local de l’attribut `x:xmlns`.</span><span class="sxs-lookup"><span data-stu-id="389a0-731">To prevent data corruption, an <xref:System.Xml.XPath.XPathNavigator> object now returns the local name of the `x:xmlns` attribute correctly.</span></span> |
| <span data-ttu-id="389a0-732">**Déclarations d’espaces de noms**</span><span class="sxs-lookup"><span data-stu-id="389a0-732">**Namespace declarations**</span></span> | <span data-ttu-id="389a0-733">Un objet <xref:System.Xml.XmlReader> sur une sous-arborescence ne crée plus de déclarations d’espace de noms en double dans un élément XML.</span><span class="sxs-lookup"><span data-stu-id="389a0-733">An <xref:System.Xml.XmlReader> object on a sub-tree no longer creates duplicate namespace declarations within one XML element.</span></span> |
| <span data-ttu-id="389a0-734">**Validation de schéma**</span><span class="sxs-lookup"><span data-stu-id="389a0-734">**Schema validation**</span></span> | <span data-ttu-id="389a0-735">Pour empêcher toute erreur de validation de schéma, la classe <xref:System.Xml.Schema.XmlSchemaSet> permet aux schémas XSD d’être compilés de façon correcte et cohérente.</span><span class="sxs-lookup"><span data-stu-id="389a0-735">To prevent erroneous schema validation, the <xref:System.Xml.Schema.XmlSchemaSet> class allows for XSD schemas to be compiled correctly and consistently.</span></span> <span data-ttu-id="389a0-736">Ces schémas peuvent inclure d’autres schémas ; par exemple, `A.xsd` peut inclure `B.xsd`, qui peut inclure `C.xsd`.</span><span class="sxs-lookup"><span data-stu-id="389a0-736">These schemas can include other schemas; for example, `A.xsd` can include `B.xsd`, which can include `C.xsd`.</span></span> <span data-ttu-id="389a0-737">Quand l’un d’eux est compilé, ce graphique de dépendances est parcouru.</span><span class="sxs-lookup"><span data-stu-id="389a0-737">Compiling any one of these causes this graph of dependencies to be traversed.</span></span> |
| <span data-ttu-id="389a0-738">**Fonctions de script**</span><span class="sxs-lookup"><span data-stu-id="389a0-738">**Script functions**</span></span> | <span data-ttu-id="389a0-739">La [fonction function-available](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) ne retourne plus incorrectement une valeur `false` quand la fonction est réellement disponible.</span><span class="sxs-lookup"><span data-stu-id="389a0-739">The [function-available function](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) no longer incorrectly returns `false` when the function is actually available.</span></span> |
| <span data-ttu-id="389a0-740">**URI**</span><span class="sxs-lookup"><span data-stu-id="389a0-740">**URIs**</span></span> | <span data-ttu-id="389a0-741">La méthode <xref:System.Xml.Linq.XElement.Load%2A> retourne maintenant le BaseURI correct dans les requêtes LINQ.</span><span class="sxs-lookup"><span data-stu-id="389a0-741">The <xref:System.Xml.Linq.XElement.Load%2A> method now returns the correct BaseURI in LINQ queries.</span></span> |

### <a name="validation"></a><span data-ttu-id="389a0-742">Validation</span><span class="sxs-lookup"><span data-stu-id="389a0-742">Validation</span></span>

<span data-ttu-id="389a0-743">Espaces de noms : <xref:System.Xml.Linq> ; <xref:System.Xml.Schema>, <xref:System.Xml.XPath> ; assemblys : System.Xml (dans System.Xml.dll), System.Xml.Linq (dans System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-743">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="389a0-744">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-744">Feature</span></span> | <span data-ttu-id="389a0-745">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-745">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-746">**Résolveurs d’espace de noms**</span><span class="sxs-lookup"><span data-stu-id="389a0-746">**Namespace resolvers**</span></span> | <span data-ttu-id="389a0-747">La méthode <xref:System.Xml.XmlReader.ReadContentAs%2A> n’ignore plus le résolveur <xref:System.Xml.IXmlNamespaceResolver> qui lui est passé.</span><span class="sxs-lookup"><span data-stu-id="389a0-747">The <xref:System.Xml.XmlReader.ReadContentAs%2A> method no longer ignores the <xref:System.Xml.IXmlNamespaceResolver> resolver passed to it.</span></span><br><br><span data-ttu-id="389a0-748">Dans les versions antérieures, le résolveur d’espace de noms spécifié était ignoré, et le <xref:System.Xml.XmlReader> était utilisé à la place.</span><span class="sxs-lookup"><span data-stu-id="389a0-748">In previous versions, the specified namespace resolver was ignored, and the <xref:System.Xml.XmlReader> was used instead.</span></span> |
| <span data-ttu-id="389a0-749">**Espace blanc**</span><span class="sxs-lookup"><span data-stu-id="389a0-749">**White space**</span></span> | <span data-ttu-id="389a0-750">Pour éviter toute perte de données quand vous créez un lecteur, la méthode <xref:System.Xml.XmlReader.Create%2A> ne supprime plus l’espace blanc.</span><span class="sxs-lookup"><span data-stu-id="389a0-750">To prevent data loss when you are creating a reader, the <xref:System.Xml.XmlReader.Create%2A> method no longer discards significant white space.</span></span><br><br><span data-ttu-id="389a0-751">La validation XML reconnaît le mode de contenu mixte, où du texte peut être inséré dans le balisage XML.</span><span class="sxs-lookup"><span data-stu-id="389a0-751">XML validation recognizes mixed-content mode, where text can be intermixed with XML markup.</span></span> <span data-ttu-id="389a0-752">En mode mixte, tout espace blanc est significatif et doit être signalé.</span><span class="sxs-lookup"><span data-stu-id="389a0-752">In mixed mode, all white space is significant and should be reported.</span></span> |

### <a name="writing"></a><span data-ttu-id="389a0-753">Écriture</span><span class="sxs-lookup"><span data-stu-id="389a0-753">Writing</span></span>

<span data-ttu-id="389a0-754">Espaces de noms : <xref:System.Xml.Linq> ; <xref:System.Xml.Schema>, <xref:System.Xml.XPath> ; assemblys : System.Xml (dans System.Xml.dll), System.Xml.Linq (dans System.Xml.Linq.dll)</span><span class="sxs-lookup"><span data-stu-id="389a0-754">Namespaces: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; assemblies: System.Xml (in System.Xml.dll), System.Xml.Linq (in System.Xml.Linq.dll)</span></span>

| <span data-ttu-id="389a0-755">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="389a0-755">Feature</span></span> | <span data-ttu-id="389a0-756">Différences par rapport à la version 3.5 SP1</span><span class="sxs-lookup"><span data-stu-id="389a0-756">Differences from 3.5 SP1</span></span> |
| ------- | ------------------------ |
| <span data-ttu-id="389a0-757">**Références d’entité**</span><span class="sxs-lookup"><span data-stu-id="389a0-757">**Entity references**</span></span> | <span data-ttu-id="389a0-758">Pour éviter toute altération des données, les références d’entité ne sont plus décomposées deux fois en entités dans les attributs XML.</span><span class="sxs-lookup"><span data-stu-id="389a0-758">To prevent data corruption, entity references are no longer entitized twice in XML attributes.</span></span><br><br><span data-ttu-id="389a0-759">Si l’utilisateur essayait d’écrire une entité dans un attribut `xmlns`, `xml:lang` ou `xml:space` à l’aide de la méthode <xref:System.Xml.XmlWriter.WriteEntityRef%2A>, l’entité était décomposée deux fois en entités dans la sortie, ce qui altérait les données.</span><span class="sxs-lookup"><span data-stu-id="389a0-759">If the user tried to write an entity into an `xmlns` attribute or into an `xml:lang` or `xml:space` attribute by using the <xref:System.Xml.XmlWriter.WriteEntityRef%2A> method, the entity was entitized twice in the output, therefore corrupting the data.</span></span> |
| <span data-ttu-id="389a0-760">**Gestion du retour à la ligne**</span><span class="sxs-lookup"><span data-stu-id="389a0-760">**New line handling**</span></span> | <span data-ttu-id="389a0-761">Pour éviter toute altération des données, les objets <xref:System.Xml.XmlWriter> respectent l’option <xref:System.Xml.NewLineHandling>.</span><span class="sxs-lookup"><span data-stu-id="389a0-761">To prevent data corruption, <xref:System.Xml.XmlWriter> objects respect the <xref:System.Xml.NewLineHandling> option.</span></span> |

## <a name="see-also"></a><span data-ttu-id="389a0-762">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="389a0-762">See also</span></span>

### <a name="reference"></a><span data-ttu-id="389a0-763">Référence</span><span class="sxs-lookup"><span data-stu-id="389a0-763">Reference</span></span>

- [<span data-ttu-id="389a0-764">Nouveaux types et membres dans le .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="389a0-764">New Types and Members in the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff641764%28v=vs.100%29)

### <a name="concepts"></a><span data-ttu-id="389a0-765">Concepts</span><span class="sxs-lookup"><span data-stu-id="389a0-765">Concepts</span></span>

- [<span data-ttu-id="389a0-766">Guide de migration vers le .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="389a0-766">Migration Guide to the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ff657133%28v=vs.100%29)
- [<span data-ttu-id="389a0-767">Nouveautés du .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="389a0-767">What's New in the .NET Framework 4</span></span>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms171868%28v=vs.100%29)
- [<span data-ttu-id="389a0-768">Compatibilité de versions dans le .NET Framework</span><span class="sxs-lookup"><span data-stu-id="389a0-768">Version Compatibility in the .NET Framework</span></span>](../../../docs/framework/migration-guide/version-compatibility.md)
- [<span data-ttu-id="389a0-769">Migration de solutions Office vers le .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="389a0-769">Migrating Office Solutions to the .NET Framework 4</span></span>](/visualstudio/vsto/migrating-office-solutions-to-the-dotnet-framework-4-or-later)

### <a name="other-resources"></a><span data-ttu-id="389a0-770">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="389a0-770">Other resources</span></span>

- [<span data-ttu-id="389a0-771">Éléments obsolètes dans la bibliothèque de classes .NET Framework</span><span class="sxs-lookup"><span data-stu-id="389a0-771">What's Obsolete in the .NET Framework Class Library</span></span>](../whats-new/whats-obsolete.md)
