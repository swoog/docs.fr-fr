---
title: Configuration de HTTP et HTTPS - WCF
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: 86705a4f8daa327c442ac6c53c9b44c5b5c5c2ad
ms.sourcegitcommit: d21bee9dbd32b9540ad30f9d0e2e874227040be3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59427173"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="eb439-102">Configuration de HTTP et HTTPS</span><span class="sxs-lookup"><span data-stu-id="eb439-102">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="eb439-103">Les services et les clients WCF peuvent communiquer sur HTTP et HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eb439-103">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="eb439-104">Les paramètres HTTP/HTTPS sont configurés à l'aide d'IIS (Internet Information Services) ou d'un outil de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="eb439-104">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="eb439-105">Lorsqu'un service WCF est hébergé sous IIS, des paramètres HTTP ou HTTPS peuvent être configurés dans IIS (avec l'outil inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="eb439-105">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="eb439-106">Si un service WCF est auto-hébergé, les paramètres HTTP ou HTTPS sont configurés à l'aide d'un outil de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="eb439-106">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="eb439-107">Au minimum, que vous souhaitez configurer une inscription d’URL et ajouter une exception de pare-feu pour l’URL de votre service utilisera.</span><span class="sxs-lookup"><span data-stu-id="eb439-107">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="eb439-108">Vous pouvez configurer ces paramètres avec l’outil Netsh.exe.</span><span class="sxs-lookup"><span data-stu-id="eb439-108">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="eb439-109">Configuration des réservations d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="eb439-109">Configuring namespace reservations</span></span>

<span data-ttu-id="eb439-110">La réservation d'espace de noms assigne les droits d'une partie de l'espace de noms de l'URL HTTP à un groupe d'utilisateurs particulier.</span><span class="sxs-lookup"><span data-stu-id="eb439-110">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="eb439-111">Une réservation leur donne le droit de créer des services qui écoutent sur cette partie de l'espace de noms.</span><span class="sxs-lookup"><span data-stu-id="eb439-111">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="eb439-112">Les réservations sont des préfixes d’URL, ce qui signifie que la réservation couvre tous les sous-chemins du chemin d’accès de la réservation.</span><span class="sxs-lookup"><span data-stu-id="eb439-112">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="eb439-113">Les réservations d'espace de noms autorisent deux façons d'utiliser des caractères génériques.</span><span class="sxs-lookup"><span data-stu-id="eb439-113">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="eb439-114">La documentation de l’API du serveur HTTP décrit le [ordre de résolution entre les revendications d’espace de noms qui impliquent des caractères génériques](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="eb439-114">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="eb439-115">Une application exécutée peut créer une demande similaire pour ajouter des inscriptions d'espace de noms.</span><span class="sxs-lookup"><span data-stu-id="eb439-115">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="eb439-116">Les inscriptions et les réservations rivalisent pour les parties de l'espace de noms.</span><span class="sxs-lookup"><span data-stu-id="eb439-116">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="eb439-117">Une réservation peut avoir la priorité sur une inscription selon l’ordre indiqué dans le [ordre de résolution entre les revendications d’espace de noms qui impliquent des caractères génériques](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="eb439-117">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="eb439-118">Dans ce cas, la réservation empêche à l'application courante de recevoir des demandes.</span><span class="sxs-lookup"><span data-stu-id="eb439-118">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="eb439-119">L’exemple suivant utilise l’outil Netsh.exe :</span><span class="sxs-lookup"><span data-stu-id="eb439-119">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="eb439-120">Cette commande ajoute une réservation d’URL pour l’espace de noms URL spécifié pour le compte domaine\utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eb439-120">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="eb439-121">Pour plus d’informations sur l’utilisation de la commande netsh, tapez `netsh http add urlacl /?` dans une invite de commandes, appuyez sur ENTRÉE.</span><span class="sxs-lookup"><span data-stu-id="eb439-121">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="eb439-122">Configuration d’une exception de pare-feu</span><span class="sxs-lookup"><span data-stu-id="eb439-122">Configuring a firewall exception</span></span>

<span data-ttu-id="eb439-123">Lors de l'auto-hébergement d'un service WCF qui communique sur HTTP, une exception doit être ajoutée à la configuration du pare-feu pour autoriser les connexions entrantes à l'aide d'une URL particulière.</span><span class="sxs-lookup"><span data-stu-id="eb439-123">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="eb439-124">Configuration de certificats SSL</span><span class="sxs-lookup"><span data-stu-id="eb439-124">Configuring SSL certificates</span></span>

<span data-ttu-id="eb439-125">Le protocole SSL (Secure Sockets Layer) utilise des certificats sur le client et le serveur pour stocker les clés de chiffrement.</span><span class="sxs-lookup"><span data-stu-id="eb439-125">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="eb439-126">Le serveur fournit son certificat SSL à l'établissement d'une connexion afin que le client puisse vérifier son identité.</span><span class="sxs-lookup"><span data-stu-id="eb439-126">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="eb439-127">Le serveur peut également demander un certificat au client pour permettre une authentification mutuelle des deux sens de connexion.</span><span class="sxs-lookup"><span data-stu-id="eb439-127">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="eb439-128">Les certificats sont stockés dans un magasin centralisé en fonction de l'adresse IP et du numéro de port de la connexion.</span><span class="sxs-lookup"><span data-stu-id="eb439-128">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="eb439-129">L'adresse IP 0.0.0.0 spéciale correspond à l'adresse IP de l'ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="eb439-129">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="eb439-130">Notez que le magasin de certificats ne distinguer des URL basées sur le chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="eb439-130">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="eb439-131">Les services ayant la même combinaison d'adresse IP et de port doivent partager les mêmes certificats même si le chemin d'accès des services dans l'URL est différent.</span><span class="sxs-lookup"><span data-stu-id="eb439-131">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="eb439-132">Pour obtenir des instructions détaillées, consultez [Comment : Configurer un Port avec un certificat SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="eb439-132">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="eb439-133">Configuration de la liste d'écoutes IP</span><span class="sxs-lookup"><span data-stu-id="eb439-133">Configuring the IP Listen List</span></span>

<span data-ttu-id="eb439-134">L'API du serveur HTTP crée une liaison uniquement avec une adresse IP et un port lorsqu'un utilisateur inscrit une URL.</span><span class="sxs-lookup"><span data-stu-id="eb439-134">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="eb439-135">Par défaut, l'API du serveur HTTP crée une liaison avec le port dans l'URL pour toutes les adresses IP de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="eb439-135">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="eb439-136">Un conflit se produit si une application qui n’utilise pas l’API de serveur HTTP a été lié avec cette combinaison d’adresse IP et port.</span><span class="sxs-lookup"><span data-stu-id="eb439-136">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="eb439-137">La liste d’écoutes IP permet aux services WCF de coexister avec les applications qui utilisent un port pour certaines des adresses IP de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="eb439-137">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="eb439-138">Si la liste d'écoutes IP contient une entrée, l'API du serveur HTTP crée seulement une liaison avec les adresses IP spécifiées dans la liste.</span><span class="sxs-lookup"><span data-stu-id="eb439-138">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="eb439-139">La modification de la liste d'écoutes IP requiert des privilèges d'administrateur.</span><span class="sxs-lookup"><span data-stu-id="eb439-139">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="eb439-140">Utilisez l’outil netsh pour modifier la liste d’écoutes IP, comme indiqué dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="eb439-140">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="eb439-141">Autres paramètres de configuration</span><span class="sxs-lookup"><span data-stu-id="eb439-141">Other configuration settings</span></span>

<span data-ttu-id="eb439-142">Lors de l'utilisation de <xref:System.ServiceModel.WSDualHttpBinding>, la connexion cliente utilise des valeurs par défaut qui sont compatibles avec les réservations d'espace de noms et le pare-feu de Windows.</span><span class="sxs-lookup"><span data-stu-id="eb439-142">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="eb439-143">Si vous choisissez de personnaliser l'adresse cliente de base d'une connexion double, vous devez également configurer ces paramètres HTTP sur le client pour qu'ils correspondent à la nouvelle adresse.</span><span class="sxs-lookup"><span data-stu-id="eb439-143">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="eb439-144">L’API de serveur HTTP a certains paramètres de configuration avancée qui ne sont pas disponibles via HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="eb439-144">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="eb439-145">Ces paramètres sont maintenus dans le registre et s'appliquent à toutes les applications exécutées sur les systèmes utilisant les API de serveur HTTP.</span><span class="sxs-lookup"><span data-stu-id="eb439-145">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="eb439-146">Pour plus d’informations sur ces paramètres, consultez [les paramètres de Registre Http.sys pour IIS](https://support.microsoft.com/en-us/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="eb439-146">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/en-us/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="eb439-147">La plupart des utilisateurs n’avez pas besoin de modifier ces paramètres.</span><span class="sxs-lookup"><span data-stu-id="eb439-147">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="eb439-148">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="eb439-148">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="eb439-149">Procédure : configurer un port avec un certificat SSL</span><span class="sxs-lookup"><span data-stu-id="eb439-149">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
