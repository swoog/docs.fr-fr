---
title: Hébergement de services de workflow
ms.date: 03/30/2017
ms.assetid: 2d55217e-8697-4113-94ce-10b60863342e
ms.openlocfilehash: c933fd2bd46588ccd5c6115fbc2efca72bfadca4
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61855866"
---
# <a name="hosting-workflow-services"></a><span data-ttu-id="f06c1-102">Hébergement de services de workflow</span><span class="sxs-lookup"><span data-stu-id="f06c1-102">Hosting Workflow Services</span></span>
<span data-ttu-id="f06c1-103">Un service de workflow doit être hébergé pour pouvoir répondre aux messages entrants.</span><span class="sxs-lookup"><span data-stu-id="f06c1-103">A workflow service must be hosted for it to respond to incoming messages.</span></span> <span data-ttu-id="f06c1-104">Les services de workflow utilisent l'infrastructure de messagerie WCF et sont donc hébergés de manière similaire.</span><span class="sxs-lookup"><span data-stu-id="f06c1-104">Workflow services use the WCF messaging infrastructure and are therefore hosted in similar ways.</span></span> <span data-ttu-id="f06c1-105">Comme les services WCF, les services de flux de travail peuvent être hébergés dans toute application managée, sous Internet Information Services (IIS), ou sous les services Internet (WAS, Windows Process Activation Services).</span><span class="sxs-lookup"><span data-stu-id="f06c1-105">Like WCF services, workflow services can be hosted in any managed application, under Internet Information Services (IIS), or under Windows Process Activation Services (WAS).</span></span> <span data-ttu-id="f06c1-106">En outre, les services de workflow peuvent être hébergés sous Windows Server AppFabric.</span><span class="sxs-lookup"><span data-stu-id="f06c1-106">In addition, workflow services can be hosted under Windows Server App Fabric.</span></span> <span data-ttu-id="f06c1-107">Pour plus d’informations sur Windows Server AppFabric, consultez [documentation de Windows Server AppFabric](https://go.microsoft.com/fwlink/?LinkId=193037), [fonctionnalités d’hébergement d’AppFabric](https://go.microsoft.com/fwlink/?LinkId=196494), et [Concepts d’hébergement AppFabric](https://go.microsoft.com/fwlink/?LinkId=196495).</span><span class="sxs-lookup"><span data-stu-id="f06c1-107">For more information about Windows Server App Fabric see [Windows Server App Fabric documentation](https://go.microsoft.com/fwlink/?LinkId=193037), [AppFabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=196494), and [AppFabric Hosting Concepts](https://go.microsoft.com/fwlink/?LinkId=196495).</span></span> <span data-ttu-id="f06c1-108">Pour plus d’informations sur les différentes façons d’héberger WCF services, consultez [Services d’hébergement](../../../../docs/framework/wcf/hosting-services.md).</span><span class="sxs-lookup"><span data-stu-id="f06c1-108">For more information about the various ways to host WCF services see [Hosting Services](../../../../docs/framework/wcf/hosting-services.md).</span></span>

## <a name="hosting-in-a-managed-application"></a><span data-ttu-id="f06c1-109">Hébergement dans une application managée</span><span class="sxs-lookup"><span data-stu-id="f06c1-109">Hosting in a managed application</span></span>
 <span data-ttu-id="f06c1-110">Pour héberger un service de workflow dans une application managée, utilisez la classe <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="f06c1-110">To host a workflow service in a managed application, use the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="f06c1-111">Le constructeur <xref:System.ServiceModel.Activities.WorkflowServiceHost> vous permet de spécifier une instance singleton du service de workflow, une définition du service de workflow ou une activité qui utilise les activités de messagerie du workflow.</span><span class="sxs-lookup"><span data-stu-id="f06c1-111">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> constructor allows you to specify a singleton workflow service instance, a workflow service definition, or an activity that uses the workflow messaging activities.</span></span> <span data-ttu-id="f06c1-112">L'appel à la méthode <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> oblige le service à se mettre à l'écoute des messages entrants.</span><span class="sxs-lookup"><span data-stu-id="f06c1-112">Calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> causes the service to start listening for incoming messages.</span></span>

## <a name="hosting-under-iis-or-was"></a><span data-ttu-id="f06c1-113">Hébergement dans les services IIS ou WAS</span><span class="sxs-lookup"><span data-stu-id="f06c1-113">Hosting under IIS or WAS</span></span>
 <span data-ttu-id="f06c1-114">Héberger un service de workflow dans les services IIS ou WAS implique de créer un répertoire virtuel et d'y placer les fichiers qui définissent le service et son comportement.</span><span class="sxs-lookup"><span data-stu-id="f06c1-114">Hosting a workflow service under IIS or WAS involves creating a virtual directory and placing files in the virtual directory that define the service and its behavior.</span></span> <span data-ttu-id="f06c1-115">Lors de l'hébergement d'un service de workflow dans les services IIS ou WAS, il existe plusieurs possibilités :</span><span class="sxs-lookup"><span data-stu-id="f06c1-115">When hosting a workflow service under IIS or WAS there are several possibilities:</span></span>

- <span data-ttu-id="f06c1-116">Placez un fichier .xamlx définissant le service de workflow dans un répertoire virtuel IIS/WAS, ainsi qu'un fichier Web.config qui spécifie les comportements, les points de terminaison et d'autres éléments de configuration du service.</span><span class="sxs-lookup"><span data-stu-id="f06c1-116">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory along with a Web.config file that specifies the service behaviors, endpoints, and other configuration elements.</span></span>

- <span data-ttu-id="f06c1-117">Placez un fichier .xamlx définissant le service de workflow dans un répertoire virtuel IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="f06c1-117">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="f06c1-118">Le fichier .xamlx spécifie les points de terminaison à exposer.</span><span class="sxs-lookup"><span data-stu-id="f06c1-118">The .xamlx file specifies the endpoints to expose.</span></span> <span data-ttu-id="f06c1-119">Les points de terminaison sont spécifiés dans un élément `WorkflowService.Endpoints`, comme le montre l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="f06c1-119">Endpoints are specified in a `WorkflowService.Endpoints` element as shown in the following example.</span></span>

    ```xml
    <WorkflowService xmlns="http://schemas.microsoft.com/netfx/2009/xaml/servicemodel"  xmlns:p1="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <WorkflowService.Endpoints>
        <Endpoint ServiceContractName="IWorkFlowEchoService" AddressUri="">
          <Endpoint.Binding>
            <BasicHttpBinding />
          </Endpoint.Binding>
        </Endpoint>
      </WorkflowService.Endpoints>
    <!-- ... -->
    </WorkflowService>
    ```

    > [!NOTE]
    > <span data-ttu-id="f06c1-120">Les comportements ne peuvent pas être spécifiés dans un fichier .xamlx ; vous devez donc utiliser un fichier Web.config si vous devez spécifier des paramètres de comportement.</span><span class="sxs-lookup"><span data-stu-id="f06c1-120">Behaviors cannot be specified in a .xamlx file, so you must use a Web.config if you need to specify behavior settings.</span></span>

- <span data-ttu-id="f06c1-121">Placez un fichier .xamlx définissant le service de workflow dans un répertoire virtuel IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="f06c1-121">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="f06c1-122">Placez également un fichier .svc dans le répertoire virtuel.</span><span class="sxs-lookup"><span data-stu-id="f06c1-122">In addition, place a .svc file in the virtual directory.</span></span> <span data-ttu-id="f06c1-123">Ce fichier .svc vous permet de spécifier une fabrique hôte de service Web personnalisée, d'appliquer le comportement personnalisé ou de charger la configuration à partir d'un emplacement personnalisé.</span><span class="sxs-lookup"><span data-stu-id="f06c1-123">The .svc file allows you to specify a custom Web service host factory, apply custom behavior, or load configuration from a custom location.</span></span>

- <span data-ttu-id="f06c1-124">Placez un assembly dans le répertoire virtuel IIS/WAS qui contient une activité utilisant les activités de messagerie WCF.</span><span class="sxs-lookup"><span data-stu-id="f06c1-124">Place an assembly in the IIS/WAS virtual directory that contains an activity that uses the WCF messaging activities.</span></span>

 <span data-ttu-id="f06c1-125">Un fichier .xamlx qui définit un service de workflow doit contenir un <`Service`> élément racine ou un élément racine qui contient tous les types dérivés de <xref:System.Workflow.ComponentModel.Activity>.</span><span class="sxs-lookup"><span data-stu-id="f06c1-125">A .xamlx file that defines a workflow service must contain a <`Service`> root element or a root element that contains any type derived from <xref:System.Workflow.ComponentModel.Activity>.</span></span> <span data-ttu-id="f06c1-126">Lorsque vous utilisez le modèle d’activité de Visual Studio, un fichier .xamlx est créé.</span><span class="sxs-lookup"><span data-stu-id="f06c1-126">When using the Visual Studio activity template, a .xamlx file is created.</span></span> <span data-ttu-id="f06c1-127">Lorsque vous utilisez le modèle de Service de Workflow WCF, un fichier .xamlx est créé.</span><span class="sxs-lookup"><span data-stu-id="f06c1-127">When using the WCF Workflow Service template, a .xamlx file is created.</span></span>

## <a name="hosting-workflow-services-under-windows-server-app-fabric"></a><span data-ttu-id="f06c1-128">Hébergement des services de workflow sous Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="f06c1-128">Hosting Workflow Services under Windows Server App Fabric</span></span>
 <span data-ttu-id="f06c1-129">L'hébergement d'un service de workflow sous Windows Server App Fabric est similaire à l'hébergement sous IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="f06c1-129">Hosting a workflow service under Windows Server App Fabric is done in the same way as hosting under IIS/WAS.</span></span> <span data-ttu-id="f06c1-130">La seule différence est que Windows Server App Fabric est installé.</span><span class="sxs-lookup"><span data-stu-id="f06c1-130">The only difference is the fact that Windows Server App Fabric is installed.</span></span> <span data-ttu-id="f06c1-131">Windows Server App Fabric fournit des outils qui sont ajoutés au Gestionnaire des services IIS, ainsi que des applets de commande powershell.</span><span class="sxs-lookup"><span data-stu-id="f06c1-131">Windows Server App Fabric provides tools that are added to Internet Information Services Manager, as well as powershell commandlets.</span></span> <span data-ttu-id="f06c1-132">Ces outils simplifient le déploiement, la gestion et le suivi des services de workflow et des services WCF.</span><span class="sxs-lookup"><span data-stu-id="f06c1-132">These tools simplify deploying, managing, and tracking of workflow services and WCF services.</span></span>

## <a name="referencing-custom-activities"></a><span data-ttu-id="f06c1-133">Référencement d'activités personnalisées</span><span class="sxs-lookup"><span data-stu-id="f06c1-133">Referencing Custom Activities</span></span>
 <span data-ttu-id="f06c1-134">Références aux activités personnalisées doivent être ajoutées à la <`Assemblies`> sous <`System.Web.Compilation`> afin qu’elles soient chargées dans le domaine d’Application et le désérialiseur XAML est en mesure de localiser les types.</span><span class="sxs-lookup"><span data-stu-id="f06c1-134">References to custom activities must be added to the <`Assemblies`> section under <`System.Web.Compilation`> so that they are loaded into the Application Domain and the XAML deserializer is able to locate the types.</span></span> <span data-ttu-id="f06c1-135">Ces paramètres peuvent être effectués au niveau de l'application ou dans le Web.config racine si les paramètres doivent s'appliquer à toutes les applications sur l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="f06c1-135">These settings can be made at the application level or in the root Web.config if the settings should be applied to all applications on the machine.</span></span>

## <a name="deployment"></a><span data-ttu-id="f06c1-136">Déploiement</span><span class="sxs-lookup"><span data-stu-id="f06c1-136">Deployment</span></span>
 <span data-ttu-id="f06c1-137">L'outil de déploiement Web a été créé pour simplifier le travail de déploiement.</span><span class="sxs-lookup"><span data-stu-id="f06c1-137">The Web Deployment tool has been created to make the job of deployment easier.</span></span> <span data-ttu-id="f06c1-138">Cet outil vous permet de migrer des applications entre IIS 6.0 et IIS 7.0, de synchroniser des batteries de serveurs et d’empaqueter, d’archiver et de déployer des applications Web.</span><span class="sxs-lookup"><span data-stu-id="f06c1-138">The tool allows you to migrate applications between IIS 6.0 and IIS 7.0, synchronize server farms, and package, archive and deploy Web applications.</span></span> <span data-ttu-id="f06c1-139">Pour plus d’informations, consultez [outil de déploiement MS](https://go.microsoft.com/fwlink/?LinkId=178690).</span><span class="sxs-lookup"><span data-stu-id="f06c1-139">For more information, see [MS Deployment Tool](https://go.microsoft.com/fwlink/?LinkId=178690).</span></span>

## <a name="see-also"></a><span data-ttu-id="f06c1-140">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f06c1-140">See also</span></span>

- [<span data-ttu-id="f06c1-141">Éléments internes de l’hôte du service de workflow</span><span class="sxs-lookup"><span data-stu-id="f06c1-141">Workflow Service Host Internals</span></span>](../../../../docs/framework/wcf/feature-details/workflow-service-host-internals.md)
- [<span data-ttu-id="f06c1-142">Configuration de WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="f06c1-142">Configuring WorkflowServiceHost</span></span>](../../../../docs/framework/wcf/feature-details/configuring-workflowservicehost.md)