---
title: Identité du service et authentification
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: f33144c320b3648f9e201505a34ed8f1ecd5965b
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/08/2019
ms.locfileid: "59145624"
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="36996-102">Identité du service et authentification</span><span class="sxs-lookup"><span data-stu-id="36996-102">Service Identity and Authentication</span></span>
<span data-ttu-id="36996-103">D’un service *identité de point de terminaison* est une valeur générée à partir du service Web Services Description Language (WSDL).</span><span class="sxs-lookup"><span data-stu-id="36996-103">A service's *endpoint identity* is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="36996-104">Cette valeur, propagée à tout client, est utilisée pour authentifier le service.</span><span class="sxs-lookup"><span data-stu-id="36996-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="36996-105">Une fois que le client a initialisé une communication à un point de terminaison et le service s'authentifie au client, le client compare la valeur de l'identité du point de terminaison avec la valeur réelle que le processus d'authentification du point de terminaison a retournée.</span><span class="sxs-lookup"><span data-stu-id="36996-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="36996-106">Si elles correspondent, le client est assuré qu'il a contacté le point de terminaison du service attendu.</span><span class="sxs-lookup"><span data-stu-id="36996-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="36996-107">Cela fonctionne comme une protection contre *anti-hameçonnage* en empêchant un client soit redirigé à un point de terminaison hébergé par un service malveillant.</span><span class="sxs-lookup"><span data-stu-id="36996-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="36996-108">Pour un exemple d’application qui illustre la définition de l’identité, consultez [Service Identity, exemple](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span><span class="sxs-lookup"><span data-stu-id="36996-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span></span> <span data-ttu-id="36996-109">Pour plus d’informations sur les points de terminaison et adresses de point de terminaison, consultez [adresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span><span class="sxs-lookup"><span data-stu-id="36996-109">For more information about endpoints and endpoint addresses, see [Addresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="36996-110">Lorsque vous utilisez NT LanMan (NTLM) pour l'authentification, l'identité du service n'est pas vérifiée parce que, sous NTLM, le client ne peut pas authentifier le serveur.</span><span class="sxs-lookup"><span data-stu-id="36996-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="36996-111">NTLM est utilisé lorsque les ordinateurs font partie d'un groupe de travail Windows, ou lors de l'exécution d'une version antérieure de Windows qui ne prend pas en charge l'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="36996-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="36996-112">Lorsque le client initialise un canal sécurisé pour envoyer un message à un service sur celui-ci, l’infrastructure Windows Communication Foundation (WCF) authentifie le service et envoie le message uniquement si l’identité du service correspond à l’identité spécifiée dans le point de terminaison adresse du client utilise.</span><span class="sxs-lookup"><span data-stu-id="36996-112">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="36996-113">Le traitement de l'identité inclut les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="36996-113">Identity processing consists of the following stages:</span></span>  
  
-   <span data-ttu-id="36996-114">Au moment du design, le développeur d'applications détermine l'identité du service à partir des métadonnées du point de terminaison (exposé à travers WSDL).</span><span class="sxs-lookup"><span data-stu-id="36996-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
-   <span data-ttu-id="36996-115">Pendant l'exécution, l'application cliente vérifie les revendications des informations d'identification de sécurité du service avant d'envoyer des messages au service.</span><span class="sxs-lookup"><span data-stu-id="36996-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="36996-116">Le traitement de l'identité sur le client est analogue à l'authentification du client sur le service.</span><span class="sxs-lookup"><span data-stu-id="36996-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="36996-117">Un service sécurisé n'exécute pas de code jusqu'à ce que les informations d'identification du client aient été authentifiées.</span><span class="sxs-lookup"><span data-stu-id="36996-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="36996-118">De la même façon, le client n'envoie pas de messages au service jusqu'à ce que les informations d'identification du service aient été authentifiées sur la base de ce qui est déjà connu via métadonnées du service.</span><span class="sxs-lookup"><span data-stu-id="36996-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="36996-119">La propriété <xref:System.ServiceModel.EndpointAddress.Identity%2A> de la classe <xref:System.ServiceModel.EndpointAddress> représente l'identité du service appelé par le client.</span><span class="sxs-lookup"><span data-stu-id="36996-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="36996-120">Le service publie <xref:System.ServiceModel.EndpointAddress.Identity%2A> dans ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="36996-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="36996-121">Lorsque le développeur client s’exécute le [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) contre le point de terminaison de service, la configuration générée contient la valeur du service <xref:System.ServiceModel.EndpointAddress.Identity%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="36996-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="36996-122">L’infrastructure WCF (si configuré avec la sécurité) vérifie que le service possède l’identité spécifiée.</span><span class="sxs-lookup"><span data-stu-id="36996-122">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="36996-123">Les métadonnées contiennent l'identité attendue du service, il est par conséquent recommandé d'exposer les métadonnées du service de manière sécurisée, par exemple, en créant un point de terminaison HTTPS.</span><span class="sxs-lookup"><span data-stu-id="36996-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="36996-124">Pour plus d'informations, voir [Procédure : Sécuriser des points de terminaison de métadonnées](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="36996-124">For more information, see [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="36996-125">Types d'identité</span><span class="sxs-lookup"><span data-stu-id="36996-125">Identity Types</span></span>  
 <span data-ttu-id="36996-126">Un service peut fournir des six types d’identités.</span><span class="sxs-lookup"><span data-stu-id="36996-126">A service can provide six types of identities.</span></span> <span data-ttu-id="36996-127">Chaque type d'identité correspond à un élément qui peut être contenu à l'intérieur de l'élément `<identity>` dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="36996-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="36996-128">Le type utilisé dépend du scénario et des exigences de sécurité du service.</span><span class="sxs-lookup"><span data-stu-id="36996-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="36996-129">Le tableau suivant décrit chaque type d'identité.</span><span class="sxs-lookup"><span data-stu-id="36996-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="36996-130">Type d'identité</span><span class="sxs-lookup"><span data-stu-id="36996-130">Identity type</span></span>|<span data-ttu-id="36996-131">Description</span><span class="sxs-lookup"><span data-stu-id="36996-131">Description</span></span>|<span data-ttu-id="36996-132">Scénario typique</span><span class="sxs-lookup"><span data-stu-id="36996-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="36996-133">DNS (Domain Name System)</span><span class="sxs-lookup"><span data-stu-id="36996-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="36996-134">Utilisez cet élément avec les certificats X.509 ou les comptes Windows.</span><span class="sxs-lookup"><span data-stu-id="36996-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="36996-135">Il compare le nom DNS spécifié dans l'information d'identification avec la valeur spécifiée dans cet élément.</span><span class="sxs-lookup"><span data-stu-id="36996-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="36996-136">Un contrôle DNS vous permet d'utiliser des certificats avec les noms DNS ou de sujet.</span><span class="sxs-lookup"><span data-stu-id="36996-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="36996-137">Si un certificat est réédité avec le même nom DNS ou de sujet, le contrôle d'identité est encore valide.</span><span class="sxs-lookup"><span data-stu-id="36996-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="36996-138">Lorsqu'un certificat est réédité, il obtient une nouvelle clé RSA mais conserve le même nom DNS ou de sujet.</span><span class="sxs-lookup"><span data-stu-id="36996-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="36996-139">Cela signifie que les clients n'ont pas à mettre à jour les informations d'identité relatives du service.</span><span class="sxs-lookup"><span data-stu-id="36996-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="36996-140">certificat ; </span><span class="sxs-lookup"><span data-stu-id="36996-140">Certificate.</span></span> <span data-ttu-id="36996-141">Il s'agit de la valeur par défaut lorsque la valeur de certificat a été attribuée à la propriété `ClientCredentialType`.</span><span class="sxs-lookup"><span data-stu-id="36996-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="36996-142">Cet élément spécifie une valeur de certificat X.509 encodée en base 64 qui sera comparée avec le client.</span><span class="sxs-lookup"><span data-stu-id="36996-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="36996-143">Utilisez également cet élément en cas d'utilisation d'un [!INCLUDE[infocard](../../../../includes/infocard-md.md)] comme information d'identification pour authentifier le service.</span><span class="sxs-lookup"><span data-stu-id="36996-143">Also use this element when using a [!INCLUDE[infocard](../../../../includes/infocard-md.md)] as a credential to authenticate the service.</span></span>|<span data-ttu-id="36996-144">Cet élément restreint l'authentification à un certificat unique basé sur sa valeur d'empreinte numérique.</span><span class="sxs-lookup"><span data-stu-id="36996-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="36996-145">Cela permet une authentification plus stricte parce que les valeurs d'empreinte numérique sont uniques.</span><span class="sxs-lookup"><span data-stu-id="36996-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="36996-146">Il est fourni avec le seul inconvénient : Si le certificat est réédité avec le même nom de sujet, il a également une nouvelle empreinte numérique.</span><span class="sxs-lookup"><span data-stu-id="36996-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="36996-147">Par conséquent, les clients ne sont pas en mesure de valider le service à moins que la nouvelle empreinte numérique soit connue.</span><span class="sxs-lookup"><span data-stu-id="36996-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="36996-148">Pour plus d’informations sur la recherche d’une empreinte de certificat, consultez [Comment : Récupérer l’empreinte numérique d’un certificat](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="36996-148">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="36996-149">Référence de certificat</span><span class="sxs-lookup"><span data-stu-id="36996-149">Certificate Reference</span></span>|<span data-ttu-id="36996-150">Identique à l'option de certificat décrite précédemment.</span><span class="sxs-lookup"><span data-stu-id="36996-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="36996-151">Toutefois, cet élément vous permet de spécifier un nom de certificat et l'emplacement du magasin à partir duquel vous pouvez le récupérer.</span><span class="sxs-lookup"><span data-stu-id="36996-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="36996-152">Identique au scénario de certificat décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="36996-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="36996-153">L'avantage est que l'emplacement du magasin du certificat peut changer.</span><span class="sxs-lookup"><span data-stu-id="36996-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="36996-154">RSA</span><span class="sxs-lookup"><span data-stu-id="36996-154">RSA</span></span>|<span data-ttu-id="36996-155">Cet élément spécifie une valeur de clé RSA à comparer avec le client.</span><span class="sxs-lookup"><span data-stu-id="36996-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="36996-156">Il est similaire à l'option de certificat mais la clé RSA est utilisée au lieu de l'empreinte numérique du certificat.</span><span class="sxs-lookup"><span data-stu-id="36996-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="36996-157">Un contrôle RSA vous permet de restreindre spécifiquement l'authentification à un certificat unique en fonction de sa clé RSA.</span><span class="sxs-lookup"><span data-stu-id="36996-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="36996-158">Cela permet l'authentification plus stricte d'une clé RSA spécifique aux dépens du service, qui n'utilise plus les clients existants lorsque la valeur de clé RSA est modifiée.</span><span class="sxs-lookup"><span data-stu-id="36996-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="36996-159">Nom d'utilisateur principal (UPN).</span><span class="sxs-lookup"><span data-stu-id="36996-159">User principal name (UPN).</span></span> <span data-ttu-id="36996-160">Il s'agit de la valeur par défaut lorsque la valeur Windows est attribuée à `ClientCredentialType` et le processus du service ne s'exécute pas sous l'un des comptes système.</span><span class="sxs-lookup"><span data-stu-id="36996-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="36996-161">Cet élément spécifie l'UPN sous lequel le service s'exécute.</span><span class="sxs-lookup"><span data-stu-id="36996-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="36996-162">Consultez la section protocole et identité Kerberos de [substitution de l’identité d’un Service pour l’authentification](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="36996-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="36996-163">Cela garantit que le service s'exécute sous un compte d'utilisateur Windows spécifique.</span><span class="sxs-lookup"><span data-stu-id="36996-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="36996-164">Le compte d'utilisateur peut être l'utilisateur actuellement connecté ou le service qui s'exécute sous un compte d'utilisateur particulier.</span><span class="sxs-lookup"><span data-stu-id="36996-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="36996-165">Ce paramètre tire parti de la sécurité Windows Kerberos si le service s'exécute sous un compte de domaine dans un environnement Active Directory.</span><span class="sxs-lookup"><span data-stu-id="36996-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="36996-166">Nom de principal du service (SPN).</span><span class="sxs-lookup"><span data-stu-id="36996-166">Service principal name (SPN).</span></span> <span data-ttu-id="36996-167">Valeur par défaut lorsque le `ClientCredentialType` a la valeur Windows et le processus du service s'exécute sous l'un des comptes système LocalService, LocalSystem ou NetworkService.</span><span class="sxs-lookup"><span data-stu-id="36996-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="36996-168">Cet élément spécifie le SPN associé au compte du service.</span><span class="sxs-lookup"><span data-stu-id="36996-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="36996-169">Consultez la section protocole et identité Kerberos de [substitution de l’identité d’un Service pour l’authentification](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="36996-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="36996-170">Cela garantit que le SPN et le compte Windows spécifique, associé au SPN, identifient le service.</span><span class="sxs-lookup"><span data-stu-id="36996-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="36996-171">Vous pouvez utiliser l'outil Setspn.exe pour associer un compte d'ordinateur pour le compte d'utilisateur du service.</span><span class="sxs-lookup"><span data-stu-id="36996-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="36996-172">Ce paramètre tire parti de la sécurité Windows Kerberos si le service s'exécute sous l'un des comptes système ou sous un compte de domaine qui a un nom SPN associé et si l'ordinateur est un membre d'un domaine dans un environnement Active Directory.</span><span class="sxs-lookup"><span data-stu-id="36996-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="36996-173">Spécification de l'identité au service</span><span class="sxs-lookup"><span data-stu-id="36996-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="36996-174">Généralement, vous n'avez pas besoin de définir l'identité sur un service car la sélection d'un type d'informations d'identification du client impose le type d'identité exposé dans les métadonnées du service.</span><span class="sxs-lookup"><span data-stu-id="36996-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="36996-175">Pour plus d’informations sur la façon de remplacer ou de spécifier l’identité du service, consultez [substitution de l’identité d’un Service pour l’authentification](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="36996-175">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="36996-176">À l’aide de la \<identité > élément de Configuration</span><span class="sxs-lookup"><span data-stu-id="36996-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="36996-177">Si vous remplacez le type d’information d’identification du client dans la liaison présentée précédemment par `Certificate,`, alors le fichier WSDL généré contient un certificat X.509 sérialisé en base 64 pour la valeur d’identité, tel qu’indiqué dans le code suivant.</span><span class="sxs-lookup"><span data-stu-id="36996-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="36996-178">Il s'agit de la valeur par défaut pour tous les types d'informations d'identification du client autres que Windows.</span><span class="sxs-lookup"><span data-stu-id="36996-178">This is the default for all client credential types other than Windows.</span></span>  

 <span data-ttu-id="36996-179">Vous pouvez modifier la valeur de l’identité de service par défaut ou le type de l’identité à l’aide de la `<identity>` élément de configuration ou en définissant l’identité dans le code.</span><span class="sxs-lookup"><span data-stu-id="36996-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="36996-180">Le code de configuration suivant affecte à une identité DNS (Domain Name System) la valeur `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="36996-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  

## <a name="setting-identity-programmatically"></a><span data-ttu-id="36996-181">Définition de l'identité par programme</span><span class="sxs-lookup"><span data-stu-id="36996-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="36996-182">Votre service ne devra pas explicitement spécifier une identité, étant donné que WCF il détermine automatiquement.</span><span class="sxs-lookup"><span data-stu-id="36996-182">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="36996-183">Cependant, WCF vous permet de spécifier une identité sur un point de terminaison, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="36996-183">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="36996-184">Le code suivant ajoute un point de terminaison de service avec une identité DNS spécifique.</span><span class="sxs-lookup"><span data-stu-id="36996-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="36996-185">Spécification de l'identité au client</span><span class="sxs-lookup"><span data-stu-id="36996-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="36996-186">Au moment du design, un développeur client utilise généralement le [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) pour générer la configuration du client.</span><span class="sxs-lookup"><span data-stu-id="36996-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="36996-187">Le fichier de configuration généré (prévu pour une utilisation par le client) contient l'identité du serveur.</span><span class="sxs-lookup"><span data-stu-id="36996-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="36996-188">Par exemple, le code suivant est généré à partir d'un service qui spécifie une identité DNS, comme illustré dans l'exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="36996-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="36996-189">Notez que la valeur de l'identité du point de terminaison du client correspond à celle du service.</span><span class="sxs-lookup"><span data-stu-id="36996-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="36996-190">Dans ce cas, lorsque le client reçoit les informations d'identification Windows (Kerberos) pour le service, il s'attend à ce que la valeur soit `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="36996-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  

 <span data-ttu-id="36996-191">Si, au lieu de Windows, le service spécifie un certificat pour le type d'information d'identification du client, alors, la propriété DNS du certificat est supposée être la valeur `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="36996-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="36996-192">(Ou si la propriété DNS est `null`, le nom de sujet du certificat doit être `contoso.com`.)</span><span class="sxs-lookup"><span data-stu-id="36996-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="36996-193">Utilisation d'une valeur spécifique pour l'identité</span><span class="sxs-lookup"><span data-stu-id="36996-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="36996-194">Le fichier de configuration client suivant illustre comment l'identité du service est supposée être une valeur spécifique.</span><span class="sxs-lookup"><span data-stu-id="36996-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="36996-195">Dans l'exemple suivant, le client peut communiquer avec deux points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="36996-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="36996-196">Le premier est identifié par une empreinte numérique de certificat et le second par une clé RSA de certificat.</span><span class="sxs-lookup"><span data-stu-id="36996-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="36996-197">Autrement dit, il s'agit d'un certificat qui contient uniquement une paire clé publique/clé privée, mais n'est pas publié par une autorité approuvée.</span><span class="sxs-lookup"><span data-stu-id="36996-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  

## <a name="identity-checking-at-run-time"></a><span data-ttu-id="36996-198">Contrôle d'identité au moment de l'exécution</span><span class="sxs-lookup"><span data-stu-id="36996-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="36996-199">Au moment du design, un développeur d'applications détermine l'identité du serveur via ses métadonnées.</span><span class="sxs-lookup"><span data-stu-id="36996-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="36996-200">Pendant l'exécution, le contrôle d'identité est effectué avant d'appeler un point de terminaison sur le service.</span><span class="sxs-lookup"><span data-stu-id="36996-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="36996-201">La valeur d'identité est attachée au type d'authentification spécifié par les métadonnées, en d'autres termes, le type d'information d'identification utilisé pour le service.</span><span class="sxs-lookup"><span data-stu-id="36996-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="36996-202">Si le canal est configuré pour authentifier à l'aide du message ou d'un SSL (Secure Sockets Layer) au niveau du transport avec des certificats X.509 pour l'authentification, les valeurs d'identité suivantes sont valides :</span><span class="sxs-lookup"><span data-stu-id="36996-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="36996-203">DNS.</span><span class="sxs-lookup"><span data-stu-id="36996-203">DNS.</span></span> <span data-ttu-id="36996-204">WCF garantit que le certificat fourni pendant la négociation SSL contient un nom DNS ou `CommonName` attribute (CN) est égal à la valeur spécifiée dans l’identité DNS sur le client.</span><span class="sxs-lookup"><span data-stu-id="36996-204">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="36996-205">Notez que ces contrôles sont complémentaires à la détermination de la validé du certificat du serveur.</span><span class="sxs-lookup"><span data-stu-id="36996-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="36996-206">Par défaut, WCF vérifie que le certificat de serveur est émis par une autorité racine approuvée.</span><span class="sxs-lookup"><span data-stu-id="36996-206">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
-   <span data-ttu-id="36996-207">certificat ; </span><span class="sxs-lookup"><span data-stu-id="36996-207">Certificate.</span></span> <span data-ttu-id="36996-208">Pendant la négociation SSL, WCF permet de s’assurer que le point de terminaison distant fournit la valeur de certificat exacte spécifiée dans l’identité.</span><span class="sxs-lookup"><span data-stu-id="36996-208">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
-   <span data-ttu-id="36996-209">Référence de certificat.</span><span class="sxs-lookup"><span data-stu-id="36996-209">Certificate Reference.</span></span> <span data-ttu-id="36996-210">Identique au certificat.</span><span class="sxs-lookup"><span data-stu-id="36996-210">Same as Certificate.</span></span>  
  
-   <span data-ttu-id="36996-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="36996-211">RSA.</span></span> <span data-ttu-id="36996-212">Pendant la négociation SSL, WCF permet de s’assurer que le point de terminaison distant fournit la clé RSA exacte spécifiée dans l’identité.</span><span class="sxs-lookup"><span data-stu-id="36996-212">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="36996-213">Si le service authentifie en utilisant le message - ou un SSL au niveau du transport avec des informations d'identification Windows pour l'authentification, et négocie l'information d'identification, les valeurs d'identité suivantes sont valides :</span><span class="sxs-lookup"><span data-stu-id="36996-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="36996-214">DNS.</span><span class="sxs-lookup"><span data-stu-id="36996-214">DNS.</span></span> <span data-ttu-id="36996-215">La négociation passe le SPN du service afin que le nom DNS puisse être vérifié.</span><span class="sxs-lookup"><span data-stu-id="36996-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="36996-216">Le SPN se présente sous la forme `host/<dns name>`.</span><span class="sxs-lookup"><span data-stu-id="36996-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
-   <span data-ttu-id="36996-217">SPN.</span><span class="sxs-lookup"><span data-stu-id="36996-217">SPN.</span></span> <span data-ttu-id="36996-218">Un service SPN explicite est retourné, par exemple, `host/myservice`.</span><span class="sxs-lookup"><span data-stu-id="36996-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
-   <span data-ttu-id="36996-219">UPN.</span><span class="sxs-lookup"><span data-stu-id="36996-219">UPN.</span></span> <span data-ttu-id="36996-220">L'UPN du compte de service.</span><span class="sxs-lookup"><span data-stu-id="36996-220">The UPN of the service account.</span></span> <span data-ttu-id="36996-221">L’UPN est au format `username` @ `domain`.</span><span class="sxs-lookup"><span data-stu-id="36996-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="36996-222">Par exemple, lorsque le service s'exécute dans un compte d'utilisateur, cela peut être `username@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="36996-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="36996-223">La spécification de l'identité par programmation (à l'aide de la propriété <xref:System.ServiceModel.EndpointAddress.Identity%2A> ) est facultative.</span><span class="sxs-lookup"><span data-stu-id="36996-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="36996-224">Si aucune identité n'est spécifiée et si le type d'information d'identification du client est Windows, la valeur par défaut est SPN et la valeur définie dans la partie correspondant au nom d'hôte de l'adresse du point de terminaison du service est préfixée avec la valeur littérale "host/".</span><span class="sxs-lookup"><span data-stu-id="36996-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="36996-225">Si aucune identité n'est spécifiée et si le type d'information d'identification du client est un certificat, la valeur par défaut est `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="36996-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="36996-226">Cela s'applique à la fois à la sécurité au niveau du message et au niveau du transport.</span><span class="sxs-lookup"><span data-stu-id="36996-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="36996-227">Identité et liaisons personnalisées</span><span class="sxs-lookup"><span data-stu-id="36996-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="36996-228">Parce que l'identité d'un service dépend du type de liaison utilisé, assurez-vous qu'une identité appropriée est exposée lors de la création d'une liaison personnalisée.</span><span class="sxs-lookup"><span data-stu-id="36996-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="36996-229">Par exemple, dans l’exemple de code suivant, l’identité exposée n’est pas compatible avec le type de sécurité parce que l’identité de la liaison de démarrage de conversation sécurisée ne correspond pas à l’identité de la liaison sur le point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="36996-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="36996-230">La liaison de conversation sécurisée définit l'identité DNS, tandis que <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> définit l'identité UPN ou SPN.</span><span class="sxs-lookup"><span data-stu-id="36996-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="36996-231">Pour plus d’informations sur la pile de liaison éléments correctement pour une liaison personnalisée, consultez [Creating liaisons](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="36996-231">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="36996-232">Pour plus d’informations sur la création d’une liaison personnalisée avec le <xref:System.ServiceModel.Channels.SecurityBindingElement>, consultez [Comment : Créer un SecurityBindingElement pour un Mode d’authentification spécifié](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span><span class="sxs-lookup"><span data-stu-id="36996-232">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="36996-233">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="36996-233">See also</span></span>

- [<span data-ttu-id="36996-234">Procédure : créer une liaison personnalisée à l’aide de SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="36996-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="36996-235">Procédure : créer un SecurityBindingElement pour un mode d’authentification spécifié</span><span class="sxs-lookup"><span data-stu-id="36996-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
- [<span data-ttu-id="36996-236">Procédure : créer un vérificateur d’identité du client personnalisé</span><span class="sxs-lookup"><span data-stu-id="36996-236">How to: Create a Custom Client Identity Verifier</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-client-identity-verifier.md)
- [<span data-ttu-id="36996-237">Sélection d'un type d'informations d'identification</span><span class="sxs-lookup"><span data-stu-id="36996-237">Selecting a Credential Type</span></span>](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)
- [<span data-ttu-id="36996-238">Utilisation des certificats</span><span class="sxs-lookup"><span data-stu-id="36996-238">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)
- [<span data-ttu-id="36996-239">Outil Service Model Metadata Tool (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="36996-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="36996-240">Création de liaisons définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="36996-240">Creating User-Defined Bindings</span></span>](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="36996-241">Procédure : récupérer l’empreinte d’un certificat</span><span class="sxs-lookup"><span data-stu-id="36996-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)
