---
title: Personnalisation des flux (services de données WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, feeds
- WCF Data Services, Atom protocol
- Atom Publishing Protocol [WCF Data Services]
- WCF Data Services, customizing feeds
ms.assetid: 0d1a39bc-6462-4683-bd7d-e74e0fd28a85
ms.openlocfilehash: 1922351ffb11d5ff6541ef22dee623c20d153d6a
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/08/2018
ms.locfileid: "44207486"
---
# <a name="feed-customization-wcf-data-services"></a><span data-ttu-id="e602a-102">Personnalisation des flux (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="e602a-102">Feed Customization (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="e602a-103"> utilise le [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] pour exposer des données en tant que flux.</span><span class="sxs-lookup"><span data-stu-id="e602a-103"> uses the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to expose data as a feed.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="e602a-104"> prend en charge les formats Atom et JavaScript Objet Notation (JSON) pour les flux de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-104"> supports both Atom and JavaScript Object Notation (JSON) formats for data feeds.</span></span> <span data-ttu-id="e602a-105">Lorsque vous utilisez un flux Atom, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] fournit une méthode standard pour sérialiser les données, telles que les entités et relations, dans un format XML qui peut être inclus dans le corps du message HTTP.</span><span class="sxs-lookup"><span data-stu-id="e602a-105">When you use an Atom feed, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] provides a standard method to serialize data, such as entities and relationships, into an XML format that can be included in the body of HTTP message.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="e602a-106"> définit un mappage de propriété d’entité par défaut entre les données contenues dans les entités et les éléments Atom.</span><span class="sxs-lookup"><span data-stu-id="e602a-106"> defines a default entity-property mapping between the data that is contained in entities and Atom elements.</span></span> <span data-ttu-id="e602a-107">Pour plus d’informations, consultez [OData : Format Atom](https://go.microsoft.com/fwlink/?LinkID=185794).</span><span class="sxs-lookup"><span data-stu-id="e602a-107">For more information, see [OData: Atom Format](https://go.microsoft.com/fwlink/?LinkID=185794).</span></span>  
  
 <span data-ttu-id="e602a-108">Vous pouvez avoir un scénario d'application qui requiert que les données de propriété retournées par le service des données soient sérialisées de façon personnalisée plutôt qu'au format de flux standard.</span><span class="sxs-lookup"><span data-stu-id="e602a-108">You may have an application scenario that requires that the property data returned by the data service be serialized in a customized manner rather than in the standard feed format.</span></span> <span data-ttu-id="e602a-109">Avec [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], vous pouvez personnaliser la sérialisation dans un flux de données afin que les propriétés d’une entité puissent être mappées aux éléments inutilisés et les attributs d’une entrée ou aux éléments personnalisés d’une entrée dans le flux.</span><span class="sxs-lookup"><span data-stu-id="e602a-109">With [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], you can customize the serialization in a data feed so that properties of an entity may be mapped to unused elements and attributes of an entry or to custom elements of an entry in the feed.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e602a-110">La personnalisation de flux est prise en charge uniquement pour les flux Atom.</span><span class="sxs-lookup"><span data-stu-id="e602a-110">Feed customization is only supported for Atom feeds.</span></span> <span data-ttu-id="e602a-111">Les flux personnalisés ne sont pas retournés lorsque le format JSON est demandé pour le flux retourné.</span><span class="sxs-lookup"><span data-stu-id="e602a-111">Custom feeds are not returned when the JSON format is requested for the returned feed.</span></span>  
  
 <span data-ttu-id="e602a-112">Avec [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], vous pouvez définir un autre mappage de propriété pour les charges utiles Atom en appliquant manuellement des attributs aux types d'entité dans le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-112">With [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can define an alternate entity-property mapping for an Atom payload by manually applying attributes to entity types in the data model.</span></span> <span data-ttu-id="e602a-113">Le fournisseur de sources de données du service de données détermine le mode d'application de ces attributs.</span><span class="sxs-lookup"><span data-stu-id="e602a-113">The data source provider of the data service determines how you should apply these attributes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e602a-114">Lorsque vous définissez des flux personnalisés, vous devez vérifier que toutes les propriétés de l'entité qui ont des mappages personnalisés définis sont incluses dans la projection.</span><span class="sxs-lookup"><span data-stu-id="e602a-114">When you define custom feeds, you must guarantee that all entity properties that have custom mappings defined are included in the projection.</span></span> <span data-ttu-id="e602a-115">Lorsqu'une propriété d'entité mappée n'est pas incluse dans la projection, une perte de données peut se produire.</span><span class="sxs-lookup"><span data-stu-id="e602a-115">When a mapped entity property is not included in the projection, data loss might occur.</span></span> <span data-ttu-id="e602a-116">Pour plus d’informations, consultez [Projections de requête](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-116">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-the-entity-framework-provider"></a><span data-ttu-id="e602a-117">Personnalisation de flux avec le fournisseur Entity Framework</span><span class="sxs-lookup"><span data-stu-id="e602a-117">Customizing Feeds with the Entity Framework Provider</span></span>  
 <span data-ttu-id="e602a-118">Le modèle de données utilisé avec le fournisseur [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] est représenté sous la forme de code XML dans le fichier .edmx.</span><span class="sxs-lookup"><span data-stu-id="e602a-118">The data model used with the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider is represented as XML in the .edmx file.</span></span> <span data-ttu-id="e602a-119">Dans ce cas, les attributs qui définissent des flux personnalisés sont ajoutés aux éléments `EntityType` et `Property` qui représentent des types et des propriétés d'entité dans le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-119">In this case, the attributes that define custom feeds are added to the `EntityType` and `Property` elements that represent entity types and properties in the data model.</span></span> <span data-ttu-id="e602a-120">Ces attributs de personnalisation de flux ne sont pas définis dans [ \[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072), qui est le format qui le [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] fournisseur utilise pour définir le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-120">These feed customization attributes are not defined in [\[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072), which is the format that the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider uses to define the data model.</span></span> <span data-ttu-id="e602a-121">Par conséquent, vous devez déclarer les attributs de personnalisation de flux dans un espace de noms de schéma spécifique défini sous la forme `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span><span class="sxs-lookup"><span data-stu-id="e602a-121">Therefore, you must declare feed customization attributes in a specific schema namespace, which is defined as `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span></span> <span data-ttu-id="e602a-122">Le fragment XML suivant affiche des attributs de personnalisation de flux appliqués aux éléments `Property` du type d'entité `Products` qui définissent les propriétés `ProductName`, `ReorderLevel` et `UnitsInStock`.</span><span class="sxs-lookup"><span data-stu-id="e602a-122">The following XML fragment shows feed customization attributes applied to `Property` elements of the `Products` entity type that define the `ProductName`, `ReorderLevel`, and `UnitsInStock` properties.</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedAttributes](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/northwind.csdl#edmfeedattributes)]  
  
 <span data-ttu-id="e602a-123">Ces attributs produisent le flux de données personnalisé suivant pour le jeu d'entités `Products`.</span><span class="sxs-lookup"><span data-stu-id="e602a-123">These attributes produce the following customized data feed for the `Products` entity set.</span></span> <span data-ttu-id="e602a-124">Dans le flux de données personnalisé, la valeur de la propriété `ProductName` s'affiche à la fois dans l'élément `author` et comme élément de propriété `ProductName`, et la propriété `UnitsInStock` s'affiche dans un élément personnalisé possédant son propre espace de noms unique et avec la propriété `ReorderLevel` comme attribut :</span><span class="sxs-lookup"><span data-stu-id="e602a-124">In the customized data feed, the `ProductName` property value is displayed in both in the `author` element and as the `ProductName` property element, and the `UnitsInStock` property is displayed in a custom element that has its own unique namespace and with the `ReorderLevel` property as an attribute:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedResultProduct](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/edmfeedresult.xml#edmfeedresultproduct)]  
  
 <span data-ttu-id="e602a-125">Pour plus d’informations, consultez [Comment : personnaliser les flux avec le fournisseur Entity Framework](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-125">For more information, see [How to: Customize Feeds with the Entity Framework Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e602a-126">Étant donné que les extensions au modèle de données ne sont pas prises en charge par le Concepteur d’entités, vous devez modifier manuellement le fichier XML qui contient le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-126">Because extensions to the data model are not supported by the Entity Designer, you must manually modify the XML file that contains the data model.</span></span> <span data-ttu-id="e602a-127">Pour plus d’informations sur le fichier .edmx généré par le [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] tools, consultez [présentation d’un fichier .edmx](https://msdn.microsoft.com/library/f4c8e7ce-1db6-417e-9759-15f8b55155d4).</span><span class="sxs-lookup"><span data-stu-id="e602a-127">For more information about the .edmx file that is generated by the [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] tools, see [.edmx File Overview](https://msdn.microsoft.com/library/f4c8e7ce-1db6-417e-9759-15f8b55155d4).</span></span>  
  
### <a name="custom-feed-attributes"></a><span data-ttu-id="e602a-128">Attributs de flux personnalisés</span><span class="sxs-lookup"><span data-stu-id="e602a-128">Custom Feed Attributes</span></span>  
 <span data-ttu-id="e602a-129">La table suivante affiche les attributs XML qui personnalisent les flux que vous pouvez ajouter au CSDL (Conceptual Schema Definition Language) qui définit le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-129">The following table shows the XML attributes that customize feeds that you can add to the conceptual schema definition language (CSDL) that defines the data model.</span></span> <span data-ttu-id="e602a-130">Ces attributs sont équivalents aux propriétés de <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> utilisées avec le fournisseur de réflexion.</span><span class="sxs-lookup"><span data-stu-id="e602a-130">These attributes are equivalent to the properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> used with the reflection provider.</span></span>  
  
|<span data-ttu-id="e602a-131">Nom d'attribut</span><span class="sxs-lookup"><span data-stu-id="e602a-131">Attribute name</span></span>|<span data-ttu-id="e602a-132">Description</span><span class="sxs-lookup"><span data-stu-id="e602a-132">Description</span></span>|  
|--------------------|-----------------|  
|`FC_ContentKind`|<span data-ttu-id="e602a-133">Indique le type de contenu.</span><span class="sxs-lookup"><span data-stu-id="e602a-133">Indicates the type of the content.</span></span> <span data-ttu-id="e602a-134">Les mots clés suivants définissent des types de contenu de syndication.</span><span class="sxs-lookup"><span data-stu-id="e602a-134">The following keywords define syndication content types.</span></span><br /><br /> <span data-ttu-id="e602a-135">`text:` La valeur de propriété est affichée dans le flux sous forme de texte.</span><span class="sxs-lookup"><span data-stu-id="e602a-135">`text:` The property value is displayed in the feed as text.</span></span><br /><br /> <span data-ttu-id="e602a-136">`html:` La valeur de propriété est affichée dans le flux au format HTML.</span><span class="sxs-lookup"><span data-stu-id="e602a-136">`html:` The property value is displayed in the feed as HTML.</span></span><br /><br /> <span data-ttu-id="e602a-137">`xhtml:` La valeur de propriété est affichée dans le flux en tant que code HTML au format XML.</span><span class="sxs-lookup"><span data-stu-id="e602a-137">`xhtml:` The property value is displayed in the feed as XML-formatted HTML.</span></span><br /><br /> <span data-ttu-id="e602a-138">Ces mots clés sont équivalents aux valeurs de l'énumération <xref:System.Data.Services.Common.SyndicationTextContentKind> utilisées avec le fournisseur de réflexion.</span><span class="sxs-lookup"><span data-stu-id="e602a-138">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationTextContentKind> enumeration used with the reflection provider.</span></span><br /><br /> <span data-ttu-id="e602a-139">Cet attribut n'est pas pris en charge lorsque les attributs `FC_NsPrefix` et `FC_NsUri` sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="e602a-139">This attribute is not supported when the `FC_NsPrefix` and `FC_NsUri` attributes are used.</span></span><br /><br /> <span data-ttu-id="e602a-140">Lorsque vous spécifiez une valeur de `xhtml` pour l'attribut `FC_ContentKind`, vous devez vérifier que la valeur de propriété contient le formatage XML approprié.</span><span class="sxs-lookup"><span data-stu-id="e602a-140">When you specify a value of `xhtml` for the `FC_ContentKind` attribute, you must ensure that the property value contains properly formatted XML.</span></span> <span data-ttu-id="e602a-141">Le service de données retourne la valeur sans effectuer de transformations.</span><span class="sxs-lookup"><span data-stu-id="e602a-141">The data service returns the value without performing any transformations.</span></span> <span data-ttu-id="e602a-142">Vous devez également vérifier que tous les préfixes d'élément XML dans le XML retourné ont un URI d'espace de noms et le préfixe défini dans le flux mappé.</span><span class="sxs-lookup"><span data-stu-id="e602a-142">You must also ensure that any XML element prefixes in the returned XML have a namespace URI and prefix defined in the mapped feed.</span></span>|  
|`FC_KeepInContent`|<span data-ttu-id="e602a-143">Indique que la valeur de propriété référencée doit être incluse à la fois dans la section de contenu du flux et dans l'emplacement mappé.</span><span class="sxs-lookup"><span data-stu-id="e602a-143">Indicates that the referenced property value should be included both in the content section of the feed and in the mapped location.</span></span> <span data-ttu-id="e602a-144">Les valeurs valides sont `true` et `false`.</span><span class="sxs-lookup"><span data-stu-id="e602a-144">Valid values are `true` and `false`.</span></span> <span data-ttu-id="e602a-145">Pour rendre le flux résultant de compatibilité descendante avec les versions antérieures de [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], affectez la valeur `true` pour vous assurer que la valeur est incluse dans la section de contenu du flux de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-145">To make the resulting feed backward-compatible with earlier versions of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], specify a value of `true` to make sure that the value is included in the content section of the feed.</span></span>|  
|`FC_NsPrefix`|<span data-ttu-id="e602a-146">Préfixe d'espace de noms de l'élément XML dans un mappage de non-syndication.</span><span class="sxs-lookup"><span data-stu-id="e602a-146">The namespace prefix of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="e602a-147">Cet attribut doit être utilisé avec l'attribut `FC_NsUri` et ne peut pas être utilisé avec l'attribut `FC_ContentKind`.</span><span class="sxs-lookup"><span data-stu-id="e602a-147">This attribute must be used with the `FC_NsUri` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_NsUri`|<span data-ttu-id="e602a-148">URI d'espace de noms de l'élément XML dans un mappage de non-syndication.</span><span class="sxs-lookup"><span data-stu-id="e602a-148">The namespace URI of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="e602a-149">Cet attribut doit être utilisé avec l'attribut `FC_NsPrefix` et ne peut pas être utilisé avec l'attribut `FC_ContentKind`.</span><span class="sxs-lookup"><span data-stu-id="e602a-149">This attribute must be used with the `FC_NsPrefix` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_SourcePath`|<span data-ttu-id="e602a-150">Chemin d'accès de la propriété de l'entité à laquelle s'applique cette règle de mappage de flux.</span><span class="sxs-lookup"><span data-stu-id="e602a-150">The path of the property of the entity to which this feed mapping rule applies.</span></span> <span data-ttu-id="e602a-151">Cet attribut est pris en charge uniquement lorsqu'il est utilisé dans un élément `EntityType`.</span><span class="sxs-lookup"><span data-stu-id="e602a-151">This attribute is only supported when it is used in an `EntityType` element.</span></span><br /><br /> <span data-ttu-id="e602a-152">La propriété <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> ne peut pas référencer directement de type complexe.</span><span class="sxs-lookup"><span data-stu-id="e602a-152">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot directly reference a complex type.</span></span> <span data-ttu-id="e602a-153">Pour les types complexes, vous devez utiliser une expression de chemin d'accès où les noms de propriété sont séparés par une barre oblique inverse (`/`).</span><span class="sxs-lookup"><span data-stu-id="e602a-153">For complex types, you must use a path expression where property names are separated by a backslash (`/`) character.</span></span> <span data-ttu-id="e602a-154">Par exemple, les valeurs suivantes sont autorisées pour un type d’entité `Person` avec une propriété entière `Age` et une propriété complexe</span><span class="sxs-lookup"><span data-stu-id="e602a-154">For example, the following values are allowed for an entity type `Person` with an integer property `Age` and a complex property</span></span><br /><br /> <span data-ttu-id="e602a-155">`Address`:</span><span class="sxs-lookup"><span data-stu-id="e602a-155">`Address`:</span></span><br /><br /> `Age`<br /><br /> `Address/Street`<br /><br /> <span data-ttu-id="e602a-156">La propriété <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> ne peut pas avoir une valeur qui contient un espace ou un autre caractère qui n'est pas valide dans un nom de propriété.</span><span class="sxs-lookup"><span data-stu-id="e602a-156">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot be set to a value that contains a space or any other character that is not valid in a property name.</span></span>|  
|`FC_TargetPath`|<span data-ttu-id="e602a-157">Nom de l'élément cible du flux résultant pour mapper la propriété.</span><span class="sxs-lookup"><span data-stu-id="e602a-157">The name of the target element of the resulting feed to map the property.</span></span> <span data-ttu-id="e602a-158">Cet élément peut être un élément défini par la spécification Atom ou un élément personnalisé.</span><span class="sxs-lookup"><span data-stu-id="e602a-158">This element can be an element defined by the Atom specification or a custom element.</span></span><br /><br /> <span data-ttu-id="e602a-159">Les mots clés suivants sont des valeurs cible-chemin d'accès de syndication prédéfinies qui pointent vers un emplacement spécifique dans un flux [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e602a-159">The following keywords are predefined syndication target-path values that point to specific location in an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed.</span></span><br /><br /> <span data-ttu-id="e602a-160">`SyndicationAuthorEmail:` Le `atom:email` élément enfant de le `atom:author` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-160">`SyndicationAuthorEmail:` The `atom:email` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="e602a-161">`SyndicationAuthorName:` Le `atom:name` élément enfant de le `atom:author` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-161">`SyndicationAuthorName:` The `atom:name` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="e602a-162">`SyndicationAuthorUri:` Le `atom:uri` élément enfant de le `atom:author` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-162">`SyndicationAuthorUri:` The `atom:uri` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="e602a-163">`SyndicationContributorEmail:` Le `atom:email` élément enfant de le `atom:contributor` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-163">`SyndicationContributorEmail:` The `atom:email` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="e602a-164">`SyndicationContributorName:` Le `atom:name` élément enfant de le `atom:contributor` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-164">`SyndicationContributorName:` The `atom:name` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="e602a-165">`SyndicationContributorUri:` Le `atom:uri` élément enfant de le `atom:contributor` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-165">`SyndicationContributorUri:` The `atom:uri` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="e602a-166">`SyndicationCustomProperty:` Un élément de propriété personnalisé.</span><span class="sxs-lookup"><span data-stu-id="e602a-166">`SyndicationCustomProperty:` A custom property element.</span></span> <span data-ttu-id="e602a-167">Lors du mappage à un élément personnalisé, la cible doit être une expression de chemin d'accès où les éléments imbriqués sont séparés par une barre oblique inverse (`/`) et les attributs sont spécifiés par une esperluette (`@`).</span><span class="sxs-lookup"><span data-stu-id="e602a-167">When mapping to a custom element, the target must be a path expression in which nested elements are separated by a backslash (`/`) and attributes are specified by an ampersand (`@`).</span></span> <span data-ttu-id="e602a-168">Dans l'exemple suivant, la chaîne `UnitsInStock/@ReorderLevel` mappe une valeur de propriété à un attribut nommé `ReorderLevel` sur un élément enfant nommé `UnitsInStock` de l'élément d'entrée racine.</span><span class="sxs-lookup"><span data-stu-id="e602a-168">In the following example, the string `UnitsInStock/@ReorderLevel` maps a property value to an attribute named `ReorderLevel` on a child element named `UnitsInStock` of the root entry element.</span></span><br /><br /> `<Property Name="ReorderLevel" Type="Int16"               m:FC_TargetPath="UnitsInStock/@ReorderLevel"               m:FC_NsPrefix="Northwind"               m:FC_NsUri="http://schemas.examples.microsoft.com/dataservices"               m:FC_KeepInContent="false"               />`<br /><br /> <span data-ttu-id="e602a-169">Lorsque la cible est un nom d'élément personnalisé, les attributs `FC_NsPrefix` et `FC_NsUri` doivent également être spécifiés.</span><span class="sxs-lookup"><span data-stu-id="e602a-169">When the target is a custom element name, the `FC_NsPrefix` and `FC_NsUri` attributes must also be specified.</span></span><br /><br /> <span data-ttu-id="e602a-170">`SyndicationPublished:` Le `atom:published` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-170">`SyndicationPublished:` The `atom:published` element.</span></span><br /><br /> <span data-ttu-id="e602a-171">`SyndicationRights:` Le `atom:rights` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-171">`SyndicationRights:` The `atom:rights` element.</span></span><br /><br /> <span data-ttu-id="e602a-172">`SyndicationSummary:` Le `atom:summary` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-172">`SyndicationSummary:` The `atom:summary` element.</span></span><br /><br /> <span data-ttu-id="e602a-173">`SyndicationTitle:` Le `atom:title` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-173">`SyndicationTitle:` The `atom:title` element.</span></span><br /><br /> <span data-ttu-id="e602a-174">`SyndicationUpdated:` Le `atom:updated` élément.</span><span class="sxs-lookup"><span data-stu-id="e602a-174">`SyndicationUpdated:` The `atom:updated` element.</span></span><br /><br /> <span data-ttu-id="e602a-175">Ces mots clés sont équivalents aux valeurs de l'énumération <xref:System.Data.Services.Common.SyndicationItemProperty> utilisées avec le fournisseur de réflexion.</span><span class="sxs-lookup"><span data-stu-id="e602a-175">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationItemProperty> enumeration used with the reflection provider.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="e602a-176">Les noms et valeurs d'attributs respectent la casse.</span><span class="sxs-lookup"><span data-stu-id="e602a-176">Attribute names and values are case-sensitive.</span></span> <span data-ttu-id="e602a-177">Les attributs peuvent être appliqués à l'élément `EntityType` ou à un ou plusieurs éléments `Property`, mais pas aux deux.</span><span class="sxs-lookup"><span data-stu-id="e602a-177">Attributes can be applied either to the `EntityType` element or to one or more `Property` elements, but not to both.</span></span>  
  
## <a name="customizing-feeds-with-the-reflection-provider"></a><span data-ttu-id="e602a-178">Personnalisation des flux avec le fournisseur de réflexion</span><span class="sxs-lookup"><span data-stu-id="e602a-178">Customizing Feeds with the Reflection Provider</span></span>  
 <span data-ttu-id="e602a-179">Pour personnaliser des flux pour un modèle de données ayant été implémenté à l'aide du fournisseur de réflexion, ajoutez une ou plusieurs instances de l'attribut <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> aux classes qui représentent des types d'entité dans le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-179">To customize feeds for a data model that was implemented by using the reflection provider, add one or more instances of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> attribute to the classes that represent entity types in the data model.</span></span> <span data-ttu-id="e602a-180">Les propriétés de la classe <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> correspondent aux attributs de personnalisation du flux décrits dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="e602a-180">The properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> class correspond to the feed customization attributes that are described in the previous section.</span></span> <span data-ttu-id="e602a-181">Voici un exemple de la déclaration du type `Order` avec le mappage de flux personnalisé défini pour les deux propriétés.</span><span class="sxs-lookup"><span data-stu-id="e602a-181">The following is an example of the declaration of the `Order` type, with custom feed mapping defined for both properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e602a-182">Le modèle de données pour cet exemple est défini dans la rubrique [Comment : créer un Service de données à l’aide du fournisseur de réflexion](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-182">The data model for this example is defined in the topic [How to: Create a Data Service Using the Reflection Provider](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md).</span></span>  
  
 [!code-csharp[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria custom feeds/cs/orderitems.svc.cs#customorderfeed)]
 [!code-vb[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria custom feeds/vb/orderitems.svc.vb#customorderfeed)]  
  
 <span data-ttu-id="e602a-183">Ces attributs produisent le flux de données personnalisé suivant pour le jeu d'entités `Orders`.</span><span class="sxs-lookup"><span data-stu-id="e602a-183">These attributes produce the following customized data feed for the `Orders` entity set.</span></span> <span data-ttu-id="e602a-184">Dans ce flux personnalisé, le `OrderId` valeur de la propriété affiche uniquement dans le `title` élément de la `entry` et le `Customer` valeur de la propriété affiche à la fois dans le `author` élément et en tant que le `Customer` property, élément :</span><span class="sxs-lookup"><span data-stu-id="e602a-184">In this customized feed, the `OrderId` property value displays only in the `title` element of the `entry` and the `Customer` property value displays both in the `author` element and as the `Customer` property element:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#IQueryableFeedResult](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/iqueryablefeedresult.xml#iqueryablefeedresult)]  
  
 <span data-ttu-id="e602a-185">Pour plus d’informations, consultez [Comment : personnaliser les flux avec le fournisseur de réflexion](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-185">For more information, see [How to: Customize Feeds with the Reflection Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-a-custom-data-service-provider"></a><span data-ttu-id="e602a-186">Personnalisation de flux avec un fournisseur de services de données personnalisé</span><span class="sxs-lookup"><span data-stu-id="e602a-186">Customizing Feeds with a Custom Data Service Provider</span></span>  
 <span data-ttu-id="e602a-187">La personnalisation de flux pour un modèle de données défini à l'aide d'un fournisseur de services de données personnalisé est définie pour un type de ressource en appelant le <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> sur l'objet <xref:System.Data.Services.Providers.ResourceType> qui représente un type d'entité dans le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-187">Feed customization for a data model defined by using a custom data service provider is defined for a resource type by calling the <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> on the <xref:System.Data.Services.Providers.ResourceType> that represents an entity type in the data model.</span></span> <span data-ttu-id="e602a-188">Pour plus d’informations, consultez [fournisseurs de services de données personnalisés](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-188">For more information, see [Custom Data Service Providers](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span></span>  
  
## <a name="consuming-custom-feeds"></a><span data-ttu-id="e602a-189">Consommation de flux personnalisés</span><span class="sxs-lookup"><span data-stu-id="e602a-189">Consuming Custom Feeds</span></span>  
 <span data-ttu-id="e602a-190">Lorsque votre application consomme directement un [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] flux, il doit être en mesure de traiter les éléments personnalisés et les attributs dans le flux retourné.</span><span class="sxs-lookup"><span data-stu-id="e602a-190">When your application directly consumes an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, it must be able to process any customized elements and attributes in the returned feed.</span></span> <span data-ttu-id="e602a-191">Lorsque vous avez implémenté des flux personnalisés dans votre modèle de données, indépendamment du fournisseur de services de données, le point de terminaison `$metadata` retourne des informations de flux personnalisées sous la forme d'attributs de flux personnalisés dans le CSDL retourné par le service de données.</span><span class="sxs-lookup"><span data-stu-id="e602a-191">When you have implemented custom feeds in your data model, regardless of the data service provider, the `$metadata` endpoint returns custom feed information as custom feed attributes in the CSDL returned by the data service.</span></span> <span data-ttu-id="e602a-192">Lorsque vous utilisez le **ajouter une référence de Service** boîte de dialogue ou la [datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md) outil pour générer des classes de service de données client, le flux personnalisé attributs sont utilisés pour garantir que les demandes et réponses le service de données sont gérées correctement.</span><span class="sxs-lookup"><span data-stu-id="e602a-192">When you use the **Add Service Reference** dialog or the [datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md) tool to generate client data service classes, the customized feed attributes are used to guarantee that requests and responses to the data service are handled correctly.</span></span>  
  
## <a name="feed-customization-considerations"></a><span data-ttu-id="e602a-193">Considérations de personnalisation de flux</span><span class="sxs-lookup"><span data-stu-id="e602a-193">Feed Customization Considerations</span></span>  
 <span data-ttu-id="e602a-194">Tenez compte des considérations suivantes lorsque vous définissez des mappages de flux personnalisés.</span><span class="sxs-lookup"><span data-stu-id="e602a-194">You should consider the following when defining custom feed mappings.</span></span>  
  
-   <span data-ttu-id="e602a-195">Le [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client traite les éléments mappés dans un flux comme vide lorsqu’ils contiennent uniquement des espaces blancs.</span><span class="sxs-lookup"><span data-stu-id="e602a-195">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client treats mapped elements in a feed as empty when they contain only white space.</span></span> <span data-ttu-id="e602a-196">Pour cette raison, les éléments mappés qui contiennent uniquement un espace blanc ne sont pas matérialisés sur le client avec le même espace blanc.</span><span class="sxs-lookup"><span data-stu-id="e602a-196">Because of this, mapped elements that contain only white space are not materialized on the client with the same white space.</span></span> <span data-ttu-id="e602a-197">Pour conserver cet espace blanc sur le client, vous devez définir la valeur de `KeepInContext` à `true` dans l’attribut de mappage de flux.</span><span class="sxs-lookup"><span data-stu-id="e602a-197">To preserve this white space on the client, you must set the value of `KeepInContext` to `true` in the feed mapping attribute.</span></span>  
  
## <a name="versioning-requirements"></a><span data-ttu-id="e602a-198">Exigences pour le contrôle de version</span><span class="sxs-lookup"><span data-stu-id="e602a-198">Versioning Requirements</span></span>  
 <span data-ttu-id="e602a-199">La personnalisation de flux a les conditions requises pour le contrôle de version de protocole [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] suivantes :</span><span class="sxs-lookup"><span data-stu-id="e602a-199">Feed customization has the following [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol versioning requirements:</span></span>  
  
-   <span data-ttu-id="e602a-200">La personnalisation de flux requiert que le client et le service de données prennent en charge les versions 2.0 et ultérieures du protocole [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e602a-200">Feed customization requires that both the client and data service support version 2.0 of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol and later versions.</span></span>  
  
 <span data-ttu-id="e602a-201">Pour plus d’informations, consultez [gestion des versions du Service de données](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="e602a-201">For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e602a-202">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e602a-202">See Also</span></span>  
 [<span data-ttu-id="e602a-203">Fournisseur de réflexion</span><span class="sxs-lookup"><span data-stu-id="e602a-203">Reflection Provider</span></span>](../../../../docs/framework/data/wcf/reflection-provider-wcf-data-services.md)  
 [<span data-ttu-id="e602a-204">Fournisseur Entity Framework</span><span class="sxs-lookup"><span data-stu-id="e602a-204">Entity Framework Provider</span></span>](../../../../docs/framework/data/wcf/entity-framework-provider-wcf-data-services.md)
