---
title: "Optimisation des performances : Ressources d'application"
ms.date: 03/30/2017
helpviewer_keywords:
- application resources [WPF], performance
- resources [WPF], performance
- static resources [WPF]
- sharing resources [WPF]
- brushes [WPF], performance
- sharing brushes without copying [WPF]
ms.assetid: 62b88488-c08e-4804-b7de-a1c34fbe929c
ms.openlocfilehash: 921a67a24464ff5ac782045ae022f7766f32d579
ms.sourcegitcommit: 0c48191d6d641ce88d7510e319cf38c0e35697d0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/05/2019
ms.locfileid: "57352397"
---
# <a name="optimizing-performance-application-resources"></a><span data-ttu-id="c68b7-102">Optimisation des performances : Ressources d'application</span><span class="sxs-lookup"><span data-stu-id="c68b7-102">Optimizing Performance: Application Resources</span></span>
[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c68b7-103">vous permet de partager des ressources d’application afin que vous pouvez prendre en charge une apparence cohérente ou un comportement à travers des éléments similaires type.</span><span class="sxs-lookup"><span data-stu-id="c68b7-103">allows you to share application resources so that you can support a consistent look or behavior across similar-typed elements.</span></span> <span data-ttu-id="c68b7-104">Cette rubrique fournit quelques recommandations dans ce domaine qui peut vous aider à améliorent les performances de vos applications.</span><span class="sxs-lookup"><span data-stu-id="c68b7-104">This topic provides a few recommendations in this area that can help you improve the performance of your applications.</span></span>  
  
 <span data-ttu-id="c68b7-105">Pour plus d’informations sur les ressources, consultez la page [Ressources XAML](xaml-resources.md).</span><span class="sxs-lookup"><span data-stu-id="c68b7-105">For more information on resources, see [XAML Resources](xaml-resources.md).</span></span>  
  
## <a name="sharing-resources"></a><span data-ttu-id="c68b7-106">Partage de ressources</span><span class="sxs-lookup"><span data-stu-id="c68b7-106">Sharing resources</span></span>  
 <span data-ttu-id="c68b7-107">Si votre application utilise des contrôles personnalisés et définit des ressources dans un <xref:System.Windows.ResourceDictionary> (ou nœud de ressources de XAML), il est recommandé que vous définissiez les ressources sur le <xref:System.Windows.Application> ou <xref:System.Windows.Window> au niveau de l’objet, ou les définir dans le thème par défaut pour le contrôles personnalisés.</span><span class="sxs-lookup"><span data-stu-id="c68b7-107">If your application uses custom controls and defines resources in a <xref:System.Windows.ResourceDictionary> (or XAML Resources node), it is recommended that you either define the resources at the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or define them in the default theme for the custom controls.</span></span> <span data-ttu-id="c68b7-108">Définition des ressources dans un contrôle personnalisé <xref:System.Windows.ResourceDictionary> impose un impact sur les performances pour chaque instance de ce contrôle.</span><span class="sxs-lookup"><span data-stu-id="c68b7-108">Defining resources in a custom control's <xref:System.Windows.ResourceDictionary> imposes a performance impact for every instance of that control.</span></span> <span data-ttu-id="c68b7-109">Par exemple, si vous avez des opérations exigeantes en performances pinceau définies en tant que partie de la définition de ressource d’un contrôle personnalisé et le nombre d’instances du contrôle personnalisé, plage de travail de l’application augmente considérablement.</span><span class="sxs-lookup"><span data-stu-id="c68b7-109">For example, if you have performance-intensive brush operations defined as part of the resource definition of a custom control and many instances of the custom control, the application's working set will increase significantly.</span></span>  
  
 <span data-ttu-id="c68b7-110">Pour illustrer ce point, considérez les points suivants.</span><span class="sxs-lookup"><span data-stu-id="c68b7-110">To illustrate this point, consider the following.</span></span> <span data-ttu-id="c68b7-111">Supposons que vous développez un jeu de carte à l’aide [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c68b7-111">Let's say you are developing a card game using [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="c68b7-112">Pour la plupart des jeux de cartes, vous avez besoin de 52 cartes avec 52 faces différentes.</span><span class="sxs-lookup"><span data-stu-id="c68b7-112">For most card games, you need 52 cards with 52 different faces.</span></span> <span data-ttu-id="c68b7-113">Vous décidez d’implémenter un contrôle personnalisé de carte et vous définissez 52 pinceaux (chacun représentant une face de carte) dans les ressources de votre carte de contrôle personnalisé.</span><span class="sxs-lookup"><span data-stu-id="c68b7-113">You decide to implement a card custom control and you define 52 brushes (each representing a card face) in the resources of your card custom control.</span></span> <span data-ttu-id="c68b7-114">Dans votre application principale, vous créez initialement 52 instances de ce contrôle personnalisé de carte.</span><span class="sxs-lookup"><span data-stu-id="c68b7-114">In your main application, you initially create 52 instances of this card custom control.</span></span> <span data-ttu-id="c68b7-115">Chaque instance de la carte de contrôle personnalisé génère 52 instances de <xref:System.Windows.Media.Brush> objets, ce qui vous donne un total de 52 \* 52 <xref:System.Windows.Media.Brush> objets dans votre application.</span><span class="sxs-lookup"><span data-stu-id="c68b7-115">Each instance of the card custom control generates 52 instances of <xref:System.Windows.Media.Brush> objects, which gives you a total of 52 \* 52 <xref:System.Windows.Media.Brush> objects in your application.</span></span> <span data-ttu-id="c68b7-116">En déplaçant les pinceaux hors les ressources de contrôle personnalisé de carte à la <xref:System.Windows.Application> ou <xref:System.Windows.Window> au niveau objet, ou en les définissant dans le thème par défaut pour le contrôle personnalisé, vous réduisez la plage de travail de l’application, puisque vous partagez maintenant les 52 pinceaux parmi 52 d’instances de la carte de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c68b7-116">By moving the brushes out of the card custom control resources to the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or defining them in the default theme for the custom control, you reduce the working set of the application, since you are now sharing the 52 brushes among 52 instances of the card control.</span></span>  
  
## <a name="sharing-a-brush-without-copying"></a><span data-ttu-id="c68b7-117">Partage d’un pinceau sans copier</span><span class="sxs-lookup"><span data-stu-id="c68b7-117">Sharing a Brush without Copying</span></span>  
 <span data-ttu-id="c68b7-118">Si vous avez plusieurs éléments en utilisant le même <xref:System.Windows.Media.Brush> de l’objet, définissez le pinceau en tant que ressource et référencer, plutôt que de définir le pinceau inline dans [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c68b7-118">If you have multiple elements using the same <xref:System.Windows.Media.Brush> object, define the brush as a resource and reference it, rather than defining the brush inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)].</span></span> <span data-ttu-id="c68b7-119">Cette méthode crée une instance et la réutiliser, tandis que la définition de pinceaux inline dans [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] crée une nouvelle instance pour chaque élément.</span><span class="sxs-lookup"><span data-stu-id="c68b7-119">This method will create one instance and reuse it, whereas defining brushes inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] creates a new instance for each element.</span></span>  
  
 <span data-ttu-id="c68b7-120">L’exemple de balisage suivant illustre ce point :</span><span class="sxs-lookup"><span data-stu-id="c68b7-120">The following markup sample illustrates this point:</span></span>  
  
 [!code-xaml[Performance#PerformanceSnippet7](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/BrushResource.xaml#performancesnippet7)]  
  
## <a name="use-static-resources-when-possible"></a><span data-ttu-id="c68b7-121">Utiliser des ressources statiques lorsque cela est Possible</span><span class="sxs-lookup"><span data-stu-id="c68b7-121">Use Static Resources when Possible</span></span>  
 <span data-ttu-id="c68b7-122">Une ressource statique fournit une valeur pour n’importe quel attribut de propriété XAML en recherchant une référence à une ressource déjà définie.</span><span class="sxs-lookup"><span data-stu-id="c68b7-122">A static resource provides a value for any XAML property attribute by looking up a reference to an already defined resource.</span></span> <span data-ttu-id="c68b7-123">Le comportement de recherche pour cette ressource est analogue à la recherche au moment de la compilation.</span><span class="sxs-lookup"><span data-stu-id="c68b7-123">Lookup behavior for that resource is analogous to compile-time lookup.</span></span>  
  
 <span data-ttu-id="c68b7-124">Une ressource dynamique, quant à eux, crée une expression temporaire pendant la compilation initiale et donc diffèrera la recherche des ressources jusqu'à ce que la valeur de la ressource demandée est réellement nécessaire pour construire un objet.</span><span class="sxs-lookup"><span data-stu-id="c68b7-124">A dynamic resource, on the other hand, will create a temporary expression during the initial compilation and thus defer lookup for resources until the requested resource value is actually required in order to construct an object.</span></span> <span data-ttu-id="c68b7-125">Le comportement de recherche pour cette ressource est analogue à la recherche au moment de l’exécution, qui impose un impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="c68b7-125">Lookup behavior for that resource is analogous to run-time lookup, which imposes a performance impact.</span></span> <span data-ttu-id="c68b7-126">Utilisez les ressources statiques dès que possible dans votre application, à l’aide de ressources dynamiques uniquement lorsque cela est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c68b7-126">Use static resources whenever possible in your application, using dynamic resources only when necessary.</span></span>  
  
 <span data-ttu-id="c68b7-127">L’exemple de balisage suivant illustre l’utilisation de ces deux types de ressources :</span><span class="sxs-lookup"><span data-stu-id="c68b7-127">The following markup sample shows the use of both types of resources:</span></span>  
  
 [!code-xaml[Performance#PerformanceSnippet8](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/DynamicResource.xaml#performancesnippet8)]  
  
## <a name="see-also"></a><span data-ttu-id="c68b7-128">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c68b7-128">See also</span></span>
- [<span data-ttu-id="c68b7-129">Optimisation des performances des applications WPF</span><span class="sxs-lookup"><span data-stu-id="c68b7-129">Optimizing WPF Application Performance</span></span>](optimizing-wpf-application-performance.md)
- [<span data-ttu-id="c68b7-130">Planification des performances des applications</span><span class="sxs-lookup"><span data-stu-id="c68b7-130">Planning for Application Performance</span></span>](planning-for-application-performance.md)
- [<span data-ttu-id="c68b7-131">Tirer parti du matériel</span><span class="sxs-lookup"><span data-stu-id="c68b7-131">Taking Advantage of Hardware</span></span>](optimizing-performance-taking-advantage-of-hardware.md)
- [<span data-ttu-id="c68b7-132">Disposition et conception</span><span class="sxs-lookup"><span data-stu-id="c68b7-132">Layout and Design</span></span>](optimizing-performance-layout-and-design.md)
- [<span data-ttu-id="c68b7-133">Graphiques 2D et acquisition d'images</span><span class="sxs-lookup"><span data-stu-id="c68b7-133">2D Graphics and Imaging</span></span>](optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="c68b7-134">Comportement de l’objet</span><span class="sxs-lookup"><span data-stu-id="c68b7-134">Object Behavior</span></span>](optimizing-performance-object-behavior.md)
- [<span data-ttu-id="c68b7-135">Text</span><span class="sxs-lookup"><span data-stu-id="c68b7-135">Text</span></span>](optimizing-performance-text.md)
- [<span data-ttu-id="c68b7-136">Liaison de données</span><span class="sxs-lookup"><span data-stu-id="c68b7-136">Data Binding</span></span>](optimizing-performance-data-binding.md)
- [<span data-ttu-id="c68b7-137">Autres recommandations relatives aux performances</span><span class="sxs-lookup"><span data-stu-id="c68b7-137">Other Performance Recommendations</span></span>](optimizing-performance-other-recommendations.md)
