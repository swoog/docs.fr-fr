---
title: Sélectionner la version du langage C# - Guide C#
description: Configurer le compilateur pour effectuer la validation de la syntaxe à l’aide d’une version de compilateur spécifique
ms.date: 02/28/2019
ms.openlocfilehash: 6d31a757171bd2eecdcc1fbd3da765dcb3fe45c0
ms.sourcegitcommit: 79066169e93d9d65203028b21983574ad9dcf6b4
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57212025"
---
# <a name="select-the-c-language-version"></a><span data-ttu-id="5a374-103">Sélectionner la version du langage C#</span><span class="sxs-lookup"><span data-stu-id="5a374-103">Select the C# language version</span></span>

<span data-ttu-id="5a374-104">Le compilateur C# détermine une version du langage par défaut en fonction du ou des versions cibles de .NET Framework du projet concerné.</span><span class="sxs-lookup"><span data-stu-id="5a374-104">The C# compiler determines a default language version based on your project's target framework or frameworks.</span></span> <span data-ttu-id="5a374-105">Lorsqu’il s’agit d’une préversion cible pour laquelle il existe une préversion du langage correspondante, c’est cette dernière qui est utilisée.</span><span class="sxs-lookup"><span data-stu-id="5a374-105">When your project targets a preview framework that has a corresponding preview language version, the language version used is the preview language version.</span></span> <span data-ttu-id="5a374-106">Dans le cas contraire, la version du langage sera la dernière version mineure.</span><span class="sxs-lookup"><span data-stu-id="5a374-106">When your project doesn't target a preview framework, the language version used is the latest minor version.</span></span>

<span data-ttu-id="5a374-107">Par exemple, pendant la période de préversion de .NET Core 3.0, un projet ciblant `netcoreapp3.0` ou `netstandard2.1` (les deux en préversion) utilisera le langage C# 8.0 (également en préversion).</span><span class="sxs-lookup"><span data-stu-id="5a374-107">For example, during the preview period for .NET Core 3.0, any project that targets `netcoreapp3.0` or `netstandard2.1` (both in preview) will use the C# 8.0 language (also in preview).</span></span> <span data-ttu-id="5a374-108">Les projets dont la version ciblée est en production emploieront C# 7.3 (la dernière version publiée).</span><span class="sxs-lookup"><span data-stu-id="5a374-108">Projects targeting any released version will use C# 7.3 (the latest released version).</span></span> <span data-ttu-id="5a374-109">Grâce à ce comportement, tout projet ciblant .NET Framework bénéficiera de la dernière version (C# 7.3).</span><span class="sxs-lookup"><span data-stu-id="5a374-109">This behavior means that any project targeting .NET Framework will use latest (C# 7.3).</span></span> 

<span data-ttu-id="5a374-110">Cette fonctionnalité dissocie la décision d’installer de nouvelles versions du kit SDK et des outils dans votre environnement de développement de la décision d’incorporer de nouvelles fonctionnalités de langage dans un projet.</span><span class="sxs-lookup"><span data-stu-id="5a374-110">This capability decouples the decision to install new versions of the SDK and tools in your development environment from the decision to incorporate new language features in a project.</span></span> <span data-ttu-id="5a374-111">Vous pouvez installer la dernière version du SDK et des outils sur votre ordinateur de build.</span><span class="sxs-lookup"><span data-stu-id="5a374-111">You can install the latest SDK and tools on your build machine.</span></span> <span data-ttu-id="5a374-112">Chaque projet peut être configuré pour utiliser une version spécifique du langage pour sa build.</span><span class="sxs-lookup"><span data-stu-id="5a374-112">Each project can be configured to use a specific version of the language for its build.</span></span> <span data-ttu-id="5a374-113">Dans le comportement par défaut, les fonctionnalités du langage qui s’appuient sur de nouveaux types ou comportements CLR ne sont activées que pour les projets ciblant ces versions de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5a374-113">The default behavior means that any language features that rely on new types or new CLR behavior are enabled only when projects target those frameworks.</span></span>

<span data-ttu-id="5a374-114">Pour remplacer le comportement par défaut, spécifiez une version du langage.</span><span class="sxs-lookup"><span data-stu-id="5a374-114">You can override the default behavior by specifying a language version.</span></span> <span data-ttu-id="5a374-115">Il existe plusieurs façons de définir la version du langage :</span><span class="sxs-lookup"><span data-stu-id="5a374-115">There are several ways to set the language version:</span></span>

- <span data-ttu-id="5a374-116">Utilisez l’[action rapide Visual Studio](#visual-studio-quick-action).</span><span class="sxs-lookup"><span data-stu-id="5a374-116">Rely on a [Visual Studio quick action](#visual-studio-quick-action).</span></span>
- <span data-ttu-id="5a374-117">Définissez la version du langage dans l’[IU Visual Studio](#set-the-language-version-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="5a374-117">Set the language version in the [Visual Studio UI](#set-the-language-version-in-visual-studio).</span></span>
- <span data-ttu-id="5a374-118">Modifiez manuellement votre [fichier **.csproj**](#edit-the-csproj-file).</span><span class="sxs-lookup"><span data-stu-id="5a374-118">Manually edit your [**.csproj** file](#edit-the-csproj-file).</span></span>
- <span data-ttu-id="5a374-119">Définissez la version du langage [pour plusieurs projets d’un sous-répertoire](#configure-multiple-projects).</span><span class="sxs-lookup"><span data-stu-id="5a374-119">Set the language version [for multiple projects in a subdirectory](#configure-multiple-projects).</span></span>
- <span data-ttu-id="5a374-120">Configurez l’[option de compilateur `-langversion`](#set-the-langversion-compiler-option).</span><span class="sxs-lookup"><span data-stu-id="5a374-120">Configure the [`-langversion` compiler option](#set-the-langversion-compiler-option).</span></span>

## <a name="visual-studio-quick-action"></a><span data-ttu-id="5a374-121">Action rapide Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5a374-121">Visual Studio quick action</span></span>

<span data-ttu-id="5a374-122">Visual Studio vous aide à déterminer la version de langage dont vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="5a374-122">Visual Studio helps you determine the language version you need.</span></span> <span data-ttu-id="5a374-123">Si vous utilisez une fonctionnalité de langage qui n’est pas disponible pour la version configurée, Visual Studio affiche un correctif potentiel pour mettre à jour la version de langage du projet.</span><span class="sxs-lookup"><span data-stu-id="5a374-123">If you use a language feature that is not available for the currently configured version, Visual Studio shows a potential fix to update the language version for the project.</span></span>

## <a name="set-the-language-version-in-visual-studio"></a><span data-ttu-id="5a374-124">Définir la version du langage dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5a374-124">Set the language version in Visual Studio</span></span>

<span data-ttu-id="5a374-125">Vous pouvez définir la version dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5a374-125">You can set the version in Visual Studio.</span></span> <span data-ttu-id="5a374-126">Dans l’Explorateur de solutions, cliquez avec le bouton droit sur le nœud de projet, puis sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="5a374-126">Right-click on the project node in Solution Explorer and select **Properties**.</span></span> <span data-ttu-id="5a374-127">Sélectionnez l’onglet **Build**, puis sélectionnez le bouton **Avancé**.</span><span class="sxs-lookup"><span data-stu-id="5a374-127">Select the **Build** tab and select the **Advanced** button.</span></span> <span data-ttu-id="5a374-128">Dans la liste déroulante, sélectionnez la version.</span><span class="sxs-lookup"><span data-stu-id="5a374-128">In the dropdown, select the version.</span></span> <span data-ttu-id="5a374-129">L’image suivante montre le paramètre "latest" :</span><span class="sxs-lookup"><span data-stu-id="5a374-129">The following image shows the "latest" setting:</span></span>

![Capture d’écran des paramètres de build avancés où vous pouvez spécifier la version du langage](./media/configure-language-version/advanced-build-settings.png)

> [!NOTE]
> <span data-ttu-id="5a374-131">Si vous utilisez l’IDE Visual Studio pour mettre à jour vos fichiers csproj, il crée des nœuds distincts pour chaque configuration de build.</span><span class="sxs-lookup"><span data-stu-id="5a374-131">If you use the Visual Studio IDE to update your csproj files, the IDE creates separate nodes for each build configuration.</span></span> <span data-ttu-id="5a374-132">Vous définissez généralement la même valeur dans toutes les configurations de build, mais vous devez la définir explicitement pour chaque configuration de build ou sélectionner « Toutes les configurations » quand vous modifiez ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="5a374-132">You'll typically set the value the same in all build configurations, but you need to set it explicitly for each build configuration, or select "All Configurations" when you modify this setting.</span></span> <span data-ttu-id="5a374-133">Vous voyez alors ceci dans votre fichier csproj :</span><span class="sxs-lookup"><span data-stu-id="5a374-133">You'll see the following in your csproj file:</span></span>
>
>```xml
> <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
>  <LangVersion>latest</LangVersion>
></PropertyGroup>
>
> <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
>  <LangVersion>latest</LangVersion>
> </PropertyGroup>
> ```
>

## <a name="edit-the-csproj-file"></a><span data-ttu-id="5a374-134">Modifier le fichier csproj</span><span class="sxs-lookup"><span data-stu-id="5a374-134">Edit the csproj file</span></span>

<span data-ttu-id="5a374-135">Vous pouvez définir la version du langage dans votre fichier **.csproj**.</span><span class="sxs-lookup"><span data-stu-id="5a374-135">You can set the language version in your **.csproj** file.</span></span> <span data-ttu-id="5a374-136">Ajoutez un élément tel que celui-ci :</span><span class="sxs-lookup"><span data-stu-id="5a374-136">Add an element like the following:</span></span>

```xml
<PropertyGroup>
   <LangVersion>latest</LangVersion>
</PropertyGroup>
```

<span data-ttu-id="5a374-137">La valeur `latest` utilise la dernière version mineure du langage C#.</span><span class="sxs-lookup"><span data-stu-id="5a374-137">The value `latest` uses the latest minor version of the C# language.</span></span> <span data-ttu-id="5a374-138">Les valeurs valides sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="5a374-138">Valid values are:</span></span>

|<span data-ttu-id="5a374-139">Value</span><span class="sxs-lookup"><span data-stu-id="5a374-139">Value</span></span>|<span data-ttu-id="5a374-140">Signification</span><span class="sxs-lookup"><span data-stu-id="5a374-140">Meaning</span></span>|
|------------|-------------|
|<span data-ttu-id="5a374-141">preview</span><span class="sxs-lookup"><span data-stu-id="5a374-141">preview</span></span>|<span data-ttu-id="5a374-142">Le compilateur accepte toute la syntaxe de langage valide de la dernière préversion.</span><span class="sxs-lookup"><span data-stu-id="5a374-142">The compiler accepts all valid language syntax from the latest preview version.</span></span>|
|<span data-ttu-id="5a374-143">latest</span><span class="sxs-lookup"><span data-stu-id="5a374-143">latest</span></span>|<span data-ttu-id="5a374-144">Le compilateur accepte la syntaxe de la dernière version publiée du compilateur (versions mineures incluses).</span><span class="sxs-lookup"><span data-stu-id="5a374-144">The compiler accepts syntax from the latest released version of the compiler (including minor version).</span></span>|
|<span data-ttu-id="5a374-145">latestMajor</span><span class="sxs-lookup"><span data-stu-id="5a374-145">latestMajor</span></span>|<span data-ttu-id="5a374-146">Le compilateur accepte la syntaxe de la dernière version principale publiée du compilateur.</span><span class="sxs-lookup"><span data-stu-id="5a374-146">The compiler accepts syntax from the latest released major version of the compiler.</span></span>|
|<span data-ttu-id="5a374-147">8.0</span><span class="sxs-lookup"><span data-stu-id="5a374-147">8.0</span></span>|<span data-ttu-id="5a374-148">Le compilateur accepte uniquement la syntaxe incluse dans C# 8.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-148">The compiler accepts only syntax that is included in C# 8.0 or lower.</span></span>|
|<span data-ttu-id="5a374-149">7.3</span><span class="sxs-lookup"><span data-stu-id="5a374-149">7.3</span></span>|<span data-ttu-id="5a374-150">Le compilateur accepte uniquement la syntaxe incluse dans C# 7.3 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-150">The compiler accepts only syntax that is included in C# 7.3 or lower.</span></span>|
|<span data-ttu-id="5a374-151">7.2</span><span class="sxs-lookup"><span data-stu-id="5a374-151">7.2</span></span>|<span data-ttu-id="5a374-152">Le compilateur accepte uniquement la syntaxe incluse dans C# 7.2 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-152">The compiler accepts only syntax that is included in C# 7.2 or lower.</span></span>|
|<span data-ttu-id="5a374-153">7.1</span><span class="sxs-lookup"><span data-stu-id="5a374-153">7.1</span></span>|<span data-ttu-id="5a374-154">Le compilateur accepte uniquement la syntaxe incluse dans C# 7.1 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-154">The compiler accepts only syntax that is included in C# 7.1 or lower.</span></span>|
|<span data-ttu-id="5a374-155">7</span><span class="sxs-lookup"><span data-stu-id="5a374-155">7</span></span>|<span data-ttu-id="5a374-156">Le compilateur accepte uniquement la syntaxe incluse dans C# 7.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-156">The compiler accepts only syntax that is included in C# 7.0 or lower.</span></span>|
|<span data-ttu-id="5a374-157">6</span><span class="sxs-lookup"><span data-stu-id="5a374-157">6</span></span>|<span data-ttu-id="5a374-158">Le compilateur accepte uniquement la syntaxe incluse dans C# 6.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-158">The compiler accepts only syntax that is included in C# 6.0 or lower.</span></span>|
|<span data-ttu-id="5a374-159">5</span><span class="sxs-lookup"><span data-stu-id="5a374-159">5</span></span>|<span data-ttu-id="5a374-160">Le compilateur accepte uniquement la syntaxe incluse dans C# 5.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-160">The compiler accepts only syntax that is included in C# 5.0 or lower.</span></span>|
|<span data-ttu-id="5a374-161">4</span><span class="sxs-lookup"><span data-stu-id="5a374-161">4</span></span>|<span data-ttu-id="5a374-162">Le compilateur accepte uniquement la syntaxe incluse dans C# 4.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-162">The compiler accepts only syntax that is included in C# 4.0 or lower.</span></span>|
|<span data-ttu-id="5a374-163">3</span><span class="sxs-lookup"><span data-stu-id="5a374-163">3</span></span>|<span data-ttu-id="5a374-164">Le compilateur accepte uniquement la syntaxe incluse dans C# 3.0 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="5a374-164">The compiler accepts only syntax that is included in C# 3.0 or lower.</span></span>|
|<span data-ttu-id="5a374-165">ISO-2</span><span class="sxs-lookup"><span data-stu-id="5a374-165">ISO-2</span></span>|<span data-ttu-id="5a374-166">Le compilateur accepte uniquement la syntaxe incluse dans ISO/IEC 23270:2006 C# (2.0)</span><span class="sxs-lookup"><span data-stu-id="5a374-166">The compiler accepts only syntax that is included in ISO/IEC 23270:2006 C# (2.0)</span></span> |
|<span data-ttu-id="5a374-167">ISO-1</span><span class="sxs-lookup"><span data-stu-id="5a374-167">ISO-1</span></span>|<span data-ttu-id="5a374-168">Le compilateur accepte uniquement la syntaxe incluse dans ISO/IEC 23270:2003 C# (1.0/1.2)</span><span class="sxs-lookup"><span data-stu-id="5a374-168">The compiler accepts only syntax that is included in ISO/IEC 23270:2003 C# (1.0/1.2)</span></span> |

## <a name="configure-multiple-projects"></a><span data-ttu-id="5a374-169">Configurer plusieurs projets</span><span class="sxs-lookup"><span data-stu-id="5a374-169">Configure multiple projects</span></span>

<span data-ttu-id="5a374-170">Vous pouvez créer un fichier **Directory.build.props** contenant l’élément `<LangVersion>` pour configurer plusieurs répertoires.</span><span class="sxs-lookup"><span data-stu-id="5a374-170">You can create a **Directory.build.props** file that contains the `<LangVersion>` element to configure multiple directories.</span></span> <span data-ttu-id="5a374-171">En règle générale, vous faites cela dans votre répertoire de solution.</span><span class="sxs-lookup"><span data-stu-id="5a374-171">You typically do that in your solution directory.</span></span> <span data-ttu-id="5a374-172">Ajoutez ce qui suit à un fichier **Directory.build.props** dans votre répertoire de solution :</span><span class="sxs-lookup"><span data-stu-id="5a374-172">Add the following to a **Directory.build.props** file in your solution directory:</span></span>

```xml
<Project>
 <PropertyGroup>
   <LangVersion>7.3</LangVersion>
 </PropertyGroup>
</Project>
```

<span data-ttu-id="5a374-173">Désormais, les builds de chaque sous-répertoire du répertoire contenant ce fichier vont utiliser la syntaxe C# version 7.3.</span><span class="sxs-lookup"><span data-stu-id="5a374-173">Now, builds in every subdirectory of the directory containing that file will use C# version 7.3 syntax.</span></span> <span data-ttu-id="5a374-174">Pour plus d’informations, consultez l’article sur [Personnaliser votre build](/visualstudio/msbuild/customize-your-build).</span><span class="sxs-lookup"><span data-stu-id="5a374-174">For more information, see the article on [Customize your build](/visualstudio/msbuild/customize-your-build).</span></span>

## <a name="set-the-langversion-compiler-option"></a><span data-ttu-id="5a374-175">Définir l’option de compilateur langversion</span><span class="sxs-lookup"><span data-stu-id="5a374-175">Set the langversion compiler option</span></span>

<span data-ttu-id="5a374-176">Vous pouvez utiliser l’option de ligne de commande `-langversion`.</span><span class="sxs-lookup"><span data-stu-id="5a374-176">You can use the `-langversion` command-line option.</span></span> <span data-ttu-id="5a374-177">Pour plus d’informations, consultez l’article sur l’option de compilateur [-langversion](../language-reference/compiler-options/langversion-compiler-option.md).</span><span class="sxs-lookup"><span data-stu-id="5a374-177">For more information, see the article on the [-langversion](../language-reference/compiler-options/langversion-compiler-option.md) compiler option.</span></span> <span data-ttu-id="5a374-178">Vous pouvez voir une liste des valeurs valides en tapant `csc -langversion:?`.</span><span class="sxs-lookup"><span data-stu-id="5a374-178">You can see a list of the valid values by typing  `csc -langversion:?`.</span></span>
