---
ms.openlocfilehash: 1ebae379b641cbddb2a2c07a199fca057a0d5db0
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59803875"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Allocation par Grid de l’espace aux colonnes * dans WPF

|   |   |
|---|---|
|Détails|À compter de .NET Framework 4.7, WPF remplace l’algorithme utilisé par <xref:System.Windows.Controls.Grid> pour allouer de l’espace aux colonnes \*, ce qui a pour effet de modifier la largeur réelle affectée aux colonnes \* dans différents cas :<ul><li>Lorsqu’une ou plusieurs colonnes \* ont également une largeur minimale ou maximale qui remplace l’allocation proportionnelle pour cette colonne. (La largeur minimale peut dériver d’une déclaration MinWidth explicite, ou d’un minimum implicite obtenu à partir du contenu de la colonne. La largeur maximale ne peut être définie qu’explicitement, à partir d’une déclaration MaxWidth.)</li><li>Lorsqu’une ou plusieurs colonnes \* déclarent un très grand poids \*, supérieur à 10 ^ 298.</li><li>Lorsque les poids \* sont suffisamment différents pour rencontrer une instabilité du calcul en virgule flottante (dépassement de capacité positif ou négatif, perte de précision).</li><li>Lorsque l’arrondi de disposition est activé, et que la résolution d’affichage efficace en PPP est suffisamment élevée.</li></ul>Dans les deux premiers cas, les largeurs produites par le nouvel algorithme peuvent être considérablement différentes de celles générées par l’ancien algorithme ; dans le dernier cas, la différence sera au plus de un ou deux pixels.<p/>Le nouvel algorithme résout plusieurs bogues présents dans l’ancien algorithme :<ol><li>L’allocation totale à des colonnes peut dépasser la largeur de la grille. Cela peut se produire lors de l’allocation d’espace pour une colonne dont la part proportionnelle est inférieure à sa taille minimale. L’algorithme alloue la taille minimale, ce qui réduit l’espace disponible pour les autres colonnes. S’il ne reste aucune colonne \* à allouer, l’allocation totale est trop grande.</li><li>L’allocation totale peut être inférieure à la largeur de la grille. C’est le double problème pour #1, survenant lors de l’affectation à une colonne dont la part proportionnelle est supérieure à sa taille maximale, sans colonnes \* restantes pour combler.</li><li>Deux colonnes \* peuvent recevoir des allocations non proportionnelles à leurs poids \*. Il s’agit d’une version atténuée de 1 et 2, qui survient lors de l’allocation aux colonnes \* A, B et C (dans cet ordre), si la part proportionnelle de B ne respecte pas la contrainte minimale (ou maximale). Comme ci-dessus, cela modifie l’espace disponible pour la colonne C, qui obtient une allocation proportionnelle inférieure (ou supérieure) à A,</li><li>Les colonnes avec des poids extrêmement volumineux (&gt; 10^298) sont traitées comme si elles avaient un poids de 10^298. Les différences proportionnelles entre elles (et entre les colonnes avec des poids légèrement inférieurs) ne sont pas respectées.</li><li>Les colonnes avec des poids infinis ne sont pas gérées correctement. [Il est en fait impossible de définir un poids infini, mais il s’agit d’une restriction artificielle. Le code d’allocation essayait de le gérer, sans succès.]</li><li>Plusieurs problèmes mineurs en évitant le dépassement de capacité positif ou négatif, la perte de précision et autres problèmes liées aux nombres à virgule flottante.</li><li>Les ajustements d’arrondi de disposition sont incorrects à un niveau de PPP suffisamment élevé.</li></ol>Le nouvel algorithme produit des résultats qui répondent aux critères suivants :<p/>Un fichier . La largeur réelle affectée à une colonne \* n’est jamais inférieure à sa largeur minimale ni supérieure à sa largeur maximale.<br/>B. Chaque colonne  <em>qui n’a pas de largeur minimale ou maximale affectée reçoit une largeur proportionnelle à son poids <em>. Pour être exact, si deux colonnes sont déclarées avec les largeurs x</em> et y</em>, respectivement, et qu’aucune colonne ne reçoit sa largeur minimale ou maximale, les largeurs effectives v et w affectées aux colonnes respectent les mêmes proportions : v / w == x / y.<br/>C. La largeur totale allouée aux colonnes \* &quot;proportionnelles&quot; est égale à l’espace disponible après allocation aux colonnes avec contraintes (les colonnes fixes, auto, et \* qui se voient allouer leur largeur minimale ou maximale). Elle peut avoir pour valeur zéro, par exemple si la somme des largeurs minimales dépasse la largeur disponible de Grid.<br/>D. Toutes ces instructions doivent être interprétées en considérant la disposition &quot;idéale&quot;. Lorsque l’arrondi de disposition est activé, la largeur réelle peut différer de la largeur idéale jusqu’à un pixel.<br/>L’ancien algorithme respectait (A), sans pouvoir en faire autant pour les autres critères dans les cas présentés ci-dessus.<p/>Tout ce que qui a été évoqué sur les colonnes et les largeurs dans cet article s’applique également aux lignes et leurs hauteurs.|
|Suggestion|Par défaut, les applications qui ciblent les versions du .NET Framework à partir de .NET Framework 4.7 voient le nouvel algorithme, tandis que les applications qui ciblent .NET Framework 4.6.2 ou antérieur voient l’ancien algorithme.<p/>Pour remplacer la valeur par défaut, utilisez les paramètres de configuration suivants :<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>La valeur <code>true</code> sélectionne l’ancien algorithme, et <code>false</code> le nouvel algorithme.|
|Portée|Mineur|
|Version|4.7|
|Type|Reciblage|
