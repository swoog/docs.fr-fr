---
ms.openlocfilehash: e86542cbf96025247a29a860bfd44db5383c9d16
ms.sourcegitcommit: 0aca6c5d166d7961a1e354c248495645b97a1dc5
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/01/2019
ms.locfileid: "58760181"
---
### <a name="sslstream-supports-tls-alerts"></a>SslStream prend en charge les alertes TLS

|   |   |
|---|---|
|Détails|Après l’échec d’une négociation TLS, un <xref:System.IO.IOException?displayProperty=name> avec une exception <xref:System.ComponentModel.Win32Exception?displayProperty=name> interne est levé par la première opération d’E/S de lecture/écriture. Le code <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> de <xref:System.ComponentModel.Win32Exception?displayProperty=name> peut être mappé avec l’alerte TLS provenant du tiers distant à l’aide de [Codes d’erreur Schannel pour alertes TLS et SSL](https://docs.microsoft.com/windows/desktop/SecAuthN/schannel-error-codes-for-tls-and-ssl-alerts). Pour plus d’informations, voir [RFC 2246 : section 7.2.2 Alertes d’erreur](https://tools.ietf.org/html/rfc2246#section-7.2.2). <br/>Dans .NET Framework 4.6.2 et les versions antérieures, le comportement est l’expiration du canal de transport (généralement une connexion TCP) pendant une opération de lecture ou d’écriture si l’autre partie n’est pas parvenue à négocier la connexion et l’a rejetée immédiatement après.|
|Suggestion|Les applications qui appellent des API d’E/S réseau comme <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)>/<xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> doivent gérer <xref:System.IO.IOException> ou <xref:System.TimeoutException?displayProperty=name>.<br/>La fonctionnalité des alertes TLS est activée par défaut à compter de .NET Framework 4.7. Afin de préserver la compatibilité, cette fonctionnalité est désactivée pour les applications ciblant .NET Framework 4.0 à .NET Framework 4.6.2 qui s’exécutent sur un système .NET Framework 4.7 ou ultérieur. <br/>L’API de configuration suivante est disponible pour activer ou désactiver la fonctionnalité pour les applications .NET Framework 4.6 et ultérieures s’exécutant sur .NET Framework 4.7 ou version ultérieure.<ul><li>Par programmation :</li></ul>Doit être la première action qu’effectue l’application car ServicePointManager ne s’initialisera qu’une seule fois :<pre><code class="lang-csharp">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig :</li></ul><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET Framework 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Clé de Registre (globale de l’ordinateur) :</p>Définissez le paramètre Value sur <code>false</code> pour activer la fonctionnalité dans .NET Framework 4.6 à 4.6.2.<ul><li>Clé : HKLM\SOFTWARE\Wow6432Node\Microsoft\\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts</li><li>Type : Chaîne</li><li>Valeur : &quot;true&quot</li></ul></ul> |
|Portée|Microsoft Edge|
|Version|4.7|
|Type|Reciblage|
|API affectées|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|
